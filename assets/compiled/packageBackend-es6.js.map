{"version":3,"sources":["webpack:///webpack/bootstrap 341d387a38795b745ea3","webpack:///./assets/js/backend/main.js","webpack:///./libs/M_.js","webpack:///./assets/js/backend/Home.js","webpack:///./assets/compiled/models/MT_Jobs.js"],"names":["registerModule","_","M_","moment","locale","modules","key","icon","label","right","hideInMenu","App","create","name","container","$","defaultController","inDevelopment","useWebsocket","isOnline","moduleChange","module","oldModule","val","removeClass","addClass","beforeModuleChange","m","find","beforeReady","next","drawMenus","html","each","loadSessionInfos","ajax","url","type","contentType","data","JSON","stringify","dataType","success","Session","ready","click","evt","stopPropagation","dd","Dropdown","autoShow","alignTo","items","text","open","co_id","window","show","Help","attachedObj","appIsFullScreen","Utils","toggleAppFullScreen","hideMenu","is","l","width","transition","left","hide","showMenu","css","mouseenter","document","on","location","hash","getCookie","log","console","apply","arguments","localeData","utcOffset","Array","prototype","m_remove","pos","indexOf","splice","_registeredModules","opts","defaults","routes","tabController","tabOutlets","currentController","namespace","templates","models","scripts","app","_tabScriptsLoaded","_tabModelsLoaded","beforeAllAjax","afterAllAjax","_cmptAjax","_lastHashBis","_urlArgs","lastModule","lastAction","executeNextAction","_ready","_beforeReady","controllersDir","extend","resize","M_tsResize","clearTimeout","setTimeout","_hashChanged","ajaxPrefilter","options","originalOptions","jqXHR","onBeforeAllAjax","always","onAfterAllAjax","i","length","onResize","fn","createMHelp","_reallyReady","readyState","action","args","substring","push","join","t","split","_getHashArgs","justCreated","undefined","JST","controllerName","tpl","resolve","ok","ok2","__hashChanged","onExit","currentControllerNameSaved","perspective","rotateY","scale","opacity","el","_onShow","init","call","renderTemplate","defaultAction","tplData","jEl","renderMustache","appendTo","template","Controller","controller","controllerSrc","tplPartials","renderMustacheTo","attr","firstTime","anim","onControllerChange","delay","eventName","TAGNAMES","createElement","isSupported","setAttribute","fileSizeInBytes","byteUnits","Math","max","toFixed","obj","isArray","table","quote_style","entities","hash_map","decimal","constMappingTable","constMappingQuoteStyle","useTable","useQuoteStyle","isNaN","toUpperCase","Error","hasOwnProperty","String","fromCharCode","string","symbol","tmp_str","entity","toString","get_html_translation_table","iframeDoc","get","contentWindow","contentDocument","method","remove","body","append","doc","getIframeDocument","write","started","submit","toto","str","trim","n","useWordBoundary","toLong","s_","substr","lastIndexOf","element","_appIsFullScreen","requestMethod","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","ActiveXObject","wscript","SendKeys","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","isFunction","isEmptyObject","d","isValid","path","pop","tabPaths","hex","shorthandRegex","replace","r","g","b","result","exec","parseInt","slice","rgb","match","cmpUniqId","tab","_data","nb","tabToRemove","selector","off","_cmptZIndexModal","last","target","c","random","v","singular","plural","withoutnumber","callback","time","arbitralName","tabDelay","undef","len","emptyValues","num","ret","toAdd","kk","reg1","input","allowed","toLowerCase","tags","commentsAndPhpTags","$0","$1","f","charAt","padStr","direction","res","reverse","cname","cvalue","expireDays","Date","setTime","getTime","expires","toGMTString","cookie","ca","isMac","navigator","platform","keyName","valName","findInArray","what","i2","index","searchSimpleArray","needle","haystack","is_xhtml","breakTag","txt","exp","RegExp","field","opt","optName","optTemp","tmp_arr","cnt","have_basename","have_extension","have_filename","OPTS","PATHINFO_ALL","concat","__getExt","dotP","PATHINFO_DIRNAME","dirName","dirname","PATHINFO_BASENAME","basename","PATHINFO_EXTENSION","extension","PATHINFO_FILENAME","filename","devise","i18n","price","sep","number_format","round","a","e","h","Number","pow","j","start","stop","childNodes","range","createRange","sel","getSelection","setStart","collapse","setEnd","removeAllRanges","addRange","selectorLimit","id","zindex","increment","getMaxZIndex","cb","getSpeedAnim","ajaxJson","error","textStatus","errorThrown","responseJSON","processData","cache","io","socket","post","jwres","put","delete","files","moreArgs","formData","FormData","src","script","appendChild","getRangeAt","rangeCount","_selection","selection","select","Observable","initObservable","_listeners","listeners","addListener","evtName","fct","removeListener","listenersOk","trigger","translate","Model","fields","row","store","primaryKey","getDefinition","Object","mixin","updateRow","getArray","isset","silently","ModelKeyVal","Store","rows","rowsModel","_tabFieldsForSort","rootData","currentSort","model","lastLoadArgs","limit","sortOnRemote","skip","lastTotal","unshiftRows","pushRows","_loaded","_loading","setRows","unshift","useModel","getRowBy","getId","addRows","count","_mid","reload","_sortRemote","sort","a0","b0","getDate","localeCompare","mod","createEmptyRow","query","okArgs","thisArgs","onBeforeLoad","_treatDataStore","loadAjaxXHR","getJson","lastdata","total","onUpdate","reset","load","Outlet","view","help","rendered","top","isEmpty","_attachHelp","empty","Stored","initStored","proxy","updateStore","setStore","getStore","shiftX","shiftY","maxWidth","showNow","_mousemove","pageY","pageX","outerWidth","hasClass","outerHeight","height","mouseleave","prop","focus","Tabs","firstTab","buttons","onChange","ind","jElId","cbBeforeShow","speed","current","children","cbAfterShow","Tree","autoLoad","displayRootNode","cls","retractable","rootNode","expended","hidden","nodes","_drawNodes","_createChildNodes","closest","slideUp","slideDown","nodeId","node","getNode","clickable","_dragMID","preventDefault","evt2","mid","nodeDrop","moveNode","parent","_nodeparent","_resNodeId","_nodeToAdd","_iter","parentId","removeNode","addNode","nodepath","nodeIdStart","getNodeParent","childOfNodeId","getNodePath","List","render","SimpleList","classItems","itemValue","itemKey","selectionVisible","multipleSelection","currentSelection","dynamic","lineHeight","loadLimit","oddEven","itemsDraggableTo","_dragStarted","_lastSelection","optsTemp","setSelection","scroll","diff","offset","_skipPosition","ceil","indexTemp","clsTr","totalHeight","countTotal","item","m_id","getRow","dontremoveselection","isMacos","metaKey","ctrlKey","shiftKey","lastIndex","getIndexById","currentIndex","min","m_idTemp","moveViewable","viewable","enterViewable","leaveViewable","elTemp","goodItem","posYRow","position","posYParent","goodContainer","scrollTop","animate","tabSelection","TableList","colsDef","classHeader","styleTable","fullHeight","limitRows","moreText","lessText","withMouseOverRaw","headerHeight","_colsToHide","_idMore","getMoreText","_limitRows","getLessText","_getNbRowsLimited","style","align","w","datamid","numcol","colDef","_sortDirection","col","_setMoreLessText","hideColumns","cols","difference","uniq","CRUD","initCRUD","_callbackFormLoaded","_treatDataCrud","ajaxLoad","abort","dataLoaded","onLoad","save","modelOrData","_callbackFormSaved","_isForm","getValues","isMoment","toISOString","moreUrl","modelTemp","errTxt","invalidAttributes","msg","message","informValidReturnSails","_callbackFormDelete","deleteJson","Drawer","visible","floating","tsResize","showOrHide","topStart","leftStart","Modal","focusOn","clickHide","alpha","isLoading","jEl1","jEl2","jEl3","jEl4","posTop1","posTop2","posTop3","posLeft1","posLeft2","posLeft3","Window","getNextZIndex","minHeight","modal","animFrom","offsetPositionRight","offsetPositionLeft","offsetPositionTop","offsetPositionBottom","_lastWindow","modalObj","l1","l2","t1","t2","w1","w2","h1","h2","s1","s2","o1","o2","keydown","keyCode","_escapeButtonListener","Button","handler","Dialog","textButtonOk","textButtonCancel","title","callbackOk","_createTemplate","win","callbackCancel","callbackClose","destroyOnHide","_visible","offsetTop","offsetLeft","alwaysDropdownBelow","constraints","autoSize","itemsClass","drawEachItem","_items","ul","more","disabled","htmlItem","jElItem","drawItem","_setPosition","setItems","_waitEndClose","rettemp","parents","filter","first","compareTo","topCompareTo","hCompareTo","maxh","moreH","closeAllDropdown","destroy","hideMHelp","_goGlobalListeners","CalendarMonth","dateViewed","dateSelected","renderCellDay","disabledDates","dateFormat","dateFormatFrom","firstDay","noDays","noMonths","_thefirstDay","_thelastDay","allways6lines","_cls","displayHeader","selectable","showDateSelected","showDateViewed","showWeekNumber","selectWeek","redraw","showDays","yearStart","floor","year","dActu","month","day","active","format","selectYear","nextYears","previousYears","add","showYears","date","showMonths","tabMonths","months","moreD","dTemp3","endOf","week","selectMonth","nextYear","previousYear","subtract","today","nbDaysInMonth","daysInMonth","firstDate","startOf","decalage","tabDaysShort","weekdaysShort","tabCells","nbMax","nbLines","tdClsWeek","tdCls","isDisabled","contentTemp","idCell","setDateSelected","nextMonth","previousMonth","contentTemp2","Calendar","MonthView","cellMinHeight","cellHeadMinHeight","provideEvents","modelDef","end","events","loadEvents","drawEvents","widthCell","tabNbEventsByWeek","tabBars","start2","end2","nbDays","nj","isFirst","isLast","startOfWeek","objTemp","barEvt","bar","bgcolor","color","moreLeft","moreWidth","el2","tr","found","Form","itemsDefaults","_currentModel","validBeforeSave","addItem","autoUnedit","err","valid","informValid","key2","alert","setValues","resetValid","dataOrModel","Combobox","v2","setValueAndRawValue","setValue","serialized","returnModel","File","getValue","nameTemp","fieldName","_alert","er","optsItem","form","autoContainer","jElTemp","Div","item2","keepedItems","fakeGroupName","fakeGroup","disable","Input","value","hideContainerIfEmpty","placeholder","inputType","tabindex","editable","_inEdit","_clsMore","clsInput","clsGroup","clsLabel","styleInput","styleGroup","styleLabel","labelPosition","labelWidth","labelFocusInput","dontSave","allowEmpty","minLength","maxLength","previousValue","readOnly","forattr","multiple","incremental","Slider","jElCursor","steps","labelLeft","labelRight","wLabels","_spaceCursor","parentOffset","relX","setPosition","Hidden","isPlainObject","Multi","confirmDelete","confirmDeleteMessage","onClickBtAdd","_idBtAddKeyword","drawContainer","confirm","removeValue","pull","Rating","nbStars","note","_toExitStar","regxValidChar","Text","selectOnFocus","keyup","which","onEnterInput","onKeyup","keypress","onKeyPress","validChar","stopImmediatePropagation","reg","test","Search","isEventSupported","Textarea","acceptTabulation","selectionStart","selectionEnd","Password","checkstrength","jElPass","score","checkPassword","re","TextEditor","heightEditor","idTemp1","idTemp2","after","editor","Editor","buttonsContainer","RadioGroup","radioPosition","idTemp","Checkbox","threeStates","indeterminate","change","decimalLength","decimalSeparator","decimalForced","allowNegative","valueMax","valueMin","startEmpty","allowComparison","dec","nbDec","dec2","str_pad","Price","Color","Picker","hasDropdown","hidePicker","showDropdownOnFocus","containerDropdown","stylePicker","dropdownOpts","dropdown","_sameEventEventClick","showDropdown","isVisible","createDropdown","moreCls","moreStyle","wrap","htmlCaret","caret","clickPicker","dateFormatInput","calendar","cal","realign","setDateViewed","isDropdownVisible","DateWeek","Hour","incrementHour","incrementMinute","incrementSecond","jElDropdown","setToCurrent","hours","minutes","seconds","val2","DateHour","configDateDef","containerWidth","required","configHourDef","id1","id2","configDate","configHour","formDate","formHour","d1","d2","modelKey","modelValue","mode","useRawValue","useZeroIfEmpty","_createItemsFromStore","_getVal","clickItemDropdown","getRawValue","setRawValue","rawVal","strip_tags","html_entity_decode","ComboboxMulti","allowCreate","jElForMulti","addItemMulti","realval","deletable","me","Display","buttonsToDisplay","createButtons","setContainer","execCommand","caretMove","comm","block","td","commonAncestorContainer","eq","countTds","newTr","winLink","idBtSave","idBtCancel","idLink","idTarget","restoreSelection","winSource","containerEditor","idCode","winEditTable","idwidth","idcellspacing","idcellpadding","idborder","idstyle","idid","idalign","currentTable","sEl","setCurrentTable","winEditCell","idvalign","idcolor","currentCell","backgroundColor","setCurrentCell","winNewImage","tabFilesToSend","originalEvent","dataTransfer","createThumbnail","xhr","XMLHttpRequest","onload","jsonResponse","parse","responseText","callbackSave","img","tabRes","upload","onprogress","lengthComputable","send","control","replaceWith","clone","list","reader","FileReader","theFile","center","readAsDataURL","resetFileInput","jEls","parentsUntil","tabTemp","tagName","queryCommandValue","toolbar","bt","button","saveSelection","isStartedDrag","imgDraggable","execImageInfo","postJSON","Home","MT_Jobs"],"mappings":"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cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,OAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,UAAlB;AACAA,cAAS,KAAT,IAAkB,QAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AACAA,cAAS,KAAT,IAAkB,SAAlB;AA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","file":"packageBackend-es6.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 341d387a38795b745ea3\n **/","'use strict';\n\nimport {M_} from './../../../libs/M_.js' ;\nimport {Home} from './Home.js' ;\n\nM_.registerModule('Home',Home) ;\n\n// import {Services} from 'js6/libs/Services.js' ;\n// import {Shared} from 'js6/libs/Shared.js' ;\n\n// var M_ = System.get('M_/M_') ;\n// var Contacts = System.get('controllers/Contacts').Contacts ;\n// var dav = new M_.David() ;\n// dav.print() ;\n// // Contacts.init() ;\n// Contacts.init() ;\n// console.log(\"Contacts\",Contacts)\n\n// log(\"App\",M_.App)\n\n_.M_ = M_ ;\n// _.Services = M_.App.Services = Services ;\n// _.Shared = Shared ;\n// _.Utils = M_.Utils ;\n\n\nmoment.locale('fr') ;\n\nvar modules = [\n\t{key:'Home', icon:'fa-bell faa-ring', label:\"Accueil\", right:''},\n\t{key:'Contacts', icon:'fa-user', label:\"Contacts\", right:'contacts'},\n\t{key:'Expenses', icon:'fa-user-plus', label:\"Notes de frais\", right:'expenses'},\n\t{key:'Vacation', icon:'fa-plane', label:\"Absences\", right:'vacation'},\n\t{key:'VacationAdmin', icon:'fa-plane', label:\"Absences admin\", right:'vacation_admin'},\n\t{key:'Reports', icon:'fa-globe', label:\"Rapport hebdo\", right:'reports'},\n\t{key:'ReportsAdmin', icon:'fa-globe', label:\"Rapport hebdo admin\", right:'reports_admin'},\n\t{key:'MonthlyReports', icon:'fa-globe', label:\"Rapport mensuel\", right:'monthlyreports'},\n\t{key:'MonthlyReportsAdmin', icon:'fa-globe', label:\"Rapport mensuel admin\", right:'monthlyreports_admin'},\n\t{key:'Candidates', icon:'fa-user-plus', label:\"Module DRH\", right:'humanresources'},\n\t{key:'Commercials', icon:'fa-user-plus', label:\"Paliers ch. d'aff\", right:'commercials'},\n\t{key:'Preferences', icon:'fa-gears', label:\"Prfrences\", right:''},\n\t{key:'Search', icon:'fa-gears', label:\"Rechercher\", right:'', hideInMenu: true},\n] ;\n\nM_.App\n.create({\n\tname: 'PuP',\n\tcontainer: $('#main'),\n\tdefaultController: 'Home',\n\tinDevelopment: true,\n\tuseWebsocket: false,\n\tisOnline: false,\n\tmoduleChange: (module, oldModule)=> {\n\t\tif (module!='Search') $('#mainsearchinput').val('');\n\t\t$(\"#mainnavcontent li\").removeClass('over') ;\n\t\t$(\"#mainnavcontent .menumodule_\"+module).addClass('over') ;\n\t},\n\tbeforeModuleChange: (module, oldModule)=> {\n\t\tvar m = _.find(modules, {key:module}) ;\n\t\t// console.log(\"module, oldModule\", module, oldModule, m);\n\t\t// if (m.right==='' || Services.getUserRight(m.right)) return true ;\n\t\treturn true ;\n\t}\n})\n.beforeReady(function(next) {\n\n\tthis.drawMenus = function() {\n\n\t\tvar html = \"\" ;\n\t\t_.each(modules, (module)=> {\n\t\t\tif (module.hideInMenu) return ;\n\t\t\t// if (module.right==='' || Services.getUserRight(module.right)) {\n\t\t\t\thtml += '<a href=\"#/'+module.key+'\"><li class=\"menumodule_'+module.key+'\"><span class=\"\"></span><p>'+module.label+'</p><div class=\"M_Clear\"></div></li></a>' ;\n\t\t\t// }\n\t\t}) ;\n\t\t$(\"#mainnavcontent\").html(html) ;\n\t};\n\tthis.loadSessionInfos = function() {\n\t\t$.ajax({\n\t\t\turl: \"/ws/infos\",\n\t\t\ttype: 'GET',\n\t\t\tcontentType: 'application/json',\n\t\t\tdata: JSON.stringify({}),\n\t\t\tdataType: 'json',\n\t\t\tsuccess: (data)=> {\n\t\t\t\t_.Session = M_.App.Session = data.data ;\n\t\t\t\t// log(\"M_.App.Session\",M_.App.Session);\n\t\t\t\t// console.log(\"title\", Services.getUserRight('contacts'));\n\t\t\t\tthis.drawMenus() ;\n\n\t\t\t\tif (next) next() ;\n\t\t\t}\n\t\t});\n\t} ;\n\tthis.loadSessionInfos() ;\n\n})\n.ready(function() {\n\n\n\t// Services.updateDates() ;\n\n\t// $(\"#loginInfosBt_role\").html(_.result(_.find(Shared.getRoles(), {key:M_.App.Session.co_type}), 'val') + \" \" + M_.App.Session.ag_id.ag_name) ;\n\n\t$('#loginInfosBt').click((evt)=> {\n\t\tevt.stopPropagation() ;\n\t\tvar dd = new M_.Dropdown({\n\t\t\tautoShow: true,\n\t\t\talignTo: $('#loginInfosBt'),\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Modifier mon compte\",\n\t\t\t\t\tclick: ()=> {\n\t\t\t\t\t\tM_.App.open('Contacts', 'show', M_.App.Session.co_id) ;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttext: \"Prfrences\",\n\t\t\t\t\tclick: ()=> {\n\t\t\t\t\t\tM_.App.open('Preferences', 'index') ;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttext: \"Se dconnecter\",\n\t\t\t\t\tclick: ()=> {\n\t\t\t\t\t\twindow.open('/logout', '_self') ;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t]\n\t\t}) ;\n\t\tdd.show() ;\n\t}) ;\n\n\n\t$(\".mainlogo\").click(()=> {\n\t\tM_.App.open('Home') ;\n\t});\n\n\n\t// Services._updateBadgeActions() ;\n\t// $(\"#loginAlert\").click((evt)=> {\n\t// \tevt.stopPropagation() ;\n\t// \tvar items = [];\n\t// \t_.each(M_.App.Session.todos, (todo)=> {\n\t// \t\tlet f = M_.Utils.findInArray(Shared.getTodoTypes(), todo.td_type) ;\n\t// \t\tlet d = moment(todo.co_id_user.updatedAt).valueOf() ;\n\t// \t\tlet txt = `\n\t// \t\t\t<div class='M_ImgRound loginAlertLiContent2' style=\"background-image:url(/bp/login/avatar/35/35/${todo.co_id_user.co_id}?d=${d})\"></div>\n\t// \t\t\t<div class='loginAlertLiContent'>\n\t// \t\t\t\t<div>${f.val}</div>\n\t// \t\t\t\t<div class='loginAlertLiLittle'>${Services.getTextForTodo(todo)}</div>\n\t// \t\t\t</div>\n\t// \t\t\t<div class='M_Clear'></div>\n\t// \t\t` ;\n\t// \t\titems.push({\n\t// \t\t\ttext: txt,\n\t// \t\t\ttodo: todo,\n\t// \t\t\tclick: (evt, item)=> {\n\t// \t\t\t\tServices.redirectForTodo(item.todo) ;\n\t// \t\t\t}\n\t// \t\t}) ;\n\t// \t}) ;\n\t// \tvar dd = new M_.Dropdown({\n\t// \t\tautoShow: true,\n\t// \t\talignTo: $(\"#loginAlert\"),\n\t// \t\titemsClass: 'loginAlertLi',\n\t// \t\titems: items\n\t// \t}) ;\n\t// \tdd.show() ;\n\t// }) ;\n\n\n\t// $('#mainsearchinput').keyup((evt)=> {\n\t// \tM_.Utils.delay(()=> {\n\t// \t\tM_.App.open('Search', 'draw') ;\n\t// \t}, 200, \"delayMainSearch\");\n    //\n\t// }) ;\n\tnew M_.Help({\n\t\ttext: \"Rechercher dans les contacts, les absences, les candidats\",\n\t\tattachedObj: $('#mainsearchinput')\n\t}) ;\n\n\n\tthis.appIsFullScreen = false ;\n\t$('#loginFullScreen').click(()=> {\n\t\tM_.Utils.toggleAppFullScreen() ;\n\t}) ;\n\tnew M_.Help({\n\t\ttext: \"Afficher l'application en plein cran\",\n\t\tattachedObj: $('#loginFullScreen')\n\t}) ;\n\n\n\tfunction hideMenu() {\n\t\tif ($('#mainnav').is(':visible')) {\n\t\t\tvar l = -1*$('#mainnav').width() ;\n\t\t\t$('#mainnav').transition({\n\t\t\t\tleft: l\n\t\t\t}, 500, ()=> {\n\t\t\t\t$('#mainnav').hide() ;\n\t\t\t}) ;\n\t\t\t$('#mainbtmenus span').addClass('fa-reorder') ;\n\t\t\t$('#mainbtmenus span').removeClass('fa-close') ;\n\t\t}\n\t}\n\tfunction showMenu() {\n\t\tif (!$('#mainnav').is(':visible')) {\n\t\t\t$('#mainnav')\n\t\t\t.css('left', -1*$('#mainnav').width())\n\t\t\t.show()\n\t\t\t.transition({\n\t\t\t\tleft: 0\n\t\t\t}, 500, ()=> {\n\t\t\t}) ;\n\t\t\t$('#mainbtmenus span').removeClass('fa-reorder') ;\n\t\t\t$('#mainbtmenus span').addClass('fa-close') ;\n\t\t}\n\t}\n\t$('#mainbtmenus').mouseenter(showMenu) ;\n\t$(document)\n\t.on('click', '#mainbtmenus', (evt)=> {\n\t\tevt.stopPropagation() ;\n\t\tif (!$('#mainnav').is(':visible')) showMenu() ;\n\t\telse hideMenu() ;\n\t})\n\t.on('click', hideMenu) ;\n\n\tif (!window.location.hash && M_.Utils.getCookie('mwjurl')) window.open('#/'+M_.Utils.getCookie('mwjurl'), '_self') ;\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./assets/js/backend/main.js\n **/","// mettre des types gnraux : par exemple \"meubl\" et \"chambre de bonne\" dans \"appartement\" ou \"bastide\" et \"chateau\" dans \"villa\"\n\n// changer update en change pour les vnements combobox\n\n//// voir http://jsfiddle.net/jhfrench/GpdgF/ pour un treeview\n//// mettre un appel bouton \"tlphonique reu\" accessible sur toutes les pages\n//// excellent : http://dropthebit.com/demos/fancy_input/fancyInput.html\n/// pour du scroll : http://johnpolacek.github.io/superscrollorama/\n/// peut servir, d'autres trucs bien sur ce site : http://tympanus.net/codrops/2012/01/24/arctext-js-curving-text-with-css3-and-jquery/\n///  utiliser sur un site web : http://www.seanmccambridge.com/tubular/\n/// excellent : http://tutorialzine.com/2011/09/jquery-pointpoint-plugin/\n/// peut-tre pas mal, pour rafraichir les listes : http://usehook.com/\n//  tudier : http://www.chartjs.org/docs/#getting-started-creating-a-chart\n//  copier ??? http://paulkinzett.github.io/toolbar/\n\n/// http://codecanyon.net/item/fun-captcha-jquery-plugin/6705437?ref=yuzuruishikawa\n\n\n// Mac OS X: http://blog.coolaj86.com/articles/how-to-create-an-osx-pkg-installer.html\n// Ubuntu Linux: http://blog.coolaj86.com/articles/how-to-create-a-debian-installer.html\n// Microsoft Windows: http://blog.coolaj86.com/articles/how-to-create-an-innosetup-installer.html\n\n\n//  annalyser : http://www.corm.fr/demonstration/\n//  analyser galement (permet de faire des applications locales en nodejs) : https://github.com/rogerwang/node-webkit\n\n// l'utiliser pour la cration du PDF ? http://www.jqueryrain.com/?l1iRfaTH\n/// ...pas mal du tout, car  permet de laisser en colonne !!!!\n\n\n\n\n\n\n\n\n\n\n'use strict';\n\n// import {$} from \"./../js/jquery\";\n// import {moment} from \"./../js/moment-with-locales\";\n// console.log(\"moment\",moment);\n//\n// var jquery = $ ;\n\nwindow.log = function () {\n\tif (window.console) {\n\t\tconsole.log.apply(window.console, arguments);\n\t}\n};\n\nmoment().localeData('fr');\nmoment().utcOffset(0);\nconsole.log(\"moment().utcOffset()\",moment().utcOffset());\n\nArray.prototype.m_remove = function(val) {\n\tvar pos = this.indexOf(val);\n\tif (~pos) this.splice(pos, 1);\n};\n\n/**\n * M_ is a javascript application framework to build single page web applications, rather graphic than theory.\n * @namespace M_\n * @version 1.0\n * @author David Miglior <david@miglior.fr>\n * @todo Renomer les balises HTML utiliss en \"data-\" (par convention)\n * @todo Si le dernier argument de M_.App.open est false alors ne pas appeler d'action (permet de faire un bouton cancel)\n * @todo  Donner un nom : Bootstrap commander\n *\n */\nM_ = {\n\t_registeredModules: {}\n} ;\n\nM_.registerModule = (name, module)=> {\n\tconsole.log(\"name,module\",name,module);\n\tM_._registeredModules[name] = module ;\n} ;\n\n\n/**\n * The Morphine application, instancied\n * @class\n * @memberof! <global>\n * @property {type} inDevelopment\n * @property {type} useWebsocket\n * @property {type} name\n * @property {type} routes\n * @property {type} defaultController\n * @property {type} tabController\n * @property {type} tabOutlets\n * @property {type} container\n * @property {type} currentController\n * @property {type} namespace\n * @property {type} templates\n * @property {type} models\n * @property {type} scripts\n * @property {type} app\n * @property {type} beforeAllAjax\n * @property {type} afterAllAjax\n * @property {type} lastModule\n * @property {type} lastAction\n * @property {type} executeNextAction\n * @property {type} controllersDir\n */\nM_.App = new (class {\n\t/**\n\t * Already instancied\n\t * @return {[type]} [description]\n\t */\n\tconstructor() {\n\t}\n\t/**\n\t * To document\n\t * @param {type} opts\n\t */\n\tcreate(opts) {\n\n\t\tthis.defaults = {\n\t\t\tinDevelopment: true,\n\t\t\tuseWebsocket: false,\n\t\t\tname: \"\",\n\t\t\troutes: {},\n\t\t\tdefaultController: 'Home',\n\t\t\ttabController: [],\n\t\t\ttabOutlets: {},\n\t\t\tcontainer: null,\n\t\t\tcurrentController: null,\n\t\t\tnamespace: '',\n\t\t\ttemplates: null,\n\t\t\tmodels: {},\n\t\t\tscripts: null,\n\t\t\tapp: null,\n\t\t\t_tabScriptsLoaded: [],\n\t\t\t_tabModelsLoaded: [],\n\t\t\tbeforeAllAjax: null,\n\t\t\tafterAllAjax: null,\n\t\t\t_cmptAjax: 0,\n\t\t\t_lastHashBis: \"-------\",\n\t\t\t_urlArgs: [],\n\t\t\tlastModule: \"-------\",\n\t\t\tlastAction: \"-------\",\n\t\t\t// _hashIsLoading: false,\n\t\t\texecuteNextAction: true,\n\t\t\t_ready: null,\n\t\t\t_beforeReady: null,\n\t\t\tcontrollersDir: 'app/controllers/',\n\t\t\tmoduleChange: null,\n\t\t\tbeforeModuleChange: null,\n\t\t};\n\t\t$.extend(this, this.defaults, opts) ;\n\n\t\t$(window).resize(()=>{\n\t\t\tif (this.M_tsResize) window.clearTimeout(this.M_tsResize) ;\n\t\t\tthis.M_tsResize = window.setTimeout(()=> {\n\t\t\t\tthis.resize() ;\n\t\t\t}, 300) ;\n\t\t}) ;\n\n\t\tif (\"onhashchange\" in window) {\n\t\t\t$(window).on('hashchange',()=> {\n\t\t\t\tthis._hashChanged();\n\t\t\t}) ;\n\t\t// } else {\n\t\t// \tthis.lastHash = window.location.hash;\n\t\t// \twindow.setInterval(()=> {\n\t\t// \t\tif (window.location.hash != this.lastHash) {\n\t\t// \t\t\tthis.lastHash = window.location.hash;\n\t\t// \t\t\tthis._hashChanged();\n\t\t// \t\t}\n\t\t// \t}, 100);\n\t\t}\n\n\t\t$.ajaxPrefilter((options, originalOptions, jqXHR)=> {\n\t\t\t//log(\"c un ajax 1 \",arguments)\n\t\t\tthis.onBeforeAllAjax(options, originalOptions, jqXHR) ;\n\t\t\tjqXHR.always((data)=> {\n\t\t\t\t//log(\"c un ajax 2 \",arguments)\n\t\t\t\tthis.onAfterAllAjax(data, options, originalOptions, jqXHR) ;\n\t\t\t});\n\t\t});\n\n\n\t\treturn this ;\n\t}\n\t/**\n\t * @function onBeforeAllAjax\n\t * @memberOf! M_.App\n\t * @instance\n\t * @param {Object} options\n\t * @param {Object} originalOptions\n\t * @param {jqXHR} jqXHR\n\t */\n\tonBeforeAllAjax(options, originalOptions, jqXHR) {}\n\t/**\n\t * To document\n\t * @param {Object} data\n\t * @param {Object} options\n\t * @param {Object} originalOptions\n\t * @param {jqXHR} jqXHR\n\t */\n\tonAfterAllAjax(data, options, originalOptions, jqXHR) {}\n\t/**\n\t * To document\n\t * @return {M_.App}\n\t */\n\tresize() {\n\t\tvar tabController = this.tabController ;\n\t\tfor(var i=0 ; i<tabController.length ; i++) {\n\t\t\ttabController[i].onResize() ;\n\t\t}\n\t\treturn this ;\n\t}\n\t/**\n\t * @param  {Function}\n\t * @return {M_.App}\n\t */\n\tbeforeReady(fn) {\n\t\tthis._beforeReady = fn ;\n\t\treturn this ;\n\t}\n\t/**\n\t * @param  {Function}\n\t * @return {M_.App}\n\t */\n\tready(fn) {\n\t\t// log(\"ready\")\n\t\tthis._ready = fn ;\n\t\tM_.Help.createMHelp() ;\n\t\tif (this._beforeReady) {\n\t\t\tthis._beforeReady(()=> {\n\t\t\t\tthis._reallyReady() ;\n\t\t\t}) ;\n\t\t} else this._reallyReady() ;\n\t\treturn this ;\n\t}\n\t_reallyReady() {\n\t\tif (document.readyState == \"complete\") {\n\t\t\tthis._ready() ;\n\t\t\tthis._hashChanged() ;\n\t\t} else {\n\t\t\t$(document).ready(() => {\n\t\t\t\tthis._ready() ;\n\t\t\t\tthis._hashChanged() ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * Open a page\n\t * @param  {String} module\n\t * @param  {String} action\n\t * @return {M_.App}\n\t */\n\topen(module, action) {\n\t\t// log(\"open\", this.currentController)\n\t\tthis._lastHashBis = window.location.hash ;\n\t\tvar url = \"\" ;\n\t\tvar args = [] ;\n\t\tthis.executeNextAction = true ;\n\t\tif (module.substring(0,1)=='/') {\n\t\t\turl = \"#\"+module ;\n\t\t} else {\n\t\t\tfor(var i=0 ; i<arguments.length ; i++) {\n\t\t\t\tif (arguments[i]!==false) args.push(arguments[i]) ;\n\t\t\t\telse this.executeNextAction = false ;\n\t\t\t}\n\t\t\turl = '#/'+args.join('/') ;\n\t\t}\n\t\t//log(\"module,url,args\",module, \";\", url,\";\",args)\n\t\tif (url==window.location.hash) {\n\t\t\tthis._hashChanged() ;\n\t\t} else {\n\t\t\twindow.open(url, '_self') ;\n\t\t}\n\t\treturn this ;\n\t}\n\t_getHashArgs() {\n\t\tvar hash = window.location.hash.substring(2, window.location.hash.length) ;\n\t\tvar t = hash.split('/') ;\n\t\treturn t ;\n\t}\n\t_hashChanged() {\n\t\tvar args = this._getHashArgs() ;\n\t\tvar module = this.defaultController ;\n\t\tif (args[0] && args[0]!=='') module = args[0] ;\n\t\tvar justCreated = false ;\n\t\tif (this[module]===undefined) {\n\t\t\t// var Mod = System.get('js6/controllers/'+module+\".js\")[module] ;\n\t\t\t// this[module] = new Mod({controllerName:module, tpl:JST[module]}) ;\n\t\t\tconsole.log(\"JST\",JST,M_._registeredModules);\n\t\t\t// import {mymod} from './'+module+'.js' ;\n\t\t\tthis[module] = new M_._registeredModules[module]({controllerName:module, tpl:JST[module]}) ;\n\t\t\tthis.tabController.push(this[module]) ;\n\t\t\tjustCreated = true ;\n\t\t}\n\t\tthis[module].resolve((ok)=> {\n\t\t\tif (ok) {\n\t\t\t\tif (this.beforeModuleChange) {\n\t\t\t\t\tlet ok2 = this.beforeModuleChange(module, this.lastModule) ;\n\t\t\t\t\tif (ok2!==false) this.__hashChanged(justCreated) ;\n\t\t\t\t} else this.__hashChanged(justCreated) ;\n\t\t\t}\n\t\t});\n\t}\n\t__hashChanged(justCreated) {\n\n\n\t\tvar tabController = this.tabController ;\n\t\tfor(var i=0 ; i<tabController.length ; i++) {\n\t\t\ttabController[i].onExit() ;\n\t\t}\n\n\t\t// if (this._hashIsLoading) return ;\n\t\t// log(\"_hashChanged9\")\n\t\tvar args = this._getHashArgs() ;\n\t\tvar module = this.defaultController ;\n\t\tif (args[0] && args[0]!=='') module = args[0] ;\n\t\tvar action = '' ;\n\t\tif (args[1] && args[1]!=='') action = args[1] ;\n\t\t// log(\"module2\",module)\n\n\t\t// log(\"currentController\", this.currentController)\n\t\tif (this.currentController && this.lastModule!==module) {\n\t\t\tvar currentControllerNameSaved = this.currentController.controllerName ;\n\t\t\t$(\"#part_\"+this.currentController.controllerName)\n\t\t\t.css('left',0)\n\t\t\t.css('z-index',1)\n\t\t\t.css('transform-origin', '5% 50%')\n\t\t\t.transition({\n\t\t\t\t// x: $(window).width(),\n\t\t\t\tperspective: '1000px',\n\t\t\t\trotateY: '50deg',\n\t\t\t\tscale: 0.7,\n\t\t\t\topacity: 0.3,\n\t\t\t}, 500, (el)=> {\n\t\t\t\t$(\"#part_\"+currentControllerNameSaved).hide() ;\n\t\t\t\t// this._hashChangedMore() ;\n\t\t\t}) ;\n\t\t} else {\n\t\t\t// this._hashChangedMore() ;\n\t\t}\n\n\t\tif (!justCreated) {\n\t\t\tif (this.lastModule==module) {\n\t\t\t\tthis[module]._onShow(false) ;\n\t\t\t} else {\n\t\t\t\t// var tabController = this.tabController ;\n\t\t\t\tfor(i=0 ; i<tabController.length ; i++) {\n\t\t\t\t\tif (this.currentController.controllerName==tabController[i].controllerName) continue ;\n\t\t\t\t\t// tabController[i].hide() ;\n\t\t\t\t\t$(\"#part_\"+tabController[i].controllerName).css('z-index',0) ;\n\t\t\t\t}\n\n\n\t\t\t\tthis[module]._onShow(true) ;\n\t\t\t}\n\t\t} else {\n\t\t\t// import {mod} from 'controllers/'+module ;\n\t\t\t// log(\"module\",module, System.get('js6/controllers/'+module+\".js\"))\n\t\t\tthis[module].init.call(this[module]) ;\n\t\t\tthis[module].renderTemplate.call(this[module]) ;\n\t\t\tthis[module].create.call(this[module]) ;\n\t\t\tthis[module]._onShow.call(this[module], true) ;\n\t\t}\n\n\n\t\tif (action==='') action = this[module].defaultAction ;\n\t\tif (!this[module][action+'Action']) {\n\t\t\tlog(\"You must define function '\"+action+'Action'+\"()' in \"+this[module].controllerName+\" controller\") ;\n\t\t\tthis.open(module, \"index\") ;\n\t\t} else {\n\t\t\targs.splice(0,2) ;\n\t\t\tthis[module][action+'Action'].apply(this[module], args) ;\n\t\t}\n\n\t\tif (this.moduleChange) this.moduleChange(module, this.lastModule) ;\n\n\n\t\tthis.lastModule = module ;\n\t\tthis.lastAction = action ;\n\n\n\n\t}\n\t/**\n\t * @param  {jQuery}\t\tcontainer\n\t * @param  {JSTemplate}\ttpl\n\t * @param  {Object}\t\ttplData\n\t * @return {jQuery}\n\t */\n\trenderMustacheTo(container, tpl, tplData={}) {//, tplPartials={}\n\t\tvar jEl = $(this.renderMustache(tpl, tplData)) ;//, tplPartials\n\t\tjEl.appendTo(container) ;\n\t\treturn jEl ;\n\t}\n\t/**\n\t * @param  {JSTemplate}\ttpl\n\t * @param  {Object}\t\ttplData\n\t * @return {String}\n\t */\n\trenderMustache(tpl, tplData={}) {//, tplPartials={}\n\t\t// console.log(\"tplPartials\",tplPartials)\n\t\t// console.log('_.templateSettings.imports',_.templateSettings.imports)\n\t\t// console.log(\"tpl\",tpl);\n\t\tvar template = tpl(tplData) ;\n\t\treturn template ;\n\t}\n})() ;\n\n\n\n/**\nA generic controller to extends\n * @class\n * @memberof! <global>\n * @example\nexport class Calculator extends M_.Controller {\n\tinit() {\n\t}\n\tcreate() {\n\t}\n}\n*/\nM_.Controller = class {\n\t/**\n\t * Generally, you don't need to extend this class. Extend create method.\n\t * @param  {object} opts Configuration object\n\t */\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tcontroller: \"\",\n\t\t\tcontrollerName: \"\",\n\t\t\tcontrollerSrc: null,\n\t\t\tdefaultAction: 'index',\n\t\t\tjEl: null,\n\t\t\ttpl: null,\n\t\t\ttplData: {},\n\t\t\ttplPartials: {},\n\t\t\tmodels: [],\n\t\t\ttemplates: [],\n\t\t\tscripts: []\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t}\n\t/**\n\t * To document\n\t */\n\tinit() {}\n\t/**\n\t * @param  {Function}\n\t */\n\tresolve(next) {\n\t\tnext(true) ;\n\t}\n\t/**\n\t * To document\n\t */\n\trenderTemplate() {\n\t\tif (this.tpl) {\n\t\t\tthis.jEl = M_.App.renderMustacheTo(M_.App.container, this.tpl, this.tplData, this.tplPartials) ;\n\t\t\tthis.jEl.attr(\"id\", \"part_\"+this.controllerName) ;\n\t\t\tthis.jEl.addClass('M_part') ;\n\t\t}\n\t}\n\t/**\n\t * To document\n\t */\n\trender() {}\n\t/**\n\t * To document\n\t */\n\tindexAction() {}\n\t/**\n\t * To document\n\t */\n\tonResize() {}\n\t/**\n\t * To document\n\t */\n\tonExit() {}\n\t/**\n\t * To document\n\t */\n\tonControllerChange() {}\n\t/**\n\t * Extend this method to initialize your UI\n\t */\n\tdoLayout() {}\n\t/**\n\t * This method is called each time the controller is shown.\n\t * @param  {boolean} firstTime True when this function is called for the first time.\n\t */\n\tshow(firstTime) {}\n\n\t_onShow(anim) {\n\t\t// console.log(\"_onShow\");\n\t\t// var args = this._urlArgs.slice(0) ;\n\t\t// args.unshift(firstTime) ;\n\t\t// this.show.apply(this, args) ;\n\t\tM_.App.currentController = this ;\n\t\tthis.onControllerChange() ;\n\n\t\tthis.show.apply(this) ;\n\t\t// console.log(\"_onShow\");\n\t\tthis.jEl\n\t\t// .css('scale', 1)\n\t\t// .css('rotateX',0)\n\t\t// .css('perspective','0px')\n\t\t// .css('rotateY','0deg')\n\t\t.css('transform','rotateY(0deg)')\n\t\t.css('transform','perspective(0)')\n\t\t.css('opacity',1)\n\t\t.css('z-index',2)\n\t\t.show() ;\n\n\t\tif (anim) {\n\t\t\t// console.log(\"anim\");\n\t\t\tthis.jEl\n\t\t\t.css('left', $(window).width())\n\t\t\t.transition({\n\t\t\t\tleft: 0,\n\t\t\t\tdelay: 100\n\t\t\t}, 500, ()=> {\n\t\t\t\t// console.log(\"finit\");\n\t\t\t}) ;\n\t\t} else {\n\t\t\tthis.jEl.css('left', 0) ;\n\t\t}\n\t}\n\t/**\n\t * onShow description\n\t * @param  {Boolean} firstTime [description]\n\t */\n\tonShow(firstTime) {\n\t}\n\t/**\n\t * hide description\n\t */\n\thide() {\n\t\tif (this.jEl) this.jEl.hide() ;\n\t}\n} ;\n\n\n\n\n/**\n * Usefull methods for manipulate date, string, paths, etc...\n * @memberof! <global>\n */\nM_.Utils = class {\n\n\tstatic isEventSupported(eventName) {\n\t\tvar TAGNAMES = {\n\t\t\t'select':'input','change':'input','search':'input',\n\t\t\t'submit':'form','reset':'form',\n\t\t\t'error':'img','load':'img','abort':'img'\n\t\t} ;\n\t\tvar el = document.createElement(TAGNAMES[eventName] || 'div');\n\t\teventName = 'on' + eventName;\n\t\tvar isSupported = (eventName in el);\n\t\tif (!isSupported) {\n\t\t\tel.setAttribute(eventName, 'return;');\n\t\t\tisSupported = typeof el[eventName] == 'function';\n\t\t}\n\t\tel = null;\n\t\treturn isSupported;\n\t}\n\n\tstatic humanFileSizeString(fileSizeInBytes) {\n\n\t    var i = -1;\n\t    var byteUnits = [' kB', ' MB', ' GB', ' TB', 'PB', 'EB', 'ZB', 'YB'];\n\t    do {\n\t        fileSizeInBytes = fileSizeInBytes / 1024;\n\t        i++;\n\t    } while (fileSizeInBytes > 1024);\n\n\t    return Math.max(fileSizeInBytes, 0.1).toFixed(1) + byteUnits[i];\n\t}\n\n\t/**\n\t * Idem as jQuery $.isArray(obj)\n\t * @param  {object}  obj The object to test\n\t * @return {boolean}     True if obj is an array\n\t */\n\tstatic isArray(obj) {\n \t\treturn $.isArray(obj) ;\n \t}\n\n\tstatic get_html_translation_table(table, quote_style) {\n\t  //  discuss at: http://phpjs.org/functions/get_html_translation_table/\n\t  // original by: Philip Peterson\n\t  //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t  // bugfixed by: noname\n\t  // bugfixed by: Alex\n\t  // bugfixed by: Marco\n\t  // bugfixed by: madipta\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  // bugfixed by: T.Wild\n\t  // improved by: KELAN\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: Frank Forte\n\t  //    input by: Ratheous\n\t  //        note: It has been decided that we're not going to add global\n\t  //        note: dependencies to php.js, meaning the constants are not\n\t  //        note: real constants, but strings instead. Integers are also supported if someone\n\t  //        note: chooses to create the constants themselves.\n\t  //   example 1: get_html_translation_table('HTML_SPECIALCHARS');\n\t  //   returns 1: {'\"': '&quot;', '&': '&amp;', '<': '&lt;', '>': '&gt;'}\n\n\t  var entities = {},\n\t    hash_map = {},\n\t    decimal;\n\t  var constMappingTable = {},\n\t    constMappingQuoteStyle = {};\n\t  var useTable = {},\n\t    useQuoteStyle = {};\n\n\t  // Translate arguments\n\t  constMappingTable[0] = 'HTML_SPECIALCHARS';\n\t  constMappingTable[1] = 'HTML_ENTITIES';\n\t  constMappingQuoteStyle[0] = 'ENT_NOQUOTES';\n\t  constMappingQuoteStyle[2] = 'ENT_COMPAT';\n\t  constMappingQuoteStyle[3] = 'ENT_QUOTES';\n\n\t  useTable = !isNaN(table) ? constMappingTable[table] : table ? table.toUpperCase() : 'HTML_SPECIALCHARS';\n\t  useQuoteStyle = !isNaN(quote_style) ? constMappingQuoteStyle[quote_style] : quote_style ? quote_style.toUpperCase() :\n\t    'ENT_COMPAT';\n\n\t  if (useTable !== 'HTML_SPECIALCHARS' && useTable !== 'HTML_ENTITIES') {\n\t    throw new Error('Table: ' + useTable + ' not supported');\n\t    // return false;\n\t  }\n\n\t  entities['38'] = '&amp;';\n\t  if (useTable === 'HTML_ENTITIES') {\n\t    entities['160'] = '&nbsp;';\n\t    entities['161'] = '&iexcl;';\n\t    entities['162'] = '&cent;';\n\t    entities['163'] = '&pound;';\n\t    entities['164'] = '&curren;';\n\t    entities['165'] = '&yen;';\n\t    entities['166'] = '&brvbar;';\n\t    entities['167'] = '&sect;';\n\t    entities['168'] = '&uml;';\n\t    entities['169'] = '&copy;';\n\t    entities['170'] = '&ordf;';\n\t    entities['171'] = '&laquo;';\n\t    entities['172'] = '&not;';\n\t    entities['173'] = '&shy;';\n\t    entities['174'] = '&reg;';\n\t    entities['175'] = '&macr;';\n\t    entities['176'] = '&deg;';\n\t    entities['177'] = '&plusmn;';\n\t    entities['178'] = '&sup2;';\n\t    entities['179'] = '&sup3;';\n\t    entities['180'] = '&acute;';\n\t    entities['181'] = '&micro;';\n\t    entities['182'] = '&para;';\n\t    entities['183'] = '&middot;';\n\t    entities['184'] = '&cedil;';\n\t    entities['185'] = '&sup1;';\n\t    entities['186'] = '&ordm;';\n\t    entities['187'] = '&raquo;';\n\t    entities['188'] = '&frac14;';\n\t    entities['189'] = '&frac12;';\n\t    entities['190'] = '&frac34;';\n\t    entities['191'] = '&iquest;';\n\t    entities['192'] = '&Agrave;';\n\t    entities['193'] = '&Aacute;';\n\t    entities['194'] = '&Acirc;';\n\t    entities['195'] = '&Atilde;';\n\t    entities['196'] = '&Auml;';\n\t    entities['197'] = '&Aring;';\n\t    entities['198'] = '&AElig;';\n\t    entities['199'] = '&Ccedil;';\n\t    entities['200'] = '&Egrave;';\n\t    entities['201'] = '&Eacute;';\n\t    entities['202'] = '&Ecirc;';\n\t    entities['203'] = '&Euml;';\n\t    entities['204'] = '&Igrave;';\n\t    entities['205'] = '&Iacute;';\n\t    entities['206'] = '&Icirc;';\n\t    entities['207'] = '&Iuml;';\n\t    entities['208'] = '&ETH;';\n\t    entities['209'] = '&Ntilde;';\n\t    entities['210'] = '&Ograve;';\n\t    entities['211'] = '&Oacute;';\n\t    entities['212'] = '&Ocirc;';\n\t    entities['213'] = '&Otilde;';\n\t    entities['214'] = '&Ouml;';\n\t    entities['215'] = '&times;';\n\t    entities['216'] = '&Oslash;';\n\t    entities['217'] = '&Ugrave;';\n\t    entities['218'] = '&Uacute;';\n\t    entities['219'] = '&Ucirc;';\n\t    entities['220'] = '&Uuml;';\n\t    entities['221'] = '&Yacute;';\n\t    entities['222'] = '&THORN;';\n\t    entities['223'] = '&szlig;';\n\t    entities['224'] = '&agrave;';\n\t    entities['225'] = '&aacute;';\n\t    entities['226'] = '&acirc;';\n\t    entities['227'] = '&atilde;';\n\t    entities['228'] = '&auml;';\n\t    entities['229'] = '&aring;';\n\t    entities['230'] = '&aelig;';\n\t    entities['231'] = '&ccedil;';\n\t    entities['232'] = '&egrave;';\n\t    entities['233'] = '&eacute;';\n\t    entities['234'] = '&ecirc;';\n\t    entities['235'] = '&euml;';\n\t    entities['236'] = '&igrave;';\n\t    entities['237'] = '&iacute;';\n\t    entities['238'] = '&icirc;';\n\t    entities['239'] = '&iuml;';\n\t    entities['240'] = '&eth;';\n\t    entities['241'] = '&ntilde;';\n\t    entities['242'] = '&ograve;';\n\t    entities['243'] = '&oacute;';\n\t    entities['244'] = '&ocirc;';\n\t    entities['245'] = '&otilde;';\n\t    entities['246'] = '&ouml;';\n\t    entities['247'] = '&divide;';\n\t    entities['248'] = '&oslash;';\n\t    entities['249'] = '&ugrave;';\n\t    entities['250'] = '&uacute;';\n\t    entities['251'] = '&ucirc;';\n\t    entities['252'] = '&uuml;';\n\t    entities['253'] = '&yacute;';\n\t    entities['254'] = '&thorn;';\n\t    entities['255'] = '&yuml;';\n\t  }\n\n\t  if (useQuoteStyle !== 'ENT_NOQUOTES') {\n\t    entities['34'] = '&quot;';\n\t  }\n\t  if (useQuoteStyle === 'ENT_QUOTES') {\n\t    entities['39'] = '&#39;';\n\t  }\n\t  entities['60'] = '&lt;';\n\t  entities['62'] = '&gt;';\n\n\t  // ascii decimals to real symbols\n\t  for (decimal in entities) {\n\t    if (entities.hasOwnProperty(decimal)) {\n\t      hash_map[String.fromCharCode(decimal)] = entities[decimal];\n\t    }\n\t  }\n\n\t  return hash_map;\n\t}\n\n\n\tstatic html_entity_decode(string, quote_style) {\n\t  //  discuss at: http://phpjs.org/functions/html_entity_decode/\n\t  // original by: john (http://www.jd-tech.net)\n\t  //    input by: ger\n\t  //    input by: Ratheous\n\t  //    input by: Nick Kolosov (http://sammy.ru)\n\t  // improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t  // improved by: marc andreu\n\t  //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t  //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t  // bugfixed by: Onno Marsman\n\t  // bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t  // bugfixed by: Fox\n\t  //  depends on: get_html_translation_table\n\t  //   example 1: html_entity_decode('Kevin &amp; van Zonneveld');\n\t  //   returns 1: 'Kevin & van Zonneveld'\n\t  //   example 2: html_entity_decode('&amp;lt;');\n\t  //   returns 2: '&lt;'\n\n\t  var hash_map = {},\n\t    symbol = '',\n\t    tmp_str = '',\n\t    entity = '';\n\t  tmp_str = string.toString();\n\n\t  if (false === (hash_map = this.get_html_translation_table('HTML_ENTITIES', quote_style))) {\n\t    return false;\n\t  }\n\n\t  // fix &amp; problem\n\t  // http://phpjs.org/functions/get_html_translation_table:416#comment_97660\n\t  delete(hash_map['&']);\n\t  hash_map['&'] = '&amp;';\n\n\t  for (symbol in hash_map) {\n\t    entity = hash_map[symbol];\n\t    tmp_str = tmp_str.split(entity)\n\t      .join(symbol);\n\t  }\n\t  tmp_str = tmp_str.split('&#039;')\n\t    .join(\"'\");\n\n\t  return tmp_str;\n\t}\n\n\n\tstatic getIframeDocument(jEl) {\n\t\tvar iframeDoc = jEl.get(0).contentWindow || jEl.get(0).contentDocument;\n\t\tif (iframeDoc.document) {\n\t\t\tiframeDoc = iframeDoc.document;\n\t\t}\n\t\treturn iframeDoc ;\n\t}\n\n\t// static generateAndDownloadFile(urlGenerate, urlDownload, args={}) {\n\t// \tvar defaults = \t{\n\t// \t\tmethodGenerate: 'POST',\n\t// \t\tmethodDownload: 'POST',\n\t// \t\targsGenerate: {},\n\t// \t\targsDownload: {},\n\t// \t};\n\t// \tvar myargs = $.extend({}, defaults, args) ;\n\t// \tthis.ajaxJson(urlGenerate, myargs.argsGenerate, myargs.methodDownload, (data)=> {\n\t//\n\t// \t}\n\t// \tthis.downloadFile(urlDownload, myargs.argsDownload, myargs.methodDownload) ;\n\t// }\n\tstatic downloadFile(url, args={}, method='POST') {\n\t\t$(\"#M_FileDownload\").remove() ;\n\t\t$(document.body).append(\"<iframe id='M_FileDownload' src='about:blank' style='display:none;'></iframe>\") ;\n\t\tvar html = \"\" ;\n\t\t_.each(args, (val, key)=> {\n\t\t\thtml += `<input type=\"hidden\" name=\"${key}\" value=\"${val}\">` ;\n\t\t}) ;\n\t\tvar doc = this.getIframeDocument($(\"#M_FileDownload\")) ;\n\t\t// console.log(\"html\", html);\n\t\tdoc.write(\"<html><head></head><body><form method='\" + method + \"' action='\" + url + \"'>\" + html + \"</form></body></html>\");\n\t\tvar started = false ;\n\t\t$(doc).find('form').submit() ;\n\n\t}\n\tstatic downloadFile2(url, args={}, method='POST') {\n\t\t$(\"#M_FileDownload\").remove() ;\n\t\t$(document.body).append(\"<iframe id='M_FileDownload' src='\"+url+\"' style='display:block; width:100%; height:200px;'></iframe>\") ;\n\t\twindow.setTimeout(()=> {\n\t\t\tvar doc = this.getIframeDocument($(\"#M_FileDownload\")) ;\n\t\t\tvar toto = doc.toString() ;\n\t\t\t// console.log(\"doc.window\", doc);\n\t\t\t// var txt = $(doc).html() ;\n\t\t\t// console.log(\"txt\", txt, JSON.parse(txt));\n\t\t}, 2000) ;\n\t}\n\n\tstatic urlIze(str) {\n\t\tstr = M_.Utils.trim(str) ;\n\t\tif (str.substring(0,7)=='http://') return str ;\n\t\treturn \"http://\"+str ;\n\t}\n\n\tstatic limitText(str, n, useWordBoundary) {\n\t\tvar toLong = str.length>n,\n\t\t\ts_ = toLong ? str.substr(0,n-1) : this ;\n\t\ts_ = useWordBoundary && toLong ? s_.substr(0,s_.lastIndexOf(' ')) : s_ ;\n\t\treturn  toLong ? s_ + '&hellip;' : s_ ;\n\t}\n\t/**\n\t * toggleAppFullScreen description\n\t * @return {Boolean} true if actually passed in full screen (after function executed)\n\t */\n\tstatic toggleAppFullScreen() {\n\t\tvar element = document.body;\n\t\t$(document.body).css('width', '100%') ;\n\t\tif (!M_.Utils._appIsFullScreen) {\n\t\t\tvar requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullscreen ;\n\t\t\tif (requestMethod) {\n\t\t\t\trequestMethod.call(element);\n\t\t\t} else if (typeof window.ActiveXObject !== \"undefined\") { // Older IE.\n\t\t\t\tvar wscript = new window.ActiveXObject(\"WScript.Shell\");\n\t\t\t\tif (wscript !== null) {\n\t\t\t\t\twscript.SendKeys(\"{F11}\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif(document.exitFullscreen) {\n\t\t\t\tdocument.exitFullscreen();\n\t\t\t} else if(document.mozCancelFullScreen) {\n\t\t\t\tdocument.mozCancelFullScreen();\n\t\t\t} else if(document.webkitExitFullscreen) {\n\t\t\t\tdocument.webkitExitFullscreen();\n\t\t\t}\n\t\t}\n\t\tM_.Utils._appIsFullScreen = !M_.Utils._appIsFullScreen ;\n\t}\n\n\t/**\n\t * Return moment object\n\t * @return {boolean}     True if obj is an array\n\t */\n\tstatic moment() {\n\t\treturn moment ;\n\t}\n\t/**\n\t * Idem as jQuery $.isFunction()\n\t * @param  {object}  obj The object to test\n\t * @return {boolean}     True if obj is an function\n\t */\n\tstatic isFunction(obj) {\n\t\treturn $.isFunction(obj) ;\n\t}\n\t/**\n\t * Idem as jQuery $.isEmptyObject()\n\t * @param  {object}  obj The object to test\n\t * @return {boolean}     True if obj is {}\n\t */\n\tstatic isEmptyObject(obj) {\n\t\treturn $.isEmptyObject(obj) ;\n\t}\n\n\n\t/**\n\t * Check if d is a moment date\n\t * @param  {moment}  obj The object to test\n\t * @return {boolean}     True if obj is {}\n\t */\n\tstatic isDate(d) {\n\t\tif (moment(d).isValid()) return true ;\n\t\treturn false ;\n\t}\n\n\t/**\n\t * Return the extension of a path.\n\t * @param  {String} path The path\n\t * @return {String}      The extension or ''\n\t * @example\n\t * var ext = M_.Utils.getExtensionFromPath(\"foo/bar/my_file.html\") ;\n\t * // ext = \"html\"\n\t */\n\tstatic getExtensionFromPath(path) {\n\t\treturn path.split('.').pop() ;\n\t}\n\n\t/**\n\t * Return the base name of a path.\n\t * @param  {String} path The path\n\t * @return {String}      The name of the file\n\t * @example\n\t * var filename = getBaseNameFromPath(\"foo/bar/myfile.html\") ;\n\t * // filename = \"myfile.html\"\n\t */\n\tstatic getBaseNameFromPath(path) {\n\t\treturn path.split('/').pop() ;\n\t}\n\n\t/**\n\t * Return the directory of a path.\n\t * @param  {String} path The path\n\t * @return {String}      The name of the file\n\t * @example\n\t * var filename = getDirFromPath(\"foo/bar/myfile.html\") ;\n\t * // filename = \"foo/bar\"\n\t */\n\tstatic getDirFromPath(path) {\n\t\tvar tabPaths = path.split('/') ;\n\t\ttabPaths.pop() ;\n\t\treturn tabPaths.join('/') ;\n\t}\n\t/**\n\t * Convert hexadecimal to RGB\n\t * @param  {number} hex Number to convert\n\t * @return {object}     Object contain keys : r, g, b ; {r:x, g:y, b:z}\n\t */\n\tstatic hexToRgb(hex) {\n\t\t//Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t\thex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t\t\treturn r + r + g + g + b + b;\n\t\t});\n\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result ? {\n\t\t\tr: parseInt(result[1], 16),\n\t\t\tg: parseInt(result[2], 16),\n\t\t\tb: parseInt(result[3], 16)\n\t\t} : null;\n\t}\n\t/**\n\t * Convert RGB to Hexa\n\t * @param  {number} r Red\n\t * @param  {integer} g Green\n\t * @param  {integer} b Blue\n\t * @return {number}   Number of hexadecimal\n\t */\n\tstatic rgbToHex(r, g, b) {\n\t\treturn \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n\t}\n\t/**\n\t * Convert RGB from css (like #FFFFFF) to Hexa\n\t * @param  {number} rgb\n\t * @return {number}   Object contain keys : r, g, b ; {r:x, g:y, b:z}\n\t */\n\tstatic rgbFromCssToHex(rgb) {\n\t\tif (rgb.indexOf('#')===0) return rgb ;\n\t\tif (rgb.indexOf('rgb')===0) {\n\t\t\trgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/i);\n\t\t\treturn \"#\" +\n\t\t\t\t(\"0\" + parseInt(rgb[1],10).toString(16)).slice(-2) +\n\t\t\t\t(\"0\" + parseInt(rgb[2],10).toString(16)).slice(-2) +\n\t\t\t\t(\"0\" + parseInt(rgb[3],10).toString(16)).slice(-2);\n\t\t}\n\t}\n\t/**\n\t * Return a uniq ID\n\t * @return {String} A incremental number start from 1\n\t */\n\tstatic id() {\n\t\tif (!this.cmpUniqId) this.cmpUniqId = 0 ;\n\t\tthis.cmpUniqId++ ;\n\t\treturn \"_M_el_\"+this.cmpUniqId ;\n\t}\n\n\t/**\n\t * Don't use that...\n\t */\n\tstatic removeEventsNotAttachedToDocument() {\n\t\twindow.setTimeout(()=> {\n\t\t\t// log(\"go\")\n\t\t\tvar tab = $._data(document, \"events\").click ;\n\t\t\t// log(\"tab\",tab)\n\t\t\tif (!tab) return ;\n\t\t\tvar nb = 0 ;\n\t\t\tvar tabToRemove = [] ;\n\t\t\tfor(var i=0 ; i<tab.length ; i++) {\n\t\t\t\tif (tab[i].selector && $(tab[i].selector).length===0 && tab[i].selector.substring(0,7)==\"#_M_el_\") {\n\t\t\t\t\tnb++ ;\n\t\t\t\t\ttabToRemove.push(tab[i].selector) ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// log(\"tabToRemove\",tabToRemove)\n\t\t\tfor(i=0 ; i<tabToRemove.length ; i++) {\n\t\t\t\t$(document).off('click', tabToRemove[i]) ;\n\t\t\t}\n\t\t\t// log(\"nb\", nb) ;\n\t\t}, 500) ;\n\t}\n\t/**\n\t * Set the z-index upper\n\t * @param {jQuery} jEl jQuery object\n\t */\n\tstatic setZIndexForModal(jEl) {\n\t\tthis._cmptZIndexModal += 10 ;\n\t\tjEl.css('z-index',this._cmptZIndexModal) ;\n\t\t$(\".modal-backdrop\").last().css(\"z-index\",this._cmptZIndexModal-1) ;\n\t}\n\t// static getMaxZIndex() {\n\t// \tvar heighest = -999 ;\n\t// \t$(\"*\").each(function() {\n\t// \t\tvar current = parseInt($(this).css(\"z-index\"), 10);\n\t// \t\theighest = Math.max(current, heighest) ;\n\t// \t});\n\t// \tif (heighest==-999) heighest = 0 ;\n\t// \treturn heighest ;\n\t// }\n\n\t/**\n\t * Clone an object... simple level !!!!\n\t * @param  {object} obj\n\t * @return {object} the new object\n\t */\n\tstatic clone(obj) {\n\t\tvar target = {};\n\t\tfor (var i in obj) {\n\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\ttarget[i] = obj[i];\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t}\n\t/**\n\t * Create a UUID with a random algorithme\n\t * @return {String} The number is like 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n\t */\n\tstatic createUUID() {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t\t\tvar r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n\n\t/**\n\t * Clone an object... simple level !!!!\n\t * @param  {object} nb\n\t * @param  {object} singular\n\t * @param  {object} plural\n\t * @return {object} singular\n\t * @example\nvar plural1 = M_.Utils.plural(3, \"guitare\")\n// plural1 = guitares\nvar plural2 = M_.Utils.plural(3, \"guitare\", \"guitarez\")\n// plural2 = guitarez\nvar plural3 = M_.Utils.plural(3, \"une guitare\", \"une des {nb} guitares\")\n// plural3 = une des 3 guitares\n\t */\n\tstatic plural(nb, singular, plural=null, withoutnumber=false) {\n\n\t\tif (nb<=1 && nb>=-1) {\n\t\t\tif (singular.indexOf('{{nb}}')>=0) {\n\t\t\t\treturn singular.replace(/\\{\\{nb\\}\\}/, nb) ;\n\t\t\t}\n\t\t\tif (withoutnumber) return singular ;\n\t\t\treturn nb+\" \"+singular ;\n\t\t}\n\t\tif (!plural) plural = singular+\"s\" ;\n\t\tif (plural.indexOf('{{nb}}')>=0) {\n\t\t\treturn plural.replace(/\\{\\{nb\\}\\}/, nb) ;\n\t\t}\n\t\tif (withoutnumber) return plural ;\n\t\treturn nb+\"&nbsp;\"+plural ;\n\t}\n\t/**\n\t * Create a delay\n\t * @param  {function} callback - une fonction  appeler\n\t * @param  {number} time - un temp en millisecondes\n\t * @param  {String} [arbitralName=\"arbitralName\"] - donner de prfrence un nom unique\n\t */\n\tstatic delay(callback, time, arbitralName=\"arbitralName\") {\n\t\tif (!this.tabDelay) this.tabDelay = {} ;\n\t\tif (arbitralName===\"\") arbitralName = \"arbitralName\" ;\n\t\tif (this.tabDelay[arbitralName]) window.clearTimeout(this.tabDelay[arbitralName]) ;\n\t\tthis.tabDelay[arbitralName] = window.setTimeout(()=> {\n\t\t\t//log(\"callback\")\n\t\t\tcallback() ;\n\t\t}, time) ;\n\t}\n\t/**\n\t * Check if variable is empty : [], undef, null, false, 0, \"\", \"0\", \"undefined\", undefined\n\t * @param  {object} obj\n\t * @return {boolean} true if empty\n\t */\n\tstatic isEmpty(obj) {\n\t\tvar undef, key, i, len;\n\t\tvar emptyValues = [undef, null, false, 0, \"\", \"0\", \"undefined\", undefined];\n\n\t\tif ($.type(obj) === \"date\") return false ;\n\n\t\tfor (i = 0, len = emptyValues.length; i < len; i++) {\n\t\t\tif (obj === emptyValues[i] || obj==emptyValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tif (typeof obj === \"object\") {\n\t\t\tfor (key in obj) {\n\t\t\t\t//TODO: should we check for own properties only?\n\t\t\t\t//if (obj.hasOwnProperty(key)) {\n\t\t\t\treturn false;\n\t\t\t\t//}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t/**\n\t * Format a phone number... for french format !!! to update...\n\t * @param  {String} num\n\t * @return {String} the formated number\n\t */\n\tstatic formatPhone(num) {\n\t\tvar ret = \"\" ;\n\t\tvar toAdd = \"\" ;\n\t\t//$phone_number = preg_replace(\"/[^\\+0-9]/\", \"\", $phone_number);\n\t\tnum = num.replace(/[^\\+0-9]/g, '');\n\t\tif (num.substring(0,1)==\"+\") {\n\t\t\ttoAdd = num.substr(0,3)+\" \" ;\n\t\t\tnum = num.substr(3) ;\n\t\t}\n\t\tfor(let kk=0 ; kk<num.length ; kk++) {\n\t\t\tif (kk%2===0) ret = ' '+ret ;\n\t\t\tret = num.substr(num.length-kk-1, 1)+ret ;\n\t\t}\n\t\treturn toAdd+ret.trim() ;\n\t}\n\tstatic alphaNum(str) {\n\t\tif (!str) return \"\" ;\n\t\tvar reg1 = /[^\\+0-9]/g ;\n\t\tstr = str.replace(reg1,'') ;\n\t\treturn str ;\n\t}\n\t/**\n\t * Strip html tags\n\t * @param  {String} num\n\t * @param  {String} allowed\n\t * @return {String} the new string\n\t */\n\tstatic strip_tags(input, allowed) {\n\t\t//From: http://phpjs.org/functions\n\t\tif (!input) return \"\" ;\n\t\tallowed = (((allowed || \"\") + \"\").toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n\t\tvar tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi,\n\t\tcommentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\n\t\treturn input.replace(commentsAndPhpTags, '').replace(tags, function ($0, $1) {\n\t\t\treturn allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n\t\t});\n\t}\n\t/**\n\t * First char to upper case\n\t * @param  {String} str\n\t * @return {String} the new string\n\t */\n\tstatic ucfirst(str) {\n\t\t//  discuss at: http://phpjs.org/functions/ucfirst/\n\t\t// original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// bugfixed by: Onno Marsman\n\t\t// improved by: Brett Zamir (http://brett-zamir.me)\n\t\t//   example 1: ucfirst('kevin van zonneveld');\n\t\t//   returns 1: 'Kevin van zonneveld'\n\n\t\tstr += '';\n\t\tstr = str.toLowerCase() ;\n\t\tvar f = str.charAt(0).toUpperCase();\n\t\treturn f + str.substr(1);\n\t}\n\n\t/**\n\t * First char to upper case\n\t * @param  {String} str - the base string\n\t * @param  {number} len - add 'padStr' X times\n\t * @param  {String} [padStr='0'] - the string to add\n\t * @param  {number} [direction=-1] - -1=left, 1=right\n\t * @return {String} the new string\n\t */\n\tstatic str_pad(str, len, padStr='0', direction=-1) {\n\t\tstr += \"\" ;\n\t\tvar res = \"\" ;\n\t\t//warning if len<str.length\n\t\tif (direction<0) str = str.split(\"\").reverse().join(\"\") ;\n\t\tfor(var i=0; i<len ; i++) {\n\t\t\tvar c = str.charAt(i) ;\n\t\t\tif (c==='') res += padStr ;\n\t\t\tres += str.charAt(i) ;\n\t\t}\n\t\tif (direction<0) res = res.split(\"\").reverse().join(\"\") ;\n\t\treturn res ;\n\t}\n\t/**\n\t * Remove break line, space and tabulation\n\t * @param  {String} str - the base string\n\t * @return {String} the new string\n\t */\n\tstatic trim(str) {\n\t\t//return str.replace(/^\\s+|\\s+$/g, '');\n\t\tstr = $.trim(str) ;\n\t\tstr = str.replace(/^(\\n\\r)+|(\\n\\r)+$/g, '') ;\n\t\treturn str ;\n\t}\n\t/**\n\t * Set cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @param  {String} cvalue - the value of the cookie\n\t * @param  {String} [expireDays=7] - expiration in days\n\t */\n\tstatic setCookie(cname, cvalue, expireDays=7) {\n\t\tvar d = new Date();\n\t\td.setTime(d.getTime() + (expireDays*24*60*60*1000));\n\t\tvar expires = \"expires=\"+d.toGMTString();\n\t\tdocument.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic getCookie(cname) {\n\t\tvar name = cname + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor(var i=0; i<ca.length; i++) {\n\t\t\tvar c = ca[i].trim();\n\t\t\tif (c.indexOf(name) === 0) return c.substring(name.length,c.length);\n\t\t}\n\t\treturn null;\n\t}\n\t/**\n\t * Check if browser is on macos\n\t * @return {boolean} true if ok\n\t */\n\tstatic isMacos() {\n\t\tvar isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0;\n\t\treturn isMac ;\n\t}\n\tstatic valInArray(tab, key, keyName='key', valName='val') {\n\t\tvar f = this.findInArray(tab, key, keyName) ;\n\t\tif (f) return _.result(f, valName) ;\n\t\telse return \"\" ;\n\t}\n\tstatic findInArray(tab, key, keyName='key') {\n\t\tvar obj = {} ;\n\t\tobj[keyName] = key ;\n\t\tvar f = _.find(tab, obj) ;\n\t\t// console.log(\"f\", f);\n\t\treturn f ;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic getFromSimpleArray(tab, what) {\n\t\tfor(var i2=0 ; i2<tab.length ; i2++) {\n\t\t\tif (tab[i2][0]==what) return tab[i2][1] ;\n\t\t}\n\t\treturn \"\" ;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic getSimpleArray(tab, index, what) {\n\t\tvar pos = this.searchSimpleArray(tab, index, what) ;\n\t\tif (pos>=0) return tab[pos] ;\n\t\treturn null ;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic searchSimpleArray(tab, index, what) {\n\t\tfor(var i2=0 ; i2<tab.length ; i2++) {\n\t\t\tif (tab[i2][index]==what) return i2 ;\n\t\t}\n\t\treturn -1 ;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic searchArrayObjects(tab, what, val) {\n\t\tfor(var i2=0 ; i2<tab.length ; i2++) {\n\t\t\tif (tab[i2][what]==val) return i2 ;\n\t\t}\n\t\treturn -1 ;\n\t}\n\t/**\n\t * Get cookie\n\t * @param  {String} cname - the name of the cookie\n\t * @return {String} the value of the cookie\n\t */\n\tstatic getFromArrayObjects(tab, what, val) {\n\t\tfor(var i2=0 ; i2<tab.length ; i2++) {\n\t\t\tif (tab[i2][what]==val) return tab[i2] ;\n\t\t}\n\t\treturn null ;\n\t}\n\t/**\n\t * To document\n\t */\n\tstatic inArray(needle, haystack) {\n\t\tvar length = haystack.length;\n\t\tfor(var i = 0; i < length; i++) {\n\t\t\tif(haystack[i] == needle) return true;\n\t\t}\n\t\treturn false;\n\t}\n\t/**\n\t * To document\n\t * @param  {String}  str      the string to convert\n\t * @param  {Boolean} is_xhtml [description]\n\t * @return {String}           modified string\n\t */\n\tstatic nl2br(str, is_xhtml) {\n\t\tvar breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br ' + '/>' : '<br>'; //Adjust comment to avoid issue on phpjs.org display\n\n\t\treturn (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n\t}\n\t/**\n\t * replaceCommaWithPoint description\n\t * @param  {String} txt\n\t * @return {String}\n\t */\n\tstatic replaceCommaWithPoint(txt) {\n\t\ttxt += \"\" ;\n\t\t/*if (typeof(txt)==\"string\" ) {\n\t\t\tif (txt.indexOf(\",\")>=0) {\n\t\t\t\tvar txt1 = txt.substring(0,txt.indexOf(\",\"))\t;\n\t\t\t\tvar txt2 = txt.substring(txt.indexOf(\",\")+1,txt.length)\t;\n\t\t\t\treturn txt1+\".\"+txt2 ;\n\t\t\t}\n\t\t}\n\t\t*/\n\t\tvar exp = new RegExp(\",\",\"g\") ;\n\t\treturn txt.replace(exp, '.') ;\n\t}\n\t/**\n\t * Like PHP function\n\t * @param  {Array} tab\n\t * @param  {String} field\n\t * @return {Boolean}       true if is set\n\t */\n\tstatic isset(tab, field) {\n\t\tif (typeof tab[field] != 'undefined') return true ;\n\t\treturn false ;\n\t}\n\t/**\n\t * Like PHP function\n\t * @param  {String} path\n\t * @param  {String} options\n\t * @return {String}\n\t */\n\tstatic pathinfo(path, options) {\n\t  //  discuss at: http://phpjs.org/functions/pathinfo/\n\t  // original by: Nate\n\t  //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t  // improved by: Brett Zamir (http://brett-zamir.me)\n\t  //    input by: Timo\n\t  //        note: Inspired by actual PHP source: php5-5.2.6/ext/standard/string.c line #1559\n\t  //        note: The way the bitwise arguments are handled allows for greater flexibility\n\t  //        note: & compatability. We might even standardize this code and use a similar approach for\n\t  //        note: other bitwise PHP functions\n\t  //        note: php.js tries very hard to stay away from a core.js file with global dependencies, because we like\n\t  //        note: that you can just take a couple of functions and be on your way.\n\t  //        note: But by way we implemented this function, if you want you can still declare the PATHINFO_*\n\t  //        note: yourself, and then you can use: pathinfo('/www/index.html', PATHINFO_BASENAME | PATHINFO_EXTENSION);\n\t  //        note: which makes it fully compliant with PHP syntax.\n\t  //  depends on: basename\n\t  //   example 1: pathinfo('/www/htdocs/index.html', 1);\n\t  //   returns 1: '/www/htdocs'\n\t  //   example 2: pathinfo('/www/htdocs/index.html', 'PATHINFO_BASENAME');\n\t  //   returns 2: 'index.html'\n\t  //   example 3: pathinfo('/www/htdocs/index.html', 'PATHINFO_EXTENSION');\n\t  //   returns 3: 'html'\n\t  //   example 4: pathinfo('/www/htdocs/index.html', 'PATHINFO_FILENAME');\n\t  //   returns 4: 'index'\n\t  //   example 5: pathinfo('/www/htdocs/index.html', 2 | 4);\n\t  //   returns 5: {basename: 'index.html', extension: 'html'}\n\t  //   example 6: pathinfo('/www/htdocs/index.html', 'PATHINFO_ALL');\n\t  //   returns 6: {dirname: '/www/htdocs', basename: 'index.html', extension: 'html', filename: 'index'}\n\t  //   example 7: pathinfo('/www/htdocs/index.html');\n\t  //   returns 7: {dirname: '/www/htdocs', basename: 'index.html', extension: 'html', filename: 'index'}\n\n\t  var opt = '',\n\t    optName = '',\n\t    optTemp = 0,\n\t    tmp_arr = {},\n\t    cnt = 0,\n\t    i = 0;\n\t  var have_basename = false,\n\t    have_extension = false,\n\t    have_filename = false;\n\n\t  // Input defaulting & sanitation\n\t  if (!path) {\n\t    return false;\n\t  }\n\t  if (!options) {\n\t    options = 'PATHINFO_ALL';\n\t  }\n\n\t  // Initialize binary arguments. Both the string & integer (constant) input is\n\t  // allowed\n\t  var OPTS = {\n\t    'PATHINFO_DIRNAME': 1,\n\t    'PATHINFO_BASENAME': 2,\n\t    'PATHINFO_EXTENSION': 4,\n\t    'PATHINFO_FILENAME': 8,\n\t    'PATHINFO_ALL': 0\n\t  };\n\t  // PATHINFO_ALL sums up all previously defined PATHINFOs (could just pre-calculate)\n\t  for (optName in OPTS) {\n\t    OPTS.PATHINFO_ALL = OPTS.PATHINFO_ALL | OPTS[optName];\n\t  }\n\t  if (typeof options !== 'number') { // Allow for a single string or an array of string flags\n\t    options = [].concat(options);\n\t    for (i = 0; i < options.length; i++) {\n\t      // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4\n\t      if (OPTS[options[i]]) {\n\t        optTemp = optTemp | OPTS[options[i]];\n\t      }\n\t    }\n\t    options = optTemp;\n\t  }\n\n\t  // Internal Functions\n\t  var __getExt = function(path) {\n\t    var str = path + '';\n\t    var dotP = str.lastIndexOf('.') + 1;\n\t    return !dotP ? false : dotP !== str.length ? str.substr(dotP) : '';\n\t  };\n\n\t  // Gather path infos\n\t  if (options & OPTS.PATHINFO_DIRNAME) {\n\t    var dirName = path.replace(/\\\\/g, '/')\n\t      .replace(/\\/[^\\/]*\\/?$/, ''); // dirname\n\t    tmp_arr.dirname = dirName === path ? '.' : dirName;\n\t  }\n\n\t  if (options & OPTS.PATHINFO_BASENAME) {\n\t    if (false === have_basename) {\n\t      have_basename = this.basename(path);\n\t    }\n\t    tmp_arr.basename = have_basename;\n\t  }\n\n\t  if (options & OPTS.PATHINFO_EXTENSION) {\n\t    if (false === have_basename) {\n\t      have_basename = this.basename(path);\n\t    }\n\t    if (false === have_extension) {\n\t      have_extension = __getExt(have_basename);\n\t    }\n\t    if (false !== have_extension) {\n\t      tmp_arr.extension = have_extension;\n\t    }\n\t  }\n\n\t  if (options & OPTS.PATHINFO_FILENAME) {\n\t    if (false === have_basename) {\n\t      have_basename = this.basename(path);\n\t    }\n\t    if (false === have_extension) {\n\t      have_extension = __getExt(have_basename);\n\t    }\n\t    if (false === have_filename) {\n\t      have_filename = have_basename.slice(0, have_basename.length - (have_extension ? have_extension.length + 1 :\n\t        have_extension === false ? 0 : 1));\n\t    }\n\n\t    tmp_arr.filename = have_filename;\n\t  }\n\n\t  // If array contains only 1 element: return string\n\t  cnt = 0;\n\t  for (opt in tmp_arr) {\n\t    cnt++;\n\t  }\n\t  if (cnt == 1) {\n\t    return tmp_arr[opt];\n\t  }\n\n\t  // Return full-blown array\n\t  return tmp_arr;\n\t}\n\t/**\n\t * Format a number with good decimal and add devise\n\t * @param  {Number} nb\n\t * @param  {Number} decimal\n\t * @param  {String} devise\n\t * @return {String}\n\t */\n\tstatic formatPrice(nb, decimal=2, devise=M_.i18n.devise) {\n\t\treturn this.price(nb, decimal, devise);\n\t}\n\t/**\n\t * Alias of formatPrice\n\t * @param  {Number} nb\n\t * @param  {Number} decimal\n\t * @param  {String} devise\n\t * @return {String}\n\t */\n\t static price(nb, decimal=2, devise=M_.i18n.devise, sep=' ') {\n \t\treturn this.number_format(nb, decimal, \",\", \".\")+sep+devise ;\n \t}\n\tstatic shortPrice(nb, devise=M_.i18n.devise, sep=' ') {\n\t\tvar res = '' ;\n\t\tif (nb<1000) res += Math.round(nb)+'' ;\n\t\telse if (nb<1000000) res += Math.round(nb/1000)+'K' ;\n\t\telse res += Math.round(nb/1000000)+'M' ;\n\t\treturn res+sep+devise ;\n\t}\n\t/**\n\t * Format number in %\n\t * @param  {Number} nb\n\t * @param  {Number} decimal\n\t * @return {String}\n\t */\n\tstatic purcent(nb, decimal=2, sep=' ') {\n\t\treturn this.number_format(nb, decimal, \",\", \".\")+sep+\"%\" ;\n\t}\n\t/**\n\t * Like PHP function\n\t * @param  {Number} a\n\t * @param  {Number} b Number of decimal\n\t * @param  {String} c decimal separator\n\t * @param  {String} d thousen separator\n\t * @return {String}   this formated number\n\t */\n\tstatic number_format(a, b, c, d) {\n\t\tvar i, e, f, g, h ;\n\t\ta = Number(a) ;\n\t\ta = Math.round(a * Math.pow(10, b)) / Math.pow(10, b);\n\t\te = a + '';\n\t\tf = e.split('.');\n\t\tif(!f[0]) f[0] = '0';\n\t\tif(!f[1]) f[1] = '';\n\t\tif(f[1].length < b){\n\t\t\tg = f[1];\n\t\t\tfor(i = f[1].length + 1; i <= b; i++) {\n\t\t\t\tg += '0';\n\t\t\t}\n\t\t\tf[1] = g;\n\t\t}\n\t\tif(d !== '' && f[0].length > 3) {\n\t\t\th = f[0];\n\t\t\tf[0] = '';\n\t\t\tfor(var j = 3; j < h.length; j += 3) {\n\t\t\t\ti = h.slice(h.length - j, h.length - j + 3);\n\t\t\t\tf[0] = d + i +\tf[0] + '';\n\t\t\t}\n\t\t\tj = h.substr(0, (h.length % 3 === 0) ? 3 : (h.length % 3));\n\t\t\tf[0] = j + f[0];\n\t\t}\n\t\tc = (b <= 0) ? '': c;\n\t\treturn f[0] + c + f[1];\n\t}\n\t/**\n\t * Text selection in HTML input field\n\t * @param {jQuery} jEl\n\t * @param {Number} start from which char\n\t * @param {Number} stop  to which char\n\t */\n\tstatic setSelectionRange(jEl, start=0, stop=0) {\n\t\tif (jEl instanceof $) jEl = jEl[0] ;\n\t\tif (jEl.childNodes.length) {\n\t\t\t// log(\"jEl.childNodes[0]\",jEl.childNodes[0])\n\t\t\tvar range = document.createRange();\n\t\t\tvar sel = window.getSelection();\n\t\t\trange.setStart(jEl.childNodes[0], start);\n\t\t\trange.collapse(true);\n\t\t\tif (stop>0) range.setEnd(jEl.childNodes[0], stop);\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t}\n\t\t// log(\"range\",range)\n\t}\n\t/**\n\t * Return the upper z-index\n\t * @param  {jQuery} [selectorLimit]\n\t * @return {number}\n\t */\n\tstatic getMaxZIndex(selectorLimit=null) {\n\t\tvar max = 0 ;\n\t\t$(selectorLimit || \"*\").each((index, el)=> {\n\t\t\tvar jEl = $(el) ;\n\t\t\tif (el.id=='M_Help') return true ;\n\t\t\tvar zindex = parseInt(jEl.css(\"z-index\"), 10) || 0 ;\n\t\t\tmax = Math.max(max, zindex) ;\n\t\t}) ;\n\t\t// log(\"max\",max)\n\t\treturn max ;\n\t}\n\t/**\n\t * Get max z-index + 10\n\t * @param  {Number} [increment] number to increment\n\t * @return {number}           next z-index\n\t */\n\tstatic getNextZIndex(increment=10) {\n\t\treturn this.getMaxZIndex()+increment ;\n\t}\n\t/**\n\t * Get default speed limit\n\t * @return {Number} number of milliseconds\n\t */\n\tstatic getSpeedAnim() {\n\t\treturn 500 ;\n\t}\n\t/**\n\t * Display smoothly an element\n\t * @param  {jQuery}   jEl the element\n\t * @param  {Function} cb  callback function after finished animation\n\t */\n\tstatic showSmoothly(jEl, cb) {\n\t\tif (jEl.is(':hidden')) jEl.css('opacity',0).show().transition({opacity:1}, this.getSpeedAnim(), ()=> {\n\t\t\tif (cb) cb() ;\n\t\t}) ;\n\t\telse if (cb) cb() ;\n\t}\n\t/**\n\t * Hide smoothly an element\n\t * @param  {jQuery}   jEl the element\n\t * @param  {Function} cb  callback function after finished animation\n\t */\n\tstatic hideSmoothly(jEl, cb) {\n\t\tif (jEl.is(':visible')) jEl.css('opacity',1).transition({opacity:0}, this.getSpeedAnim(), ()=> {\n\t\t\tjEl.hide() ;\n\t\t\tif (cb) cb() ;\n\t\t}) ;\n\t\telse if (cb) cb() ;\n\t}\n\t/**\n\t * Do a POST of json data\n\t * @param  {String}   url  the url to call\n\t * @param  {object}   args arguments to send\n\t * @param  {Function} cb   callback function with \"data\" argument\n\t * @return {jqXHR}\n\t */\n\tstatic postJson(url, args, cb) {\n\t\treturn this.ajaxJson(url, args, 'POST', cb) ;\n\t}\n\t/**\n\t * Do a PUT of json data\n\t * @param  {String}   url  the url to call\n\t * @param  {object}   args arguments to send\n\t * @param  {Function} cb   callback function with \"data\" argument\n\t * @return {jqXHR}\n\t */\n\tstatic putJson(url, args, cb) {\n\t\treturn this.ajaxJson(url, args, 'PUT', cb) ;\n\t}\n\t/**\n\t * Do a GET of json data\n\t * @param  {String}   url  the url to call\n\t * @param  {object}   args arguments to send\n\t * @param  {Function} cb   callback function with \"data\" argument\n\t * @return {jqXHR}\n\t */\n\tstatic getJson(url, args, cb) {\n\t\treturn this.ajaxJson(url, args, 'GET', cb) ;\n\t}\n\t/**\n\t * Do a DELETE of json data\n\t * @param  {String}   url  the url to call\n\t * @param  {object}   args arguments to send\n\t * @param  {Function} cb   callback function with \"data\" argument\n\t * @return {jqXHR}\n\t */\n\tstatic deleteJson(url, args, cb) {\n\t\treturn this.ajaxJson(url, args, 'DELETE', cb) ;\n\t}\n\t/**\n\t * Do a Ajax call of json data\n\t * @param  {String}   url  the url to call\n\t * @param  {object}   args arguments to send\n\t * @param  {String}   POST|PUT|GET|DELETE\n\t * @param  {Function} cb   callback function with \"data\" argument\n\t * @return {jqXHR}\n\t */\n\tstatic ajaxJson(url, args, method, cb) {\n\t\tvar opts = {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: 'json',\n\t\t\tsuccess: function(data) {\n\t\t\t\tcb(data) ;\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\tcb(jqXHR.responseJSON) ;\n\t\t\t}\n\t\t} ;\n\t\tif (method=='GET' || method=='DELETE') {\n\t\t\tif (args) opts.data = args ;\n\t\t} else {\n\t\t\topts.data = JSON.stringify(args) ;\n\t\t\topts.contentType = 'application/json' ;\n\t\t\topts.processData = false ;\n\t\t\topts.cache = false ;\n\t\t}\n\t\t// log(\"opts\",opts)\n\n\t\tif (M_.App.useWebsocket) {\n\t\t\tif (method=='POST') return io.socket.post(url, opts, (data, jwres)=> {\n\t\t\t\tcb(data) ;\n\t\t\t});\n\t\t\tif (method=='PUT') return io.socket.put(url, opts, (data, jwres)=> {\n\t\t\t\tcb(data) ;\n\t\t\t});\n\t\t\tif (method=='GET') return io.socket.get(url, opts, (data, jwres)=> {\n\t\t\t\tcb(data) ;\n\t\t\t});\n\t\t\tif (method=='DELETE') return io.socket.delete(url, opts, (data, jwres)=> {\n\t\t\t\tcb(data) ;\n\t\t\t});\n\t\t}\n\t\treturn $.ajax(opts);\n\t}\n\n\t// exemple :\n\t// M_.Utils.saveFiles([form.find('co_avatar_send').jEl.get(0)], '/avatarupdate', {}, function() {\n\t// }) ;\n\t/**\n\t * Save a file with Ajax technic\n\t * @param  {Array}   files    array of input html files\n\t * @param  {String}   url      url to call\n\t * @param  {Object}   moreArgs send more arguments\n\t * @param  {Function} cb       callback after finished\n\t * @return {jqXHR}\n\t * @example\nM_.Utils.saveFiles([form.find('co_avatar_send').jEl.get(0)], '/avatarupdate', {}, function() {}) ;\n\t */\n\tstatic saveFiles(files, url, moreArgs={}, cb=null) {\n\t\tif (files.length===0) return cb() ;\n\t\tvar formData = new FormData() ;\n\t\tfor(var key in moreArgs) {\n\t\t\tformData.append(key, moreArgs[key]) ;\n\t\t}\n\t\t// console.log(\"files\", files);\n\t\tfor(var i=0 ; i<files.length ; i++) {\n\t\t\t// console.log(\"files[i].files\", files[i].files);\n\t\t\tfor(var j=0 ; j<files[i].files.length ; j++) {\n\t\t\t\tvar name = files[i].name ;\n\t\t\t\t// if (files[i].files.length>0) name += '['+j+']' ;\n\t\t\t\t// console.log(\"name\", name);\n\t\t\t\tformData.append(name, files[i].files[j]) ;\n\t\t\t}\n\t\t}\n\t\treturn $.ajax({\n\t\t\turl: url,\n\t\t\ttype: 'POST',\n\t\t\t//headers: {Connection: close},\n\t\t\tdata: formData,\n\t\t\tcontentType: false,\n\t\t\tprocessData: false,\n\t\t\tdataType: 'json',\n\t\t\tcache: false,\n\t\t\tsuccess: (data)=> {\n\t\t\t\tcb(data) ;\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Check if a script is loaded (warning : check exactly the file name)\n\t * @param  {String}  url url to call\n\t * @return {Boolean}     true if already loaded\n\t */\n\tstatic isLoadedScript(url) {\n\t\tvar ok = false ;\n\t\t$(\"script\").each(function() {\n\t\t\tif (this.src===url) ok = true ;\n\t\t}) ;\n\t\treturn ok ;\n\t}\n\t/**\n\t * Load a javascript file dynamically ; warning, no callback !!!\n\t * @param  {String} url url to call\n\t */\n\tstatic loadScript(url) {\n\t\tvar script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\t// script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp' +'&signed_in=true&callback=initialize';\n\t\tscript.src = url ;\n\t\tdocument.body.appendChild(script);\n\t}\n\t/**\n\t * To document\n\t */\n\tstatic saveSelection() {\n\t\tif (window.getSelection) {\n\t\t\tvar sel = window.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount) {\n\t\t\t\tthis._selection = sel.getRangeAt(0);\n\t\t\t}\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\tthis._selection = document.selection.createRange();\n\t\t} else this._selection = null;\n\t}\n\n\t/**\n\t * To document\n\t */\n\tstatic restoreSelection() {\n\t\tif (this._selection) {\n\t\t\tif (window.getSelection) {\n\t\t\t\tvar sel = window.getSelection();\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(this._selection);\n\t\t\t} else if (document.selection && this._selection.select) {\n\t\t\t\tthis._selection.select();\n\t\t\t}\n\t\t}\n\t}\n};\nM_.Utils._appIsFullScreen = false ;\n\n\n/**\n * Observable interface\n * @interface M_.Observable\n * @memberof! <global>\n */\nM_.Observable = {\n\t/**\n\t * Call this method in init() method of your class where you implement this mixin\n\t */\n\tinitObservable: function() {\n\t\tthis._listeners = [] ;\n\t\tif (this.listeners) {\n\t\t\tfor(var i=0 ; i<this.listeners.length ; i++) {\n\t\t\t\tthis.addListener(this.listeners[i][0], this.listeners[i][1]) ;\n\t\t\t}\n\t\t}\n\t\t//log(\"this._listeners\", this._listeners.length)\n\t},\n\t/**\n\t * Add a listner to this object\n\t * @param {String} evtName The event name\n\t * @param {Function} fct     A callback function to execute when event is trigged\n\t */\n\taddListener: function(evtName, fct) {\n\t\tthis._listeners.push({evtName:evtName, fct:fct}) ;\n\t},\n\t/**\n\t * Remove a listner to this object\n\t * @param {String} evtName The event name\n\t * @param {Function} fct     A callback function previously saved whith addListener()\n\t */\n\tremoveListener: function(evtName, fct) {\n\t\tvar listenersOk = [] ;\n\t\tfor(var i=0 ; i<this._listeners.length ; i++) {\n\t\t\tif (this._listeners[i].evtName==evtName && this._listeners[i].fct==fct) {\n\t\t\t\tlistenersOk.push(this._listeners[i]) ;\n\t\t\t}\n\t\t}\n\t\tthis._listeners = listenersOk ;\n\t},\n\t/**\n\t * Trigger the event\n\t * @param  {String} evtName The event name previously registered with addListener()\n\t * @return {boolean}         Return the result of callback function\n\t */\n\ttrigger: function(evtName) {\n\t\tvar res = true ;\n\t\tfor(var i=0 ; i<this._listeners.length ; i++) {\n\t\t\tif (this._listeners[i].evtName==evtName) {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\tres = this._listeners[i].fct.apply(this, args.slice(1)) ;\n\t\t\t}\n\t\t}\n\t\treturn res ;\n\t}\n} ;\n\n/**\n * Redefine this constants in your language\n * @memberof! <global>\n */\nM_.i18n = {\n\t// days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n\t// months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\t// daysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n\t// monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n\tdevise: \"\",\n\ttranslate: function() {\n\n\t}\n} ;\n\n\n/**\n * Create a model class. Generally you extends this class like exemple below\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @property {array} fields - the fields definition\n * @property {object} row - the values\n * @property {String} primaryKey - the primary key name\n * @example\nM_.ModelKeyVal = class extends M_.Model {\n\tgetDefinition() {\n\t\treturn {\n\t\t\tprimaryKey: \"key\",\n\t\t\tfields: [{ name: 'key' }, { name: 'val' }]\n\t\t};\n\t}\n};\n */\nM_.Model = class {\n     constructor(opts) {\n\t\tvar defaults = \t{\n\t\t\tfields: null,\n\t\t\trow: {},\n\t\t\tstore: null,\n\t\t\tprimaryKey: null,\n\t\t};\n\t\t$.extend(this, defaults, opts, this.getDefinition()) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\t\tif (!this.row) log(\"Vous devez dfinir opts.row\") ;\n\t\t// if (!this.store) log(\"Vous devez dfinir opts.store\") ;\n\t\tvar fields=this.fields ;\n\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\tif (!fields[j].type) fields[j].type = 'string' ;\n\t\t}\n\t\tthis.updateRow() ;\n\t}\n\t/**\n     * You must extends this class to return a definition\n\t * @function M_.Model#getDefinition\n     */\n\tgetDefinition() {\n\t\treturn {};\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tupdateRow() {\n\t\tvar fields=this.fields ;\n\t\t// log(\"fields\",fields)\n\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\tvar val = \"\" ;\n\t\t\tif (fields[j].type=='date') {\n\t\t\t\tif (this.row[fields[j].name]===undefined) continue ;\n\t\t\t\tif ($.type(this.row[fields[j].name])=='date') {\n\t\t\t\t\tval = this.row[fields[j].name] ;\n\t\t\t\t} else {\n\t\t\t\t\t// var fd = 'Y-m-d' ;\n\t\t\t\t\tif (this.row[fields[j].name]) {\n\t\t\t\t\t\t// if (this.row[fields[j].name].length>10) fd = 'Y-m-d H:i:s' ;\n\t\t\t\t\t\t// log(\"this.row[fields[j].name\",this.row[fields[j].name])\n\t\t\t\t\t\t// val = M_.Utils.parseDate(this.row[fields[j].name], fd) ;\n\t\t\t\t\t\tval = moment(this.row[fields[j].name]) ;\n\t\t\t\t\t\t// log(\"val\",val)\n\t\t\t\t\t} else val = \"\" ;\n\t\t\t\t}\n\t\t\t\tthis.row[fields[j].name] = val ;\n\t\t\t}\n\t\t\tif (fields[j].type=='number') {\n\t\t\t\tval = this.row[fields[j].name] ;\n\t\t\t\t//log(\"number\",fields[j].name,val)\n\t\t\t\tthis.row[fields[j].name] = val*1 ;\n\t\t\t}\n\t\t}\n\t}\n\t/**\n     * Get an object that represent the data model\n     * @returns {object} un nombre\n     */\n\tgetData() {\n\t\treturn this.getArray() ;\n\t}\n\tgetRowData() {\n\t\treturn this.getArray() ;\n\t}\n\tgetArray() {\n\t\tvar ret = {} ;\n\t\tvar fields=this.fields ;\n\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\tvar val = this.get(fields[j].name) ;\n\t\t\tif (val!==null) {\n\t\t\t\tret[fields[j].name] = val ;\n\t\t\t}\n\t\t}\n\t\tfor(var key in this.row) {\n\t\t\tif (!M_.Utils.isset(ret, key)) ret[key] = this.row[key] ;\n\t\t}\n\t\treturn ret ;\n\t}\n\t/**\n     * Set a object that represent the data model\n\t * @param  {object} row - The row\n\t * @param  {object} silently - Event \"update\" is not called\n     */\n\tsetRow(row, silently=false) {\n\t\tthis.row= row ;\n\t\tif (silently!==true) {\n\t\t\tthis.trigger(\"update\", this) ;\n\t\t\tif (this.store) this.store.trigger(\"update\", this.store) ;\n\t\t}\n\t}\n\t/**\n     * Set only one field of model\n\t * @param  {String} field - The field name\n\t * @param  {something} val - The value\n\t * @param  {object} silently - Event \"update\" is not called\n     */\n\tset(field, val, silently) {\n\t\t//log(\"val\",field,val)\n\t\tthis.row[field] = val ;\n\t\tif (silently!==true) {\n\t\t\tthis.trigger(\"update\", this) ;\n\t\t\tif (this.store) this.store.trigger(\"update\", this.store) ;\n\t\t}\n\t}\n\t/**\n     * Create an empty model\n     */\n\tcreateEmptyRow() {\n\t\tvar fields=this.fields ;\n\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\tthis.row[fields[j].name] = \"\" ;\n\t\t}\n\t}\n\n\t//warning : stocker le rsultat ???\n\t/**\n     * Get a field\n\t * @param  {String} field - The field name\n     */\n\tget(field) {\n\t\tvar val,\n\t\t\tfields=this.fields ;\n\n\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\t// log(\"fields[j].name\",fields[j].name)\n\t\t\tif (fields[j].name==field) {\n\t\t\t\tif (fields[j].fn) {\n\t\t\t\t\t//if (this.row[field]) val = this.row[field] ;\n\t\t\t\t\t//else val = eval(fields[j].fn) ;\n\t\t\t\t} else if (this.row[field]!==undefined) {//fields[j].type &&\n\t\t\t\t\tif (fields[j].type=='string' || fields[j].type=='text') {\n\t\t\t\t\t\tval = this.row[field] ;\n\t\t\t\t\t} else if (fields[j].type=='number') {\n\t\t\t\t\t\tval = this.row[field]*1 ;\n\t\t\t\t\t} else if (fields[j].type=='array') {\n\t\t\t\t\t\tval = this.row[field] ;\n\t\t\t\t\t} else if (fields[j].type=='boolean') {\n\t\t\t\t\t\tif (this.row[field]=='true' || this.row[field]===true || this.row[field]==='1' || this.row[field]===1) val = true ;\n\t\t\t\t\t\telse val = false ;\n\t\t\t\t\t} else if (fields[j].type=='date') {\n\t\t\t\t\t\tif ($.type(this.row[field])=='date') val = this.row[field] ;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// var fd = 'Y-m-d' ;\n\t\t\t\t\t\t\tif (this.row[fields[j]]) {\n\t\t\t\t\t\t\t\t// if (this.row[fields[j]].length>10) fd = 'Y-m-d H:i:s' ;\n\t\t\t\t\t\t\t\t// val = M_.Utils.parseDate(this.row[field]) ;\n\t\t\t\t\t\t\t\tval = moment(this.row[field]) ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak ;\n\t\t\t}\n\t\t}\n\t\tif (val===undefined && M_.Utils.isset(this.row, field)) val = this.row[field] ;\n\t\treturn val ;\n\t}\n\t/**\n     * Get the id of row (defined in primaryKey)\n     */\n\tgetId() {\n\t\treturn this.get(this.primaryKey) ;\n\t}\n};\n\n/**\n * Use a standard model key / value. No params.\n * @class M_.ModelKeyVal\n * @memberof! <global>\n * @example\n// Very useful with combobox\nvar combo = new M_.Form.Combobox({\n\tname: 'of_typecook',\n\tlabel: \"Type de cuisine\",\n\tcontainer: $(\"#here\"),\n\tstore: new M_.Store({\n\t\tcontroller: this,\n\t\tmodel: M_.ModelKeyVal,\n\t\tcurrentSort: [\"key\", 1],\n\t\trows: [{key:1, val:\"Cuisine amricaine\"}, {key:2, val:\"Cuisine nioise\"}]\n\t})\n}) ;\n */\nM_.ModelKeyVal = class extends M_.Model {\n\tgetDefinition() {\n\t\treturn {\n\t\t\tprimaryKey: \"key\",\n\t\t\tfields: [{ name: 'key' }, { name: 'val' }]\n\t\t};\n\t}\n};\n\n/**\n * A store is a client cache of rows. It can do ajax requests in json\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @property {array} [rows=[]] - the data rows\n * @property {boolean} [useWebsocket=M_.App.useWebsocket] - true if use websocket and not ajax\n * @property {array} [rowsModel=[]] - the model rows\n * @property {String} [url=\"\"] - the model rows\n * @property {object} [args={}] - arguments object to pass to each ajax request\n * @property {String} [rootData=\"data\"] - property where read data in json response\n * @property {array} [currentSort=null] - sort the store : ['name', 'asc'] ; the second is 'asc' or 'desc'\n * @property {M_.Model} [model=null] - the model to use\n * @property {String} [primaryKey=\"\"] - the primary key\n * @property {number} [limit=null] - send 'limit' param to ajax request\n * @property {boolean} [sortOnRemote=false] - send 'sort' param to ajax request\n * @property {number} [skip=0] - send 'skip' param to ajax request\n * @property {array} [unshiftRows=[]] - add this rows in first position, just after load\n * @property {array} [pushRows=[]] - add this rows in last positions, just after load\n * @example\n// json store\nvar store = new M_.Store({\n\tcontroller: this,\n\tmodel: MT_Contacts,\n\turl: \"/contacts\",\n\tlimit: 200,\n\tlisteners: [\n\t\t['load',(store, data)=> {\n\t\t\t// data are loaded\n\t\t}]\n\t]\n}) ;\n// ajax response would have the fields define in your model\n{\n\tdata: [\n\t\t{id:1, name:\"David Miglior\"},\n\t\t{id:2, name:\"Michael Miglior\"}\n\t]\n}\n */\nM_.Store = class {\n\n\n\n\t/**\n\t * Initialize the store. If you extend this method, you should call this._super()\n\t *\n\t * @param  {object} opts The configuration object\n\t */\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\trows: [],\n\t\t\tuseWebsocket: M_.App.useWebsocket,\n\t\t\trowsModel: [],\n\t\t\t_tabFieldsForSort: [],\n\t\t\turl: '',\n\t\t\targs: {},\n\t\t\trootData: 'data',\n\t\t\tcurrentSort: null,\n\t\t\tmodel: null,\n\t\t\tlastLoadArgs: {},\n\t\t\tprimaryKey: \"\",\n\t\t\tlimit: null,\n\t\t\tsortOnRemote: false,\n\t\t\tskip: 0,\n\t\t\tlastTotal: 0,\n\t\t\tunshiftRows: [],\n\t\t\tpushRows: [],\n\t\t\t_loaded: false,\n\t\t\t_loading: false,\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts);\n\n\t\tObject.mixin(this, M_.Observable);\n\t\tthis.initObservable() ;\n\n\t\tif (this.model) {\n\t\t\tvar model = new this.model({row:{}, store:{}}) ;\n\t\t\tthis.primaryKey = model.primaryKey ;\n\t\t}\n\t\t//must be last init, because update event\n\t\tif (this.rows && this.rows.length>0) {\n\t\t\t//M_.Utils.delay(\"\", $.proxy(function() {\n\t\t\t\tthis.setRows(this.rows) ;\n\t\t\t//}, this), 10) ;\n//\t\t\tlog(\"this.unshiftRows\",this.unshiftRows)\n\t\t\tif (this.unshiftRows && this.unshiftRows.length>0) {\n\t\t\t\tfor(let i=0 ; i<this.unshiftRows.length ; i++)\n\t\t\t\t\tthis.rows.unshift(this.unshiftRows[i]) ;\n\t\t\t}\n\t\t\tif (this.pushRows && this.pushRows.length>0) {\n\t\t\t\tfor(let i=0 ; i<this.pushRows.length ; i++)\n\t\t\t\t\tthis.rows.push(this.pushRows[i]) ;\n\t\t\t}\n\t\t\tthis.useModel() ;\n\t\t}\n\t}\n\n\t/**\n\t * Return the first model instance where the value of field equal val. The comparaison is do with ==, so \"2\"==2\n\t *\n\t * @param  {String} field The searched field name\n\t * @param  {string|number} val   The value researched.\n\t * @return {model}       Return the model instance founded or null\n\t */\n\t//val can be a RegExp\n\tgetRowBy(field, val) {\n\t\tvar rows = this.rowsModel ;\n\t\tfor(var i=0 ; i<rows.length ; i++) {\n\t\t\tvar v ;\n\t\t\tif (this.model) v = rows[i].get(field) ;\n\t\t\telse v = rows[i][field] ;\n\t\t\tif (v==val) {\n\t\t\t\treturn rows[i] ;\n\t\t\t}\n\t\t}\n\t\treturn null ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetIndexBy(field, val) {\n\t\tvar rows = this.rowsModel ;\n\t\tfor(var i=0 ; i<rows.length ; i++) {\n\t\t\tvar v = rows[i].get(field) ;\n\t\t\tif (v==val) {\n\t\t\t\treturn i ;\n\t\t\t}\n\t\t}\n\t\treturn -1 ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetRowByIndex(index) {\n\t\tvar rows = this.rowsModel ;\n\t\tif (rows[index]) return rows[index] ;\n\t\treturn null ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetRow(val) {\n\t\treturn this.getRowBy(this.primaryKey, val) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetIndexById(id) {\n\t\tvar rows = this.rowsModel ;\n\t\tfor(var i=0 ; i<rows.length ; i++) {\n\t\t\tvar v = rows[i].getId() ;\n\t\t\tif (v==id) {\n\t\t\t\treturn i ;\n\t\t\t}\n\t\t}\n\t\treturn -1 ;\n\t}\n\n\t//val can be a RegExp\n\t/**\n\t * @param  {type}\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetRowsBy(field, val) {\n\t\tvar res = [] ;\n\t\tvar rows = this.rowsModel ;\n\t\tfor(var i=0 ; i<rows.length ; i++) {\n\t\t\tvar v = rows[i].get(field) ;\n\t\t\tif (v==val) {\n\t\t\t\tres.push(rows[i]) ;\n\t\t\t}\n\t\t}\n\t\treturn res ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetRowAt(index) {\n\t\treturn this.rowsModel[index] ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetRows(rows) {\n\t\tthis.rows = rows ;\n\t\tthis.useModel() ;\n\t\t//log(\"this.rows1\",this.rows)\n\t\t//log(\"setRows\",this.rowsModel)\n\t\tthis.trigger(\"update\", this, this.rowsModel);\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetModels(rows) {\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddModel(row) {\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddRow(row) {\n\t\tthis.addRows([row]) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddModels(rows) {\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddRows(rows) {\n\t\t//this.rows = this.rows.concat(rows) ;\n\t\t//this.useModel() ;\n\t\tfor(var i=0 ; i<rows.length ; i++) {\n\t\t\tvar m = null ;\n\t\t\tvar row = rows[i] ;\n\t\t\tif (row instanceof M_.Model) {\n\t\t\t\tm = row ;\n\t\t\t\trow = row.getArray() ;\n\t\t\t} else {\n\t\t\t\tm = new this.model({row:row, store:this}) ;\n\t\t\t}\n\t\t\tthis.rows.push(row) ;\n\t\t\tthis.rowsModel.push(m) ;\n\t\t\t// this.addRow(rows[i]) ;\n\t\t\tthis.trigger(\"addedRow\", this, m);\n\t\t}\n\t\tthis.trigger(\"update\", this, this.rowsModel);\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetRows() {\n\t\treturn this.rowsModel ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcount() {\n\t\treturn this.rowsModel.length ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcountTotal() {\n\t\t//log(\"countTotal\",this.rowsModel,this.rows)\n\t\tif (this.lastTotal===0) return this.count() ;\n\t\treturn this.lastTotal ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tdeleteAll() {\n\t\tthis.rows = [] ;\n\t\tthis.rowsModel = [] ;\n\t\tthis.trigger(\"removedAll\", this);\n\t\tthis.trigger(\"update\", this, this.rowsModel);\n\t}\n\t/**\n\t * To document\n\t */\n\tsetKeysOnRows() {\n\t\tfor (var i=0 ; i<this.rows.length ; i++) {\n\t\t\tthis.rows[i]._mid = i ;\n\t\t}\n\t}\n\t_sortRemote(fields, direction) {\n\t\t//log(\"sortRemote\")\n\t\tif (!this.lastLoadArgs) this.lastLoadArgs = {} ;\n\t\t// this.lastLoadArgs.sort = this.currentSort[0] ;\n\t\t// this.lastLoadArgs.direction = this.currentSort[1] ;\n\t\t// this.lastLoadArgs.sort = fields ;\n\t\t// if (direction>0) this.lastLoadArgs.sort += \" ASC\" ;\n\t\t// else this.lastLoadArgs.sort += \" ASC\" ;\n\t\tthis.reload() ;\n\t}\n\t/**\n\t * To document\n\t * @param  {Array} fields\n\t * @param  {type} direction - direction=1 ASC, direction=-1 DESC, direction=0 toggle\n\t * @param  {type} silently\n\t * @return {type}\n\t * @example\n\t * \tstore.sort('co_name') ;\n\t * \tstore.sort('co_name', 1) ;\n\t * \tstore.sort([['co_name', 1], ['co_date',-1]]) ;\n\t */\n\tsort(fields, direction, silently) {\n\t\t// console.log(\"fields\", fields);\n\t\tif (!direction) direction = 0 ;\n\t\tif (_.isFunction(fields)) {\n\n\t\t} else {\n\t\t\tif (direction===0) {\n\t\t\t\tif (!this._tabFieldsForSort[fields]) {\n\t\t\t\t\tthis._tabFieldsForSort[fields] = 1 ;\n\t\t\t\t} else {\n\t\t\t\t\tthis._tabFieldsForSort[fields] = this._tabFieldsForSort[fields]*-1 ;\n\t\t\t\t}\n\t\t\t\tdirection = this._tabFieldsForSort[fields] ;\n\n\t\t\t} else {\n\t\t\t\tthis._tabFieldsForSort[fields] = direction ;\n\t\t\t}\n\t\t\tthis.currentSort = [fields, direction] ;\n\t\t}\n\t\tif (this.trigger(\"beforeSort\", this, fields, direction)===false) return false ;\n\t\t//log(\"this.currentSort\",this.currentSort)\n\t\tif (this.sortOnRemote) {\n\t\t\tthis._sortRemote(fields, direction) ;\n\t\t\treturn ;\n\t\t}\n\t\t// console.log(\"ok\");\n\t\tthis.rowsModel.sort((a, b)=> {\n\t\t\t// log(\"a,b\",a,b)\n\t\t\tvar a0 ;\n\t\t\tvar b0 ;\n\t\t\tif (_.isFunction(fields)) {\n\t\t\t\ta0 = fields(a) ;\n\t\t\t\tb0 = fields(b) ;\n\t\t\t\t// console.log(\"a0, b0\", a0, b0);\n\t\t\t} else {\n\t\t\t\ta0 = a.get(fields) ;\n\t\t\t\tb0 = b.get(fields) ;\n\t\t\t}\n\t\t\tif (a0===null || b0===null) return 0 ;\n\t\t\tif ((typeof a0) == \"number\") {\n\t\t\t\tif (direction==-1) return b0-a0 ;\n\t\t\t\treturn a0-b0 ;\n\t\t\t} else if (a0 instanceof Date) {\n\t\t\t\tif (direction==-1) return b0-a0 ;\n\t\t\t\treturn a0-b0 ;\n\t\t\t} else if (a0 && b0 && a0.getDate && a0.getDate() instanceof Date) {\n\t\t\t\tif (direction==-1) return b0.getDate()-a0.getDate() ;\n\t\t\t\treturn a0.getDate()-b0.getDate() ;\n\t\t\t} else if (a0 && b0) {\n\t\t\t\tif (direction==-1) return b0.localeCompare(a0) ;\n\t\t\t\treturn a0.localeCompare(b0) ;\n\t\t\t} else return 0 ;\n\t\t}) ;\n\t\tthis.trigger(\"sort\", this);\n\t\tif (silently!==true) {\n\t\t\tthis.trigger(\"update\", this, this.rowsModel);\n\t\t}\n\t}\n\t// sortByFunction(fun) {\n\t// \tthis.rowsModel.sort((a, b)=> {\n\t// \t\tvar vala = fun(a) ;\n\t// \t\tvar valb = fun(b) ;\n\t// \t}) ;\n\t// \tthis.trigger(\"sort\", this);\n\t// }\n\t/**\n\t * To document\n\t */\n\tuseModel() {\n\t\tif (this.model) {\n\t\t\tthis.rowsModel = [] ;\n\t\t\t// var fields = this.model.fields ;\n\t\t\t// log(\"this.rows\",this.rows)\n\t\t\tfor (var i=0 ; i<this.rows.length ; i++) {\n\t\t\t\tthis.rowsModel[i] = new this.model({row:this.rows[i], store:this}) ;\n\t\t\t\t//this.rowsModel[i].updateRow() ;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.rowsModel = this.rows ;\n\t\t}\n\t}\n\t/**\n\t * @param  {Function} fn\n\t */\n\teach(fn) {\n\t\t//log(\"length\",this.rowsModel)\n\t\tfor (var i=0 ; i<this.rowsModel.length ; i++) {\n\t\t\tvar ret = fn.call(this, this.rowsModel[i], i) ;\n\t\t\tif (ret===false) break ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreateEmptyRow() {\n\t\tvar mod = new this.model({row:{}, store:this}) ;\n\t\tmod.createEmptyRow() ;\n\t\treturn mod ;\n\t}\n\t/**\n\t * @param {type} skip\n\t */\n\tsetSkip(skip) {\n\t\tthis.skip = skip ;\n\t\tif (!this.lastLoadArgs) this.lastLoadArgs = {} ;\n\t\tthis.lastLoadArgs.skip = skip ;\n\t\tthis.reload() ;\n\t}\n\t/**\n\t * @param {type} query\n\t */\n\tsetQuery(query) {\n\t\tthis.reload() ;\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisLoading() {\n\t\treturn this._loading ;\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisLoaded() {\n\t\treturn this._loaded ;\n\t}\n\t/**\n\t * @param  {type} args\n\t * @param  {Function} callback\n\t * @return {type}\n\t */\n\tload(args, callback) {\n\t\t// log(\"load\")\n\t\tvar okArgs = {} ;\n\t\tif (this.currentSort) {\n\t\t\tif (_.isArray(this.currentSort)) okArgs.sort = this.currentSort[0]+\" \"+this.currentSort[1] ;\n\t\t\telse okArgs.sort = this.currentSort ;\n\t\t}\n\t\tif (this.limit && this.limit>0) okArgs.limit = this.limit ;\n\t\tif (this.skip) okArgs.skip = this.skip ;\n\n\t\tif (args && (args.skip || args.skip===0)) this.skip = args.skip ;\n\t\t// if (args && args.sort && _.isArray(args.sort)) this.currentSort[0] = args.sort ;\n\t\t// if (args && args.sort && _.isString(args.sort)) this.currentSort = args.sort ;\n\t\t// if (args && args.direction) this.currentSort[1] = args.direction ;\n\t\tif (args && args.limit) this.limit = args.limit ;\n\n\t\tvar thisArgs = this.args ;\n\t\tif (_.isFunction(thisArgs)) thisArgs = this.args() ;\n\t\t$.extend(okArgs, thisArgs, args) ;\n\t\tvar obj = {url: this.url, args:okArgs} ;\n\t\tif (this.trigger(\"beforeLoad\", this, obj)===false) return false ;\n\t\tif (obj.args.onBeforeLoad) obj.args.onBeforeLoad(this, obj)  ;\n\t\tthis.lastLoadArgs = obj.args ;\n\t\tthis._loaded = false ;\n\t\tthis._loading = true ;\n\t\tif (this.useWebsocket) {\n\t\t\tio.socket.get(obj.url, okArgs, (data, jwres)=> {\n\t\t\t\tthis._treatDataStore(data, callback) ;\n\t\t\t});\n\t\t} else {\n\t\t\t// if (this.loadAjaxXHR) this.loadAjaxXHR.abort() ;\n\t\t\t// log(\"okArgs\",okArgs)\n\t\t\tthis.loadAjaxXHR = M_.Utils.getJson(obj.url, okArgs, (data)=> {\n\t\t\t\tthis._treatDataStore(data, callback) ;\n\t\t\t}) ;\n\t\t\t// this.loadAjaxXHR = $.ajax({\n\t\t\t// \turl: obj.url,\n\t\t\t// \ttype: 'GET',\n\t\t\t// \tcontentType: 'application/json',\n\t\t\t// \tdata: okArgs,\n\t\t\t// \tdataType: 'json',\n\t\t\t// \tsuccess: (data) => {\n\t\t\t// \t\t// log(\"data\",data)\n\t\t\t// \t\tthis._treatDataStore(data, callback) ;\n\t\t\t// \t}\n\t\t\t// });\n\n\t\t}\n\t}\n\t_treatDataStore(data, callback) {\n\t\t// log(\"_treatDataStore\",data)\n\t\tthis._loaded = true ;\n\t\tthis._loading = false ;\n\t\tthis.lastdata = data ;\n\n\t\tthis.trigger(\"loadraw\", this, data);\n\n\t\tvar i ;\n\t\t//if (this.lastLoadArgs.addRows) this.rows = this.rows.concat(data.data) ;\n\t\t//else\n\t\tif (data.total || data.total===0) this.lastTotal = data.total*1 ;\n//\t\t log(\"this.unshiftRows\",this.unshiftRows)\n\t\tif (this.unshiftRows.length>0) {\n\t\t\tfor(i=0 ; i<this.unshiftRows.length ; i++)\n\t\t\t\tdata.data.unshift(this.unshiftRows[i]) ;\n\t\t}\n\t\tif (this.pushRows.length>0) {\n\t\t\tfor(i=0 ; i<this.pushRows.length ; i++)\n\t\t\t\tdata.data.push(this.pushRows[i]) ;\n\t\t}\n\t\t//if (this.lastLoadArgs.add)  ;\n\t\t//else\n\t\tthis.rows = data.data ;\n\t\t// this.lastLoadArgs.add = false ;\n\n\t\tthis.useModel() ;\n\t\t// if (this.currentSort && !this.sortOnRemote && _.isArray(this.currentSort))\n\t\t// \tthis.sort(this.currentSort[0], this.currentSort[1], true) ;\n\t\t//this.setKeysOnRows() ;\n\n\t\tthis.trigger(\"load\", this, this.rowsModel);\n\t\tthis.trigger(\"update\", this, this.rowsModel);\n\t\tif (this.lastLoadArgs.onUpdate) this.lastLoadArgs.onUpdate(this.rowsModel) ;\n\n\t\tif (this.lastLoadArgs.onBeforeLoad) this.lastLoadArgs.onBeforeLoad = null ;\n\t\tif (this.lastLoadArgs.onUpdate) this.lastLoadArgs.onUpdate = null ;\n\t\tif (callback) callback(this) ;\n\n\t}\n\t/**\n\t * @param  {Boolean} [reset=false]\n\t * @param  {type} [moreArgs=null]\n\t * @return {type}\n\t */\n\treload(reset=false, moreArgs=null, cb=null) {\n\t\tif (reset) {\n\t\t\tthis.skip = 0 ;\n\t\t\tthis.lastLoadArgs = {} ;\n\t\t}\n\t\tif (moreArgs) $.extend(this.lastLoadArgs, moreArgs) ;\n\t\tthis.load(this.lastLoadArgs, cb) ;\n\t}\n\n};\n\n\n\n/**\n * A base graphical object\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n */\nM_.Outlet = class {\n\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tcontroller: null,\n\t\t\tcontainer: null,\n\t\t\tid: '',\n\t\t\tview: null,\n\t\t\tjEl: null,\n\t\t\thelp: null,\n\t\t\trendered: false,\n\t\t\ttop: 0,\n\t\t\tleft: 0\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\t\tif (M_.Utils.isEmpty(this.id)) this.id = M_.Utils.id() ;\n\n\n\t\tif (!M_.Utils.isEmpty(this.jEl) && $.type(this.jEl)==\"string\") this.jEl = $(\"#\"+this.jEl) ;\n\t\t// if (!M_.Utils.isEmpty(this.container) && $.type(this.container)==\"string\") this.container = $(\"#\"+this.container) ;\n\n\t\tif (M_.Utils.isEmpty(this.jEl)) this.create() ;\n\n\t\tif (this.jEl && M_.Utils.isEmpty(this.jEl.attr('id'))) this.jEl.attr('id', this.id) ;\n\t\tthis._attachHelp() ;\n\n\t\t// if (M_.Utils.isEmpty(this.id)) {\n\t\t// \tif (this.jEl && !M_.Utils.isEmpty(this.jEl.attr('id'))) {\n\t\t// \t\tthis.id = this.jEl.attr('id') ;\n\t\t// \t} else {\n\t\t// \t\tthis.id = M_.Utils.id() ;\n\t\t// \t}\n\t\t// }\n\t\t// if (this.jEl && M_.Utils.isEmpty(this.jEl.attr('id'))) this.jEl.attr('id', this.id) ;\n\t\t// M_.App.registerOutlet(this) ;\n\t\tthis.trigger('created', this) ;\n\t}\n\t_attachHelp() {\n\t\tif (this.help && this.jEl) {\n\t\t\tnew M_.Help({\n\t\t\t\tcontroller: this.controller,\n\t\t\t\ttext: this.help,\n\t\t\t\tattachedObj: this.container\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * Extend this class to create your UI.\n\t */\n\tcreate() {\n\t\tthis.jEl = $(\"<div></div>\") ;\n\t\tthis.container.append(this.jEl) ;\n\t}\n\t/**\n\t * Destroy the outlet\n\t */\n\tdestroy() {\n\t\tif (!this.jEl) return ;\n\t\tthis.jEl.remove() ;\n\t\tthis.container.empty() ;\n\t}\n\t/**\n\t * Return jEl element. Generally the main object.\n\t * @returns {jquery} the main jQuery element\n\t */\n\tgetEl() {\n\t\treturn this.jEl ;\n\t}\n\n\t/**\n\t * Search a class or selector in the container, like $.find()\n\t * @param  {string} selector\n\t * @return {jQuery}\n\t */\n\tfindEl(selector) {\n\t\treturn this.container.find(selector) ;\n\t}\n};\n\n/**\n * Implement this interface to get a store\n * @interface\n * @memberof! <global>\n */\nM_.Stored = {\n\t//autoFocus: null,\n\t/**\n\t * Call this method in your init() function\n\t */\n\tinitStored: function() {\n\t\tif (!this.store) log(\"store is mandatory in M_.Stored\") ;\n\t\t//if (this.store) this.setStore(this.store) ;\n\t\telse this.store.addListener(\"update\", $.proxy(this.updateStore, this)) ;\n\t},\n\t/**\n\t * Configure a new store\n\t * @param {M_.Store} store The new store used\n\t */\n\tsetStore: function(store) {\n\t\tthis.store = store ;\n\t\tthis.store.addListener(\"update\", $.proxy(this.updateStore, this)) ;\n\t},\n\t/**\n\t * Return the store object\n\t * @return {M_.Store} The store object or null\n\t */\n\tgetStore: function() {\n\t\treturn this.store ;\n\t},\n\t/**\n\t * Redefine this method to update your UI\n\t * @param  {M_.Store} store The store object\n\t */\n\t// updateStore: function(store) {\n\t// }\n} ;\n\n/**\n * Display an help on jquery element\n * @class\n * @memberof! <global>\n * @property  {type} controller\n * @property  {type} text\n * @property  {type} attachedObj\n * @property  {type} shiftX\n * @property  {type} shiftY\n * @property  {type} maxWidth\n */\nM_.Help = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tcontroller: null,\n\t\t\ttext: \"\",\n\t\t\tattachedObj: null,\n\t\t\tshiftX: 15,\n\t\t\tshiftY: -15,\n\t\t\tmaxWidth: 300,\n\t\t\tshowNow: false\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend(this, defaults, opts) ;\n\t\tthis.create() ;\n\n\t\tif (this.showNow) {\n\t\t\tthis.show() ;\n\t\t\t$(document).on('mousemove', $.proxy(this._mousemove, this)) ;\n\t\t}\n\t}\n\t_mousemove(evt) {\n\t\tvar top = evt.pageY*1+this.shiftY ;\n\t\tvar left = evt.pageX*1+this.shiftX ;\n\t\tif (left+300+100>$(window).width()) {\n\t\t\tleft = evt.pageX*1-this.shiftX-$(\"#M_Help\").outerWidth() ;\n\t\t\tif ($(\"#M_Help\").hasClass('left')) $(\"#M_Help\").removeClass('left').addClass('right') ;\n\t\t\tif (!$(\"#M_Help\").hasClass('right')) $(\"#M_Help\").addClass('right') ;\n\t\t} else {\n\t\t\tif ($(\"#M_Help\").hasClass('right')) $(\"#M_Help\").removeClass('right').addClass('left') ;\n\t\t\tif (!$(\"#M_Help\").hasClass('left')) $(\"#M_Help\").addClass('left') ;\n\t\t}\n\t\tif (top+$(\"#M_Help\").outerHeight()-10>$(window).height()) {\n\t\t\ttop = $(window).height()-$(\"#M_Help\").outerHeight()-10 ;\n\t\t\t// $('#M_Help.left:after').css('top',top) ;\n\t\t}\n\t\t$(\"#M_Help\").css({\n\t\t\ttop: top,\n\t\t\tleft: left\n\t\t}) ;\n\t}\n\t/**\n\t * To document\n\t */\n\tcreate() {\n\t\t// console.log(\"this.attachedObj\", this.attachedObj);\n\t\tthis.attachedObj.mouseenter((evt)=> {\n\t\t\tthis.show(evt) ;\n\t\t\t$(document).on('mousemove', $.proxy(this._mousemove, this)) ;\n\t\t}) ;\n\t\tthis.attachedObj.mouseleave((evt)=> {\n\t\t\tthis.hide(evt) ;\n\t\t\t$(document).off('mousemove', $.proxy(this._mousemove, this)) ;\n\t\t}) ;\n\t\tthis.attachedObj.click((evt)=> {\n\t\t\tthis.hide(evt) ;\n\t\t}) ;\n\t\tif (this.attachedObj.prop('tagName').toLowerCase()=='input') {\n\t\t\tthis.attachedObj.focus((evt)=> {\n\t\t\t\tthis.hide() ;\n\t\t\t}) ;\n\t\t\tthis.attachedObj.focus((evt)=> {\n\t\t\t\tthis.hide() ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * @param  {event} evt\n\t */\n\tshow(evt) {\n\t\t$(\"#M_Help\").html(this.text).css('max-width',this.maxWidth).show() ;\n\t}\n\t/**\n\t * @param  {event} evt\n\t */\n\thide(evt) {\n\t\t$(\"#M_Help\").hide() ;\n\t}\n\t/**\n\t *\n\t */\n\tstatic createMHelp() {\n\t\t$(\"body\").append(\"<div id='M_Help'></div>\") ;\n\t}\n\t/**\n\t *\n\t */\n\tstatic hideMHelp() {\n\t\t$(\"#M_Help\").hide() ;\n\t}\n} ;\n\n\n/**\n * Like a card layout. Use HTML to define them.\n * @class\n * @memberof! <global>\n * @property {String} firstTab\n */\nM_.Tabs = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tfirstTab: null,\n\t\t\tbuttons: null,\n\t\t\tonChange: null\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t\tif (this.buttons) {\n\t\t\tthis.buttons.find('.M_TabButton').each((ind, el)=> {\n\t\t\t\t$(el).click((evt)=> {\n\t\t\t\t\tvar jEl = $(evt.target) ;\n\t\t\t\t\t// console.log(\"jEl.attr('for')\", jEl.attr('for'));\n\t\t\t\t\tthis.show(jEl.attr('for'), (next)=> {\n\t\t\t\t\t\tif (this.onChange) {\n\t\t\t\t\t\t\tthis.onChange(jEl.attr('for'), next) ;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnext() ;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}) ;\n\t\t\t\t}) ;\n\t\t\t}) ;\n\t\t}\n\n\t\t// this.container.children('.M_Tab').each(function() {\n\t\t// \tthis.tabTabs.push($(this)) ;\n\t\t// }) ;\n\t}\n\t// addTab(jEl) {\n\t// \tthis.tabTabs.push(tab) ;\n\t// }\n\t/**\n\t * @param  {type}\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tshow(jElId, cbBeforeShow, anim=true) {\n\t\tvar speed = M_.Utils.getSpeedAnim() ;\n\t\t// log(\"show\",jElId)\n\t\tvar current = null ;\n\t\tthis.container.children('.M_Tab').each((ind, el)=> {\n\t\t\t// log(\"$(this).attr('id')\",$(this).attr('id'))\n\t\t\tif ($(el).hasClass('active')) {\n\t\t\t\tcurrent = $(el) ;\n\t\t\t\treturn false ;\n\t\t\t}\n\t\t}) ;\n\t\t// log(\"current\",current)\n\t\tif (current && current.attr('id')==jElId) {\n\t\t\tcbBeforeShow((cbAfterShow)=> {\n\t\t\t\tif (cbAfterShow===false) return ;\n\t\t\t\tif (cbAfterShow) cbAfterShow() ;\n\t\t\t}) ;\n\t\t\treturn ;\n\t\t} else if (current) {\n\t\t\tif (anim) {\n\t\t\t\tcurrent.transition({opacity:0}, speed, ()=> {\n\t\t\t\t\tcurrent.removeClass('active') ;\n\t\t\t\t\t$(\"#\"+jElId).css('opacity',0.01).addClass('active') ;\n\t\t\t\t\tcbBeforeShow((cbAfterShow)=> {\n\t\t\t\t\t\tif (cbAfterShow===false) return ;\n\t\t\t\t\t\t$(\"#\"+jElId).transition({opacity:1}, speed, ()=> {\n\t\t\t\t\t\t\tif (cbAfterShow) cbAfterShow() ;\n\t\t\t\t\t\t}) ;\n\t\t\t\t\t}) ;\n\t\t\t\t}) ;\n\t\t\t} else {\n\t\t\t\tcurrent.removeClass('active') ;\n\t\t\t\tcbBeforeShow((cbAfterShow)=> {\n\t\t\t\t\tif (cbAfterShow===false) return ;\n\t\t\t\t\t$(\"#\"+jElId).css('opacity',1).addClass('active') ;\n\t\t\t\t\tif (cbAfterShow) cbAfterShow() ;\n\t\t\t\t}) ;\n\t\t\t}\n\t\t} else {\n\t\t\tif (anim) {\n\t\t\t\t$(\"#\"+jElId).css('opacity',0.01).addClass('active') ;\n\t\t\t\tcbBeforeShow((cbAfterShow)=> {\n\t\t\t\t\tif (cbAfterShow===false) return ;\n\t\t\t\t\t$(\"#\"+jElId).transition({opacity:1}, speed, ()=> {\n\t\t\t\t\t\tif (cbAfterShow) cbAfterShow() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}) ;\n\t\t\t} else {\n\t\t\t\tcbBeforeShow((cbAfterShow)=> {\n\t\t\t\t\tif (cbAfterShow===false) return ;\n\t\t\t\t\t$(\"#\"+jElId).css('opacity',1).addClass('active') ;\n\t\t\t\t\tif (cbAfterShow) cbAfterShow() ;\n\t\t\t\t}) ;\n\t\t\t}\n\t\t}\n\t\tif (this.buttons) {\n\t\t\tthis.buttons.find('.M_TabButton').each((ind, el)=> {\n\t\t\t\t$(el).removeClass('active') ;\n\t\t\t\tif ($(el).attr('for')==jElId) $(el).addClass('active') ;\n\t\t\t}) ;\n\t\t}\n\n\n\t}\n};\n\n/**\n * A graphical tree\n * @class\n * @memberof! <global>\n * @extends M_.Outlet\n * @property {String} autoLoad\n * @property {String} tpl\n */\nM_.Tree = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tautoLoad: false,\n\t\t\tdisplayRootNode: true,\n\t\t\turl: \"\",\n\t\t\tcls: 'M_Tree',\n\t\t\tretractable: true,\n\t\t\trootNode: {\n\t\t\t\texpended: true,\n\t\t\t\thidden: false,\n\t\t\t\tlabel: \"RootNode\",\n\t\t\t\tid: \"rootnode\",\n\t\t\t\tnodes: []\n\t\t\t},\n\n\t\t};\n\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tthis.jEl = $(\"<div class='\"+this.cls+\"'></div>\") ;\n\t\tthis.container.append(this.jEl) ;\n\t\tthis._drawNodes() ;\n\t}\n\t/**\n\t * Draw the tree\n\t */\n\tdraw() {\n\t\tthis._drawNodes() ;\n\t}\n\t_drawNodes() {\n\t\tvar html = \"\" ;\n\t\thtml += \"<ul>\" ;\n\t\thtml += this._createChildNodes(this.rootNode) ;\n\t\thtml += \"</ul>\" ;\n\t\tthis.jEl.html(html) ;\n\n\t\t$('.M_Tree li:has(ul)').addClass('M_TreeParentLi').find(' > span') ;//.attr('title', 'Collapse this branch')\n\t\tif (this.retractable) {\n\t\t\t$('.M_Tree li.M_TreeParentLi > span').on('click', (evt)=> {\n\t\t\t\tvar target = $(evt.target) ;\n\t\t\t\tvar children = target.closest('li.M_TreeParentLi').find(' > ul > li');\n\t\t\t\tif (children.is(\":visible\")) {\n\t\t\t\t\tchildren.slideUp();\n\t\t\t\t\ttarget.find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign'); //.attr('title', 'Expand this branch')\n\t\t\t\t} else {\n\t\t\t\t\tchildren.slideDown();\n\t\t\t\t\ttarget.find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign'); //.attr('title', 'Collapse this branch')\n\t\t\t\t}\n\t\t\t\tevt.stopPropagation();\n\t\t\t});\n\t\t}\n\t\t$('.M_Tree li > span').on('click', (evt)=> {\n\t\t\tvar nodeId = $(evt.target).closest(\"li\").attr(\"m_id\") ;\n\t\t\tvar node = this.getNode(nodeId) ;\n\t\t\tif (node.clickable!==false) this.trigger('nodeclick', this, nodeId, node) ;\n\t\t}) ;\n\t\tthis._dragMID = null ;\n\t\t$('.M_Tree li > span')\n\t\t.attr('draggable', true)\n\t\t.on('dragover', (evt)=> {\n\t\t\tevt.preventDefault();\n\t\t})\n\t\t.on('drag', (evt, evt2)=> {\n\t\t\tthis._dragMID = $(evt.target).closest(\"li\").attr(\"m_id\") ;\n\t\t})\n\t\t.on('drop', (evt)=> {\n\t\t\tevt.preventDefault();\n\t\t\tvar mid = this._dragMID ;\n\t\t\tvar nodeDrop = $(evt.target).closest(\"li\").attr(\"m_id\") ;\n\t\t\tthis.moveNode(mid, nodeDrop) ;\n\t\t\tthis.trigger('nodemove', this, mid, nodeDrop) ;\n\t\t}) ;\n\n\t}\n\t_createChildNodes(parent) {\n\t\tvar html = \"\" ;\n\t\tif (!parent.id) parent.id = M_.Utils.id() ;\n\t\thtml += \"<li m_id='\"+parent.id+\"'>\" ;\n\t\thtml += \"<span>\"+parent.label+\"</span>\" ;\n\t\tif (parent.nodes && parent.nodes.length) {\n\t\t\thtml += \"<ul>\" ;\n\t\t\t_.each(parent.nodes, (node, index)=> {\n\t\t\t\thtml += this._createChildNodes(node) ;\n\t\t\t}) ;\n\t\t\thtml += \"</ul>\" ;\n\t\t}\n\t\thtml += \"</li>\" ;\n\t\treturn html ;\n\t}\n\t_iter(parent, nodeId, action) {\n\t\t// if (action=='path') this._nodepath.push(parent.id) ;\n\t\tif (nodeId=='rootnode') {\n\t\t\tif (action=='get') {\n\t\t\t\tthis._nodeparent = null ;\n\t\t\t\tthis._resNodeId = parent ;\n\t\t\t}\n\t\t\tif (action=='add') {\n\t\t\t\tif (!parent.nodes) parent.nodes = [] ;\n\t\t\t\tparent.nodes.push(this._nodeToAdd) ;\n\t\t\t}\n\t\t\treturn ;\n\t\t}\n\t\tif (parent.nodes && parent.nodes.length) {\n\t\t\t_.each(parent.nodes, (node, index)=> {\n\t\t\t\tif (!node) return ;\n\t\t\t\tif (node.id==nodeId) {\n\t\t\t\t\tif (action=='remove') parent.nodes.splice(index, 1) ;\n\t\t\t\t\tif (action=='get') {\n\t\t\t\t\t\tthis._nodeparent = parent ;\n\t\t\t\t\t\tthis._resNodeId = node ;\n\t\t\t\t\t}\n\t\t\t\t\tif (action=='add') {\n\t\t\t\t\t\tif (!node.nodes) node.nodes = [] ;\n\t\t\t\t\t\tnode.nodes.push(this._nodeToAdd) ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._iter(node, nodeId, action) ;\n\t\t\t}) ;\n\t\t}\n\t\t// return '' ;\n\t}\n\t/**\n\t * @param {NodeObject} node\n\t * @param {String} parentId\n\t */\n\taddNode(node, parentId) {\n\t\tthis._nodeToAdd = node ;\n\t\tthis._iter(this.rootNode, parentId, 'add') ;\n\t\tthis._drawNodes() ;\n\t}\n\t/**\n\t * @param  {String}\tnodeId\n\t * @param  {String}\tparentId\n\t */\n\tmoveNode(nodeId, parentId) {\n\t\t// log(\"nodeId, parentId\",nodeId, parentId)\n\t\tvar node = this.getNode(nodeId) ;\n\t\tthis.removeNode(nodeId) ;\n\t\tthis.addNode(node, parentId) ;\n\t\tthis._drawNodes() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {Array}\n\t */\n\tgetNodePath(nodeId) {\n\t\tvar nodepath = [nodeId] ;\n\t\t// this._iter(this.rootNode, nodeId, 'path') ;\n\t\tvar nodeIdStart = nodeId ;\n\t\tfor(var i=0 ; i<100 ; i++) {\n\t\t\tvar parentId = this.getNodeParent(nodeIdStart).id ;\n\t\t\tnodepath.unshift(parentId) ;\n\t\t\tnodeIdStart = parentId ;\n\t\t\tif (parentId=='rootnode') break ;\n\t\t}\n\t\treturn nodepath ;\n\t}\n\tgetNodeParent(nodeId) {\n\t\tthis._nodeparent = null ;\n\t\tthis._iter(this.rootNode, nodeId, 'get') ;\n\t\t// return M_.Utils.clone(this._nodeparent) ;\n\t\treturn (this._nodeparent) ;\n\t}\n\tisNodeChildOf(nodeId, childOfNodeId) {\n\t\treturn this.getNodePath(nodeId) ;\n\t}\n\t/**\n\t * @param  {String}\tnodeId\n\t */\n\tremoveNode(nodeId) {\n\t\t// this.jEl.find(\"li[m_id='\"++\"']\").remove() ;\n\t\tthis._iter(this.rootNode, nodeId, 'remove') ;\n\t\tthis._drawNodes() ;\n\t}\n\t/**\n\t * @param  {String}\tnodeId\n\t * @return {NodeObject}\n\t */\n\tgetNode(nodeId) {\n\t\tthis._resNodeId = null ;\n\t\tthis._iter(this.rootNode, nodeId, 'get') ;\n\t\t// return M_.Utils.clone(this._resNodeId) ;\n\t\treturn (this._resNodeId) ;\n\t}\n\t/**\n\t * @param {NodeObject} rootNode\n\t */\n\tsetRootNode(rootNode) {\n\t\tthis.rootNode = rootNode ;\n\t\tthis._drawNodes() ;\n\t}\n\n} ;\n\n/**\n * A graphical list to implement\n * @class\n * @memberof! <global>\n * @extends M_.Outlet\n * @implements M_.Stored\n * @property {String} autoLoad\n * @property {String} tpl\n */\nM_.List = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tautoLoad: false,\n\t\t\ttpl: '',\n\t\t};\n\n\t\t// if (!opts.jEl && !opts.colsDef) log(\"jEl is mandatory in M_.List\") ;\n\t\t// if (!opts.tpl && !opts.colsDef) log(\"tpl is mandatory in M_.List\") ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t\t// $.extend(true, this.prototype, M_.Stored) ;\n\t\tObject.mixin(this, M_.Stored) ;\n\t\t// log(\"store\", Object.mixin)\n\t\tthis.initStored() ;\n\n\t\t//this.render();\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tupdateStore() {\n\t\tthis.render() ;\n\t}\n\t/**\n\t * Redefine this method to render your UI\n\t */\n\trender() {\n\t}\n};\n\n// M_.Draggable = class {\n// \tconstructor(el, jElHandle=null, jElHelper=null) {\n// \t\t//tabDraggable.push({el:el, jElHandle:jElHandle}) ;\n// \t\tjElHandle.mousedown({el:el}, $.proxy(function(evt) {\n// \t\t\tthis.dragEl = evt.data.el ;\n// \t\t\tthis.dragStart = true ;\n// \t\t\tthis.dragDiff = {top: evt.pageY-this.dragEl.offset().top, left: evt.pageX-this.dragEl.offset().left}\n// \t\t}, this)) ;\n// \t\t$(document).mouseup({el:el}, $.proxy(function() {\n// \t\t\tthis.dragStart = false ;\n// \t\t}, this)) ;\n// \t\t$(document).mousemove({el:el}, $.proxy(function(evt) {\n// \t\t\tif (this.dragStart && this.dragEl == evt.data.el) {\n// \t\t\t\tvar top = evt.pageY ;\n// \t\t\t\tvar left = evt.pageX ;\n// \t\t\t\tthis.dragEl.offset({top: top-this.dragDiff.top, left: left-this.dragDiff.left}) ;\n// \t\t\t}\n// \t\t}, this)) ;\n// \t}\n\n\n/**\n * A simple list \" la Apple\"\n * @class\n * @memberof! <global>\n * @extends M_.List\n * @property {type} classItems\n * @property {type} itemValue\n * @property {type} itemKey\n * @property {type} selectionVisible\n * @property {type} multipleSelection\n * @property {type} currentSelection\n * @property {type} dynamic\n * @property {type} lineHeight\n * @property {type} loadLimit\n * @property {type} itemsDraggableTo\n */\nM_.SimpleList = class extends M_.List {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tclassItems: 'M_SimpleListItem',\n\t\t\titemValue: '',\n\t\t\titemKey: '',\n\t\t\tselectionVisible: false,\n\t\t\tmultipleSelection: false,\n\t\t\tcurrentSelection: [],\n\t\t\tdynamic: false,\n\t\t\tlineHeight: 34,\n\t\t\tloadLimit: 400,\n\t\t\toddEven: true,\n\t\t\t// _startPosition: 0,\n\t\t\titemsDraggableTo: false,\n\t\t\t_dragStarted: false,\n\t\t\t_lastSelection: null\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\t\t// this.setSelection(this.currentSelection) ;\n\t\t// this.create() ;\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tupdateStore() {\n\t\tsuper.updateStore() ;\n\t\tthis.setSelection(this.currentSelection) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tvar html = \"\" ;\n\t\thtml += `<div class='M_SimpleList'>\n\t\t\t\t\t<div class='M_SimpleListContent'>\n\t\t\t\t\t\t<div class='M_SimpleListContentFake1'></div>\n\t\t\t\t\t\t<div class='M_SimpleListContentReal'></div>\n\t\t\t\t\t\t<div class='M_SimpleListContentFake2'></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>` ;\n\t\tthis.jEl = $(html) ;\n\t\tthis.container.append(this.jEl) ;\n\t\tif (!this.dynamic) this.jEl.find('.M_SimpleListContent').css('background-image','none') ;\n\n\t\tif (this.dynamic) {\n\t\t\tthis.jEl.scroll((evt)=> {\n\t\t\t\tM_.Utils.delay(()=> {\n\t\t\t\t\tvar diff = this.jEl.offset().top - this.jEl.find('.M_SimpleListContent').offset().top ;\n\t\t\t\t\tvar _skipPosition = Math.ceil(diff/this.lineHeight)-Math.ceil(this.loadLimit/4) ;\n\t\t\t\t\tif (_skipPosition<0) _skipPosition = 0 ;\n\t\t\t\t\tthis.store.reload(false, {skip:_skipPosition, limit:this.loadLimit}) ;\n\t\t\t\t}, 100, 'm_simplelist_scroll') ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\trender() {\n\t\t// log(\"render\")\n\t\tvar html = \"\",\n\t\t\tmid = this.store.primaryKey ;\n\t\tthis.store.each((model, indexTemp)=> {\n\t\t\t// log(\"cg_created\",model.get('cg_name'))\n\t\t\tvar val = \"\" ;\n\t\t\tif ($.isFunction(this.itemValue)) val = this.itemValue(model) ;\n\t\t\telse val = model.get(this.itemValue) ;\n\t\t\tvar clsTr = this.classItems ;\n\t\t\tif (this.oddEven) {\n\t\t\t\tif (indexTemp%2===0) clsTr += \" M_TableListOdd\" ;\n\t\t\t\telse clsTr += \" M_TableListEven\" ;\n\t\t\t}\n\t\t\thtml += \"<div class='\"+clsTr+\" M_Noselectable' data-m_id='\"+model.get(mid)+\"'>\"+val+\"</div>\" ;\n\t\t}) ;\n\t\tthis.jEl.find('.M_SimpleListContentReal').html(html) ;\n\n\n\n\t\t// this.jEl.find('.'+this.classItems).m_draggable() ;\n\n\t\t// $(\".\"+this.classItems).draggable({\n\t\t// \tcursor: \"move\",\n\t\t// \tcursorAt: { top: -12, left: -20 },\n\t\t// \thelper: function( event ) {\n\t\t// \t\treturn $( \"<div class='ui-widget-header' style='z-index:100000;'>I'm a custom helper</div>\" );\n\t\t// \t}\n\t\t// });\n\n\t\tif (this.dynamic) {\n\t\t\tvar totalHeight = this.lineHeight*this.store.countTotal() ;\n\t\t\tthis.jEl.find('.M_SimpleListContent').height(totalHeight) ;\n\t\t\tthis.jEl.find('.M_SimpleListContentFake1').height(this.store.skip*this.lineHeight) ;\n\t\t}\n\t\t// this.jEl.find('.M_SimpleListContentFake2').height(totalHeight - ((this._skipPosition+100)*this.lineHeight)) ;\n\n\t\tthis.jEl.find(\".\"+this.classItems).on('mousedown', (evt)=> {\n\t\t\t// log(\"this.currentSelection\",this.currentSelection)\n\t\t\tvar item = $(evt.target).closest('.'+this.classItems) ;\n\t\t\tvar m_id = item.attr('data-m_id') ;\n\t\t\tvar model = this.store.getRow(m_id) ;\n\n\t\t\tif (this.trigger('beforeClickItem', this, m_id, model, evt)===false) return ;\n\n\t\t\tvar ok = true, dontremoveselection=false ;\n\t\t\tif (this.multipleSelection) {\n\t\t\t\tif ((M_.Utils.isMacos && evt.metaKey) || evt.ctrlKey) {\n\t\t\t\t\t// evt.preventDefault() ;\n\t\t\t\t\t// evt.stopPropagation() ;\n\t\t\t\t\tif (item.hasClass('selected')) ok = false ;\n\t\t\t\t} else if (evt.shiftKey) {\n\t\t\t\t\tdontremoveselection=true ;\n\t\t\t\t\tvar lastIndex = this.store.getIndexById(this._lastSelection) ;\n\t\t\t\t\tvar currentIndex = this.store.getIndexById(m_id) ;\n\t\t\t\t\tvar min = Math.min(lastIndex, currentIndex) ;\n\t\t\t\t\tvar max = Math.max(lastIndex, currentIndex) ;\n\t\t\t\t\t// var r =\n\t\t\t\t\tthis.store.each((row, i)=> {\n\t\t\t\t\t\tif (i>=min && i<=max) {\n\t\t\t\t\t\t\tvar m_idTemp = row.getId() ;\n\t\t\t\t\t\t\tthis.jEl.find('.'+this.classItems+'[data-m_id=\"'+m_idTemp+'\"]').addClass('selected') ;\n\t\t\t\t\t\t\tif (this.currentSelection.indexOf(m_idTemp)==-1) this.currentSelection.push(m_idTemp) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}) ;\n\t\t\t\t} else {\n\t\t\t\t\tif (!item.hasClass('selected')) {\n\t\t\t\t\t\tthis.jEl.find('.'+this.classItems).removeClass('selected') ;\n\t\t\t\t\t\tthis.currentSelection = [] ;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdontremoveselection=true ;\n\t\t\t\t\t\tok = false ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.jEl.find('.'+this.classItems).removeClass('selected') ;\n\t\t\t\tthis.currentSelection = [] ;\n\t\t\t}\n\t\t\tif (ok) {\n\t\t\t\titem.addClass('selected') ;\n\t\t\t\tthis.trigger('clickItem', this, m_id, model, evt) ;\n\t\t\t\tthis._lastSelection = m_id ;\n\t\t\t\tif (this.currentSelection.indexOf(m_id)==-1) this.currentSelection.push(m_id) ;\n\t\t\t} else {\n\t\t\t\tif (!dontremoveselection) {\n\t\t\t\t\titem.removeClass('selected') ;\n\t\t\t\t\tthis.currentSelection.m_remove(m_id) ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// log(\"this.currentSelection\",this.currentSelection)\n\n\n\t\t\tif (this.itemsDraggableTo) {\n\t\t\t\t// this.jEl.on('mousedown', (evt)=> {\n\t\t\t\t// \t// evt.preventDefault() ;\n\t\t\t\t// \t// evt.stopPropagation() ;\n\t\t\t\t$(document).on('mousemove', $.proxy(this.moveViewable, this)) ;\n\t\t\t\t// }) ;\n\t\t\t\t$(document).on('mouseup', (evt)=> {\n\t\t\t\t\t// log(\"this.viewable\",this.viewable)\n\t\t\t\t\tif (this.viewable) this.viewable.remove() ;\n\t\t\t\t\t$(document).off('mousemove', $.proxy(this.moveViewable, this)) ;\n\t\t\t\t\t$(document).off('mouseenter', this.itemsDraggableTo, $.proxy(this.enterViewable, this)) ;\n\t\t\t\t\t$(document).off('mouseleave', this.itemsDraggableTo, $.proxy(this.leaveViewable, this)) ;\n\t\t\t\t\tvar elTemp = $(this.itemsDraggableTo+\".over\") ;\n\t\t\t\t\tif (elTemp.length) {\n\t\t\t\t\t\tthis.trigger('droped', elTemp, elTemp.attr('data-m_id'), this.getSelection()) ;\n\t\t\t\t\t\t$(this.itemsDraggableTo).removeClass('over') ;\n\t\t\t\t\t}\n\t\t\t\t\tthis._dragStarted = false ;\n\t\t\t\t}) ;\n\t\t\t\t$(document).on('mouseenter', this.itemsDraggableTo, $.proxy(this.enterViewable, this)) ;\n\t\t\t\t$(document).on('mouseleave', this.itemsDraggableTo, $.proxy(this.leaveViewable, this)) ;\n\t\t\t\t//  (evt)=> {\n\t\t\t\t// \tlog(\"evt.target\", $(evt.target))\n\t\t\t\t// }) ;\n\t\t\t}\n\t\t}) ;\n\n\n\t\t// $( \"#contacts_list_contacts .M_SimpleListContentReal\" ).selectable();\n\t\t// this.jEl.find('.M_SimpleListContentReal').selectable();\n\t\t// this.jEl.find('.M_SimpleListContentReal').draggable();\n\t\tthis.setSelection(this.currentSelection) ;\n\t\tthis.trigger('render', this) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tleaveViewable(evt) {\n\t\t$(evt.target).removeClass('over') ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tenterViewable(evt) {\n\t\t// log(\"evt.target\", $(evt.target))\n\t\t// $(this.itemsDraggableTo).removeClass('over') ;\n\t\t$(evt.target).addClass('over') ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tmoveViewable(evt) {\n\t\tevt.preventDefault() ;\n\t\t// log(\"this._dragStarted\",this._dragStarted)\n\t\tif (!this._dragStarted) {\n\t\t\tvar sel = this.getSelection() ;\n\t\t\tthis.viewable = $(\"<div style='width:20px; height:20px; position:relative; z-index:100000;'><div class='M_Badge' style='right:-30px;'>\"+sel.length+\"</div><span class='fa fa-group' style='font-size:30px;'></span></div>\") ;\n\t\t\t$(\"body\").append(this.viewable) ;\n\t\t}\n\t\tthis.viewable.offset({top:evt.pageY, left:evt.pageX+30}) ;\n\t\tthis._dragStarted = true ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetSelection(m_id) {\n\t\t// log(\"setSelection\",m_id)\n\t\t// if (!m_id) return ;\n\t\tif (!$.isArray(m_id)) m_id = [m_id] ;\n\t\tif (!this.multipleSelection) this.jEl.find('.'+this.classItems).removeClass('selected') ;\n\t\tvar goodItem = [] ;\n\t\tfor(var i=0 ; i<m_id.length ; i++) {\n\t\t\t// log(\"m_id[i]\",m_id[i])\n\t\t\tgoodItem = this.jEl.find('.'+this.classItems+'[data-m_id=\"'+m_id[i]+'\"]') ;\n\t\t\tgoodItem.addClass('selected') ;\n\t\t}\n\t\t// this.currentSelection = m_id ;\n\t\tif (this.selectionVisible && goodItem.length) {\n\t\t\tvar posYRow = goodItem.position().top ;\n\t\t\tvar posYParent = goodItem.parent().position().top ;\n\t\t\t// log(posYRow, posYParent)\n\t\t\tvar goodContainer = goodItem.closest('.M_SimpleList') ;\n\t\t\t// log('goodContainer.scrollTop()',goodContainer.scrollTop())\n\t\t\tif (1*(posYRow-posYParent)<goodContainer.scrollTop() || 1*(posYRow-posYParent)>goodContainer.scrollTop()+goodContainer.height()-goodItem.height()-30) {\n\t\t\t\tgoodItem.closest('.M_SimpleList').animate({\n\t\t\t\t\tscrollTop: 1*(posYRow-posYParent)-goodContainer.height()/3\n\t\t\t\t}, 'slow');\n\t\t\t}\n\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetSelection() {\n\t\tvar tabSelection = [] ;\n\t\t// log(\"this.currentSelection\",this.currentSelection)\n\t\tfor(var i=0 ; i<this.currentSelection.length ; i++) {\n\t\t\tvar model = this.store.getRow(this.currentSelection[i]) ;\n\t\t\ttabSelection.push(model) ;\n\t\t}\n\t\treturn tabSelection ;\n\t}\n};\n\n/**\n * A multi columns list, a table\n * @class\n * @memberof! <global>\n * @extends M_.SimpleList\n * @property {type} colsDef\n * @property {type} classHeader\n * @property {type} classItems\n * @property {type} styleTable\n * @property {type} fullHeight\n * @property {type} oddEven\n * @property {type} limitRows\n * @property {type} moreText\n * @property {type} lessText\n * @property {type} withMouseOverRaw\n */\nM_.TableList = class extends M_.SimpleList {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tcolsDef: null,\n\t\t\tclassHeader: 'M_TableListHeader',\n\t\t\tclassItems: 'M_TableListItem',\n\t\t\tstyleTable: '',\n\t\t\tfullHeight: true,\n\t\t\tlimitRows: 0,\n\t\t\tmoreText: \"%n lignes de plus\",\n\t\t\tlessText: \"Masquer les lignes supplmentaires\",\n\t\t\twithMouseOverRaw: true,\n\t\t\theaderHeight: 30,\n\t\t\t_colsToHide: []\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tvar html = \"\", cls = \"\" ;\n\t\tif (this.fullHeight) cls += \"M_FullHeight\" ;\n\t\tif (this.withMouseOverRaw) cls += \" M_TableListOverRaw\" ;\n\t\tthis._idMore = M_.Utils.id() ;\n\n\t\thtml += `<div class='M_TableList ${cls}' style='${this.styleTable}'>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t\t\t<thead></thead>\n\t\t\t\t\t\t\t<tbody></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"M_AlignRight\"><a id=\"${this._idMore}\" href='javascript:void(0);'>${this.getMoreText()}</a></div>\n\t\t\t\t</div>` ;\n\t\tthis.jEl = $(html) ;\n\t\tthis.container.append(this.jEl) ;\n\t\tthis.jEl.css('padding-top', this.headerHeight) ;\n\n\t\tthis._limitRows = true ;\n\t\tif (this.limitRows) {\n\t\t\t$(\"#\"+this._idMore).parent().show() ;\n\t\t\tthis._limitRows = true ;\n\t\t} else {\n\t\t\t$(\"#\"+this._idMore).parent().hide() ;\n\t\t\tthis._limitRows = false ;\n\t\t}\n\t\t$(\"#\"+this._idMore).click(()=> {\n\t\t\t// console.log(\"click\");\n\t\t\tthis._limitRows = !this._limitRows ;\n\t\t\tthis.render() ;\n\t\t}) ;\n\n\t}\n\t_setMoreLessText() {\n\t\tif (this.limitRows) {\n\t\t\tif (this._limitRows) {\n\t\t\t\t$(\"#\"+this._idMore).html(this.getMoreText()) ;\n\t\t\t} else {\n\t\t\t\t$(\"#\"+this._idMore).html(this.getLessText()) ;\n\t\t\t}\n\t\t\tif (this._getNbRowsLimited()>0) $(\"#\"+this._idMore).show() ;\n\t\t\telse $(\"#\"+this._idMore).hide() ;\n\t\t}\n\t}\n\t_getNbRowsLimited() {\n\t\treturn this.store.count()-this.limitRows ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetMoreText() {\n\t\tvar val = this.moreText ;\n\t\tval = val.replace(/%n/,this._getNbRowsLimited()) ;\n\t\treturn val ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetLessText() {\n\t\tvar val = this.lessText ;\n\t\tval = val.replace(/%n/,this._getNbRowsLimited()) ;\n\t\treturn val ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\trender() {\n\t\tvar html = \"\",\n\t\t\tmid = this.store.primaryKey,\n\t\t\tcolsDef = this.colsDef ;\n\t\thtml += \"<tr>\" ;\n\t\tfor(var i=0 ; i<colsDef.length ; i++) {\n\t\t\tlet cls = this.classHeader+\" M_Noselectable\" ;\n\t\t\tlet style = \"\" ;\n\t\t\tif (colsDef[i].align && colsDef[i].align=='right') cls += \" M_AlignRight\" ;\n\t\t\tif (colsDef[i].align && colsDef[i].align=='center') cls += \" M_AlignCenter\" ;\n\t\t\tif (colsDef[i].align && colsDef[i].align=='left') cls += \" M_AlignLeft\" ;\n\t\t\tif (!colsDef[i].align) cls += \" M_AlignLeft\" ;\n\t\t\tif (colsDef[i].width) {\n\t\t\t\tvar w = \"\" ;\n\t\t\t\tif ($.type(colsDef[i].width) === \"string\") w = colsDef[i].width ;\n\t\t\t\telse w = colsDef[i].width+\"px\" ;\n\t\t\t\tstyle += \"width:\"+w+\"; \" ;\n\t\t\t}\n\t\t\thtml += \"<th data-m-col='\"+i+\"' class='\"+cls+\"' style='\"+style+\"'>\"+colsDef[i].label ;\n\t\t\tif (this.fullHeight) html += \"<div style='\"+style+\"'>\"+colsDef[i].label+\"</div>\" ;\n\t\t\thtml += \"</th>\" ;\n\t\t}\n\t\thtml += \"</tr>\" ;\n\t\tthis.jEl.find('thead').empty().html(html) ;\n\n\n\t\thtml = \"\" ;\n\t\tthis.store.each((model, indexTemp)=> {\n\t\t\t// log(\"model\",model)\n\t\t\tif (this.limitRows && indexTemp>=this.limitRows && this._limitRows) return true ;\n\t\t\tvar clsTr = \"\" ;\n\t\t\tif (this.oddEven) {\n\t\t\t\tif (indexTemp%2===0) clsTr += \" M_TableListOdd\" ;\n\t\t\t\telse clsTr += \" M_TableListEven\" ;\n\t\t\t}\n\t\t\thtml += \"<tr class='\"+clsTr+\"'>\" ;\n\t\t\tfor(var i=0 ; i<colsDef.length ; i++) {\n\t\t\t\tlet val = \"\",\n\t\t\t\t\tcls = this.classItems+\" M_Noselectable\" ;\n\t\t\t\tif ($.isFunction(colsDef[i].val)) {\n\t\t\t\t\t// console.log(\"model\", model);\n\t\t\t\t\tval = colsDef[i].val(model) ;\n\t\t\t\t} else {\n\t\t\t\t\tif (model instanceof M_.Model) val = model.get(colsDef[i].val) ;\n\t\t\t\t\telse val = model[colsDef[i].val] ;\n\t\t\t\t}\n\t\t\t\tif (colsDef[i].align && colsDef[i].align=='right') cls += \" M_AlignRight\" ;\n\t\t\t\tif (colsDef[i].align && colsDef[i].align=='center') cls += \" M_AlignCenter\" ;\n\t\t\t\tif (colsDef[i].align && colsDef[i].align=='left') cls += \" M_AlignLeft\" ;\n\t\t\t\tlet datamid = \"\" ;\n\t\t\t\tif (model instanceof M_.Model) datamid = model.get(mid) ;\n\t\t\t\telse datamid = model[mid] ;\n\t\t\t\thtml += \"<td class='\"+cls+\"' data-m_id='\"+datamid+\"'>\"+val+\"</td>\" ;\n\t\t\t}\n\t\t\thtml += \"</tr>\" ;\n\t\t}) ;\n\t\tthis.jEl.find('tbody').empty().html(html) ;\n\n\n\t\tthis.jEl.find(\".\"+this.classHeader).on('click', (evt)=> {\n\t\t\t// console.log(\"evt\", evt);\n\t\t\t// this.store.sort()\n\t\t\tvar item = $(evt.target).closest('.'+this.classHeader) ;\n\t\t\tvar numcol = item.attr('data-m-col') ;\n\t\t\tvar colDef = this.colsDef[numcol] ;\n\t\t\tif (colDef) {\n\n\t\t\t\tlet direction = -1 ;\n\t\t\t\tif (colDef._sortDirection) direction = colDef._sortDirection ;\n\t\t\t\tdirection = direction*-1 ;\n\t\t\t\tcolDef._sortDirection = direction ;\n\t\t\t\t// console.log(\"colDef._sortDirection\", colDef._sortDirection);\n\n\t\t\t\tif (colDef.sort) this.store.sort(colDef.sort, direction) ;\n\t\t\t\telse this.store.sort(colDef.val, direction) ;\n\t\t\t\t// this.render() ;\n\t\t\t}\n\t\t}) ;\n\n\t\tthis.jEl.find(\".\"+this.classItems).on('click', (evt)=> {\n\t\t\t// log(\"dddddddddddddd\")\n\t\t\tvar item = $(evt.target).closest('.'+this.classItems) ;\n\t\t\tvar m_id = item.attr('data-m_id') ;\n\t\t\tvar model = this.store.getRow(m_id) ;\n\n\t\t\t// get num col\n\t\t\tvar col = item.index() ;\n\t\t\tvar row = item.parent().index() ;\n\n\t\t\tif (this.trigger('beforeClickItem', this, m_id, model, evt, col, row)===false) return ;\n\t\t\t// item.addClass('selected') ;\n\t\t\tthis.trigger('clickItem', this, m_id, model, evt, col, row) ;\n\t\t}) ;\n\t\t// this.jEl.find(\"tbody tr\").on('mouseover', (evt)=> {\n\t\t// }) ;\n\t\t// this.jEl.find(\"tbody tr\").on('mouseout', (evt)=> {\n\t\t// }) ;\n\n\t\tthis._setMoreLessText() ;\n\n\t\tthis.hideColumns(this._colsToHide) ;\n\n\t\tthis.trigger('render', this, this.jEl) ;\n\t}\n\tshowAllColumns() {\n\t\tthis._colsToHide = [] ;\n\t\t$(\"#\"+this.id).find('tr td').show() ;\n\t}\n\tshowColumns(cols) {\n\t\tif (!$.isArray(cols)) cols = [cols] ;\n\t\tthis._colsToHide = _.difference(this._colsToHide, cols) ;\n\t\t$(\"#\"+this.id).find('tr td').show() ;\n\t\t$(\"#\"+this.id).find('tr th').show() ;\n\t\tthis.hideColumns(this._colsToHide) ;\n\t}\n\thideColumns(cols) {\n\t\tif (!$.isArray(cols)) cols = [cols] ;\n\t\tthis._colsToHide = this._colsToHide.concat(cols) ;\n\t\tthis._colsToHide = _.uniq(this._colsToHide);\n\t\t// console.log(\"this._colsToHide\", this._colsToHide);\n\t\t_.each(this._colsToHide, (col)=> {\n\t\t\t$(\"#\"+this.id).find('tr td:nth-child('+col+')').hide() ;\n\t\t\t$(\"#\"+this.id).find('tr th:nth-child('+col+')').hide() ;\n\t\t}) ;\n\t}\n};\n\n\n\n/**\n * Implements this to get CRUD (get/post/put/delete) ajax requests\n * @interface\n * @memberof! <global>\n */\nM_.CRUD = {\n\t/**\n\t * @return {type}\n\t */\n\tinitCRUD() {\n\t\t// var defaults = {\n\t\t// \turl: \"\",\n\t\t// \targs: {},\n\t\t// \tmodel: null,\n\t\t// \tuseWebsocket: M_.App.useWebsocket\n\t\t// };\n\t\t// $.extend(this, defaults) ;\n\t},\n\t// onLoad: function(model) {},\n\t// onSave: function(data) {},\n\t// onDelete: function(data) {},\n\t/**\n\t * @param  {type}\n\t * @param  {Object}\n\t * @param  {Function}\n\t * @return {type}\n\t */\n\tload(id, args={}, callback=null) {\n\t\tthis._callbackFormLoaded = callback ;\n\t\t//this.callbackLoadRow = callback ;\n\t\tvar okArgs = {} ;\n\t\t//var okArgs = {action: 'get'} ;\n\t\t//okArgs[this.primaryKey] = id ;\n\t\t$.extend(okArgs, this.args, args) ;\n\t\tif (this.onBeforeLoad) this.onBeforeLoad() ;\n\t\tif (this.trigger(\"beforeLoad\", this, {url: this.url, args:okArgs})===false) return false ;\n\t\t//this.lastLoadArgs = okArgs ;\n\t\tvar url = this.url ;\n\t\tif (id) url += \"/\"+id ;\n\t\t// alert(\"this.useWebsocket\",this.useWebsocket)\n\t\tif (this.useWebsocket) {\n\t\t\tio.socket.get(url, okArgs, (data, jwres)=> {\n\t\t\t\tthis._treatDataCrud(data, callback) ;\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.ajaxLoad) {\n\t\t\t\tthis.ajaxLoad.abort() ;\n\t\t\t\t// console.log(\"abord\");\n\t\t\t}\n\t\t\tthis.ajaxLoad = M_.Utils.getJson(url, okArgs, (data)=> {\n\t\t\t\tthis._treatDataCrud(data, callback) ;\n\t\t\t}) ;\n\t\t\t// this.ajaxLoad = $.ajax({\n\t\t\t// \turl: url,\n\t\t\t// \ttype: 'GET',\n\t\t\t// \t//contentType: 'application/json',\n\t\t\t// \tdata: okArgs,\n\t\t\t// \tdataType: 'json',\n\t\t\t// \tsuccess: (data)=> {\n\t\t\t// \t\tthis._treatDataCrud(data, callback) ;\n\t\t\t// \t}\n\t\t\t// });\n\t\t}\n\t},\n\t_treatDataCrud(data, callback) {\n\t\t// log(\"_treatDataCrud\",data)\n\t\tvar row = null ;\n\t\tif (data && data.data) row = data.data ;\n\t\telse row = data ;\n\t\tthis.trigger(\"loadraw\", this, row);\n\t\tif (this.processData) this.processData(row) ;\n\t\tvar m ;\n\t\tif (this.model) {\n\t\t\tm = new this.model({row:row}) ;\n\t\t} else {\n\t\t\tm = row ;\n\t\t}\n\t\tthis.dataLoaded = m ;\n\t\tif (this.onLoad) this.onLoad(m) ;\n\t\tthis.trigger(\"load\", this, m);\n\t\tif (callback) callback(m) ;\n\t},\n\t/**\n\t * @param  {type}\n\t * @param  {Object}\n\t * @param  {Function}\n\t * @return {type}\n\t */\n\tsave(modelOrData=null, args={}, callback=null) {\n\t\tthis._callbackFormSaved = callback ;\n\t\t// if (this.validAndAlert()) {\n\t\t\t// log(\"modelOrData\",modelOrData)\n\t\t\tthis._isForm = false ;\n\t\t\tif (!modelOrData) {\n\t\t\t\tmodelOrData = this.getValues(true) ;\n\t\t\t\tthis._isForm = true ;\n\t\t\t}\n\t\t\t// log(\"modelOrData\", modelOrData)\n\t\t\tvar data = modelOrData ;\n\t\t\tvar key ;\n\t\t\tif (data instanceof M_.Model) {\n\t\t\t\tdata = data.getArray() ;\n\t\t\t}\n\t\t\t// log(\"data\",data)\n\t\t\t// log(\"data\", data)\n\t\t\tfor(key in data) {\n\t\t\t\t// if (data[key] && data[key].toDate && data[key].toDate() instanceof Date) {\n\t\t\t\tif (moment.isMoment(data[key])) {\n\t\t\t\t\tdata[key] = data[key].toISOString() ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// log(\"data\", data)\n\t\t\tvar okArgs = {action: 'save'} ;\n\t\t\t$.extend(okArgs, this.args, args, data) ;\n\t\t\tif (this.trigger(\"beforeSave\", this, {url: this.url, args:okArgs})===false) return false ;\n\t\t\t// log(\"okArgs\",okArgs);\n\n\t\t\t/*var fields=this.fields ;\n\t\t\tfor(var j=0 ; j<fields.length ; j++) {\n\t\t\t\tif (fields[j].type=='date') {\n\t\t\t\t\tthis.row[fields[j].name] = M_.Utils.formatDate(this.row[fields[j].name], 'Y-m-d H:i:s') ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$.extend(okArgs, this.row) ;\n\t\t\t$.extend(okArgs, this.args, args) ;\n\t\t\tif (this.trigger(\"beforeLoad\", this, {url: this.url, args:okArgs})===false) return false ;\n\t\t\tthis.lastLoadArgs = okArgs ;\n\t\t\t*/\n\t\t\tvar method = 'POST' ;\n\t\t\tvar moreUrl = '' ;\n\t\t\tif (this.model) {\n\t\t\t\tvar modelTemp = new this.model({row:{}}) ;\n\t\t\t\tif (!_.isEmpty(okArgs[modelTemp.primaryKey])) {\n\t\t\t\t\tmethod = 'PUT' ;\n\t\t\t\t\tmoreUrl = '/'+okArgs[modelTemp.primaryKey] ;\n\t\t\t\t}\n\t\t\t\t// log(\"this.model.primaryKey\",modelTemp.primaryKey,okArgs)\n\t\t\t}\n\t\t\t// return ;\n\t\t\t// var formData = new FormData() ;\n\t\t\t// for(key in okArgs) {\n\t\t\t// \tformData.append(key, okArgs[key]) ;\n\t\t\t// }\n\n\t\t\tM_.Utils.ajaxJson(this.url+moreUrl, okArgs, method, (data)=> {\n\t\t\t\t// log(\"dataaaaa\",data)\n\t\t\t\tif (data.error) {\n\t\t\t\t\tlet errTxt = \"\" ;\n\t\t\t\t\tif (data.error==\"E_VALIDATION\") {\n\t\t\t\t\t\t_.each(data.invalidAttributes, (attr, key)=> {\n\t\t\t\t\t\t\terrTxt += key+\" : \" ;\n\t\t\t\t\t\t\t_.each(attr, (msg)=> {\n\t\t\t\t\t\t\t\terrTxt += msg.message ;\n\t\t\t\t\t\t\t}) ;\n\t\t\t\t\t\t\terrTxt += \"\\n\" ;\n\t\t\t\t\t\t}) ;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.informValidReturnSails) this.informValidReturnSails(data) ;\n\t\t\t\t\tthis.trigger(\"error\", this, data, errTxt);\n\t\t\t\t} else {\n\t\t\t\t\tthis.trigger(\"save\", this, data);\n\t\t\t\t\tif (this._callbackFormSaved) this._callbackFormSaved(data) ;\n\t\t\t\t}\n\t\t\t}) ;\n\n\t\t\t// $.ajax({\n\t\t\t// \turl: this.url+moreUrl,\n\t\t\t// \ttype: method,\n\t\t\t// \t//headers: {Connection: close},\n\t\t\t// \tdata: JSON.stringify(okArgs),\n\t\t\t// \tcontentType: 'application/json',\n\t\t\t// \tprocessData: false,\n\t\t\t// \tdataType: 'json',\n\t\t\t// \tcache: false,\n\t\t\t// \tsuccess: (data)=> {\n\t\t\t// \t\t//&this.trigger(\"saved\", data);\n\t\t\t// \t\tthis.trigger(\"save\", this, data);\n\t\t\t// \t\tif (this._callbackFormSaved) this._callbackFormSaved(data) ;\n\t\t\t// \t}\n\t\t\t// });\n\t\t// }\n\t},\n\t/**\n\t * @param  {type}\n\t * @param  {Object}\n\t * @param  {Function}\n\t * @return {type}\n\t */\n\tdelete(id, args={}, callback=null) {\n\t\tthis._callbackFormDelete = callback ;\n\t\tvar okArgs = {} ;\n\t\t$.extend(okArgs, this.args, args) ;\n\t\tif (this.trigger(\"beforeDelete\", this, {url: this.url, args:okArgs})===false) return false ;\n\t\tM_.Utils.deleteJson(this.url+\"/\"+id, okArgs, (data)=> {\n\t\t\tthis.trigger(\"delete\", this, data);\n\t\t\tif (this._callbackFormDelete) this._callbackFormDelete(data) ;\n\t\t}) ;\n\t\t// $.ajax({\n\t\t// \turl: this.url+\"/\"+id,\n\t\t// \ttype: 'DELETE',\n\t\t// \t//contentType: 'application/json',\n\t\t// \tdata: okArgs,\n\t\t// \tdataType: 'json',\n\t\t// \tsuccess: (data)=> {\n\t\t// \t\tthis.trigger(\"delete\", this, data);\n\t\t// \t\tif (this._callbackFormDelete) this._callbackFormDelete(data) ;\n\t\t// \t}\n\t\t// });\n\t}\n};\n\n\n\n\n/**\n * To do\n * @class\n * @memberof! <global>\n * @extends M_.SimpleList\n * @implements M_.Observable\n * @property {type} jEl\n * @property {type} alignTo\n * @property {type} position\n * @property {type} height\n * @property {type} width\n * @property {type} speed\n * @property {type} visible\n * @property {type} floating\n */\nM_.Drawer = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tjEl: null,\n\t\t\talignTo: null,\n\t\t\tposition: 'bottom',\n\t\t\theight: 45,\n\t\t\twidth: 45,\n\t\t\tspeed: 300,\n\t\t\tvisible: false,\n\t\t\tfloating: true\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\t\t$(window).resize(()=>{\n\t\t\tif (this.tsResize) window.clearTimeout(this.tsResize) ;\n\t\t\tthis.tsResize = window.setTimeout(()=> {\n\t\t\t\tif (this.floating) this.showOrHide(this.visible, false) ;\n\t\t\t}, 100) ;\n\t\t}) ;\n\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisVisible() {\n\t\treturn this.visible ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshow() {\n\t\tif (this.visible) return ;\n\t\tif (this.trigger('beforeShow', this)===false) return ;\n\t\tthis.showOrHide(true) ;\n\t\tthis.trigger('show', this) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\thide() {\n\t\tif (!this.visible) return ;\n\t\tif (this.trigger('beforeHide', this)===false) return ;\n\t\tthis.showOrHide(false) ;\n\t\tthis.trigger('hide', this) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tshowOrHide(ok, anim=true) {\n\t\tvar top, left, topStart, leftStart ;\n\t\tthis.jEl.outerWidth(this.width) ;\n\t\tthis.jEl.outerHeight(this.height) ;\n\n\t\tif (!this.floating && !ok) {\n\t\t\tthis.alignTo.height(\"100%\") ;\n\t\t}\n\t\tthis.jEl.css('position', 'absolute') ;\n\n\t\tif (this.position=='bottom') {\n\t\t\tthis.jEl.outerWidth(this.alignTo.outerWidth()) ;\n\t\t\ttop = this.alignTo.offset().top+this.alignTo.outerHeight()-this.jEl.outerHeight() ;\n\t\t\tleft = this.alignTo.offset().left ;\n\t\t\ttopStart = top+this.jEl.outerHeight() ;\n\t\t\tleftStart = left ;\n\t\t}\n\t\tif (this.position=='top') {\n\t\t\tthis.jEl.outerWidth(this.alignTo.outerWidth()) ;\n\t\t\ttop = this.alignTo.offset().top ;\n\t\t\tleft = this.alignTo.offset().left ;\n\t\t\ttopStart = top-this.jEl.outerHeight() ;\n\t\t\tleftStart = left ;\n\t\t}\n\t\tif (this.position=='left') {\n\t\t\tthis.jEl.outerHeight(this.alignTo.outerHeight()) ;\n\t\t\ttop = this.alignTo.offset().top ;\n\t\t\tleft = this.alignTo.offset().left ;\n\t\t\ttopStart = top ;\n\t\t\tleftStart = left-this.jEl.outerWidth() ;\n\t\t}\n\t\tif (this.position=='right') {\n\t\t\tthis.jEl.outerHeight(this.alignTo.outerHeight()) ;\n\t\t\ttop = this.alignTo.offset().top ;\n\t\t\tleft = this.alignTo.offset().left+this.alignTo.outerWidth()-this.jEl.outerWidth() ;\n\t\t\ttopStart = top ;\n\t\t\tleftStart = left-this.jEl.outerWidth() ;\n\t\t}\n\t\tif (anim) {\n\t\t\tif (ok) {\n\t\t\t\tthis.jEl.show().offset({top:topStart, left:leftStart}).transition({top, left}, M_.Utils.getSpeedAnim(), ()=> {\n\t\t\t\t\t// log(\"finis\")\n\t\t\t\t}) ;\n\t\t\t} else {\n\t\t\t\tthis.jEl.offset({top, left}).transition({top:topStart, left:leftStart}, M_.Utils.getSpeedAnim()) ;\n\t\t\t}\n\t\t\t// if (ok) {\n\t\t\t// \tthis.jEl.addClass('M_TransitionNone')\n\t\t\t// \t\t\t.show()\n\t\t\t// \t\t\t.offset({top:topStart, left:leftStart}) ;\n\t\t\t// \tthis.jEl[0].offsetHeight;\n\t\t\t// \tthis.jEl.removeClass('M_TransitionNone')\n\t\t\t// \t\t\t.offset({top, left}) ;\n\t\t\t// \tthis.jEl.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',()=> {\n\t\t\t// \t\tthis.jEl.off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd') ;\n\t\t\t// \t}) ;\n\t\t\t// } else {\n\t\t\t// \tthis.jEl.addClass('M_TransitionNone')\n\t\t\t// \t\t\t.offset({top, left}) ;\n\t\t\t// \tthis.jEl[0].offsetHeight;\n\t\t\t// \tthis.jEl.removeClass('M_TransitionNone')\n\t\t\t// \t\t\t.offset({top:topStart, left:leftStart}) ;\n\t\t\t// \tthis.jEl.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',()=> {\n\t\t\t// \t\tthis.jEl.off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd') ;\n\t\t\t// \t\tthis.jEl.hide() ;\n\t\t\t// \t}) ;\n\t\t\t// }\n\t\t\t// if (ok) {\n\t\t\t// \tthis.jEl.offset({top:topStart, left:leftStart}).animate({\n\t\t\t// \t\ttop, left\n\t\t\t// \t}, this.speed, ()=> {\n\t\t\t// \t\tif (!this.floating) this.jEl.css('position', 'static') ;\n\t\t\t// \t}) ;\n\t\t\t// } else {\n\t\t\t// \tthis.jEl.offset({top, left}).animate({\n\t\t\t// \t\ttop:topStart, left:leftStart\n\t\t\t// \t}, this.speed, ()=> {\n\t\t\t// \t}) ;\n\t\t\t// }\n\t\t} else {\n\t\t\tif (ok) this.jEl.offset({top, left}) ;\n\t\t\telse this.jEl.offset({top:topStart, left:leftStart}) ;\n\t\t}\n\n\t\tif (!this.floating && ok) {\n\t\t\tthis.alignTo.height(\"calc(100% - \"+this.height+\"px)\") ;\n\t\t}\n\n\t\tthis.visible = ok ;\n\t}\n\n};\n\n/**\n * Display a background on html document\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @property {type} visible\n * @property {type} focusOn\n * @property {type} clickHide\n * @property {type} alpha\n * @property {type} zindex\n */\nM_.Modal = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tvisible: false,\n\t\t\tfocusOn: false,\n\t\t\tclickHide: false,\n\t\t\talpha: 0.5,\n\t\t\tzindex: 500,\n\t\t\tisLoading: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\t\t$(window).resize(()=>{\n\t\t\tif (this.tsResize) window.clearTimeout(this.tsResize) ;\n\t\t\tthis.tsResize = window.setTimeout(()=> {\n\t\t\t\tthis.showOrHide(this.visible, false) ;\n\t\t\t}, 100) ;\n\t\t}) ;\n\n\t\tif (this.focusOn) {\n\t\t\tthis.jEl1 = $(\"<div class='M_Modal'></div>\") ;\n\t\t\t$(\"body\").append(this.jEl1) ;\n\t\t\tthis.jEl2 = $(\"<div class='M_Modal'></div>\") ;\n\t\t\t$(\"body\").append(this.jEl2) ;\n\t\t\tthis.jEl3 = $(\"<div class='M_Modal'></div>\") ;\n\t\t\t$(\"body\").append(this.jEl3) ;\n\t\t\tthis.jEl4 = $(\"<div class='M_Modal'></div>\") ;\n\t\t\t$(\"body\").append(this.jEl4) ;\n\t\t\tif (this.clickHide) {\n\t\t\t\tthis.jEl1.click(()=> { this.hide() ; }) ;\n\t\t\t\tthis.jEl2.click(()=> { this.hide() ; }) ;\n\t\t\t\tthis.jEl3.click(()=> { this.hide() ; }) ;\n\t\t\t\tthis.jEl4.click(()=> { this.hide() ; }) ;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.jEl = $(\"<div class='M_Modal'></div>\") ;\n\t\t\t$(\"body\").append(this.jEl) ;\n\t\t\tif (this.clickHide) {\n\t\t\t\tthis.jEl.click(()=> {\n\t\t\t\t\tthis.hide() ;\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.isLoading) {\n\t\t\t\tthis.jEl.html(\"<div style='width:300px;margin:200px auto 0 auto; text-align:center;'><i style='font-size:100px;' class='fa fa-clock-o faa-spin animated'></i><br><h1 style='color:white;'>\"+this.isLoading+\"</h1></div>\") ;\n\t\t\t}\n\t\t}\n\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisVisible() {\n\t\treturn this.visible ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshow() {\n\t\tif (this.trigger('beforeShow', this)===false) return false ;\n\t\tthis.showOrHide(true) ;\n\t\tthis.trigger('show', this) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\thide() {\n\t\tif (this.trigger('beforeHide', this)===false) return false ;\n\t\tthis.showOrHide(false) ;\n\t\tthis.trigger('hide', this) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tshowOrHide(ok, anim=false) {\n\t\tvar speed = M_.Utils.getSpeedAnim() ;\n\t\tif (this.focusOn) {\n\t\t\tif (ok) {\n\t\t\t\tlet posTop1 = this.focusOn.offset().top ;\n\t\t\t\tlet posTop2 = this.focusOn.offset().top+this.focusOn.outerHeight() ;\n\t\t\t\tlet posTop3 = $(window).height() ;\n\t\t\t\tlet posLeft1 = this.focusOn.offset().left ;\n\t\t\t\tlet posLeft2 = this.focusOn.offset().left+this.focusOn.outerWidth() ;\n\t\t\t\tlet posLeft3 = $(window).width() ;\n\t\t\t\tthis.jEl1.css({'z-index':this.zindex, top:0, left:0, width:'100%', height:posTop1}).transition({opacity:this.alpha}, speed) ;\n\t\t\t\tthis.jEl2.css({'z-index':this.zindex, top:posTop1, left:0, width:posLeft1, height:posTop2-posTop1}).transition({opacity:this.alpha}, speed) ;\n\t\t\t\tthis.jEl3.css({'z-index':this.zindex, top:posTop1, left:posLeft2, width:posLeft3-posLeft2, height:posTop2-posTop1}).transition({opacity:this.alpha}, speed) ;\n\t\t\t\tthis.jEl4.css({'z-index':this.zindex, top:posTop2, left:0, width:'100%', height:posTop3-posTop2}).transition({opacity:this.alpha}, speed) ;\n\t\t\t} else {\n\t\t\t\tthis.jEl1.css({'z-index':this.zindex}).transition({opacity:0}, speed, ()=> {\n\t\t\t\t\tthis.jEl1.remove() ;\n\t\t\t\t\tthis.jEl2.remove() ;\n\t\t\t\t\tthis.jEl3.remove() ;\n\t\t\t\t\tthis.jEl4.remove() ;\n\t\t\t\t}) ;\n\t\t\t\tthis.jEl2.css({'z-index':this.zindex}).transition({opacity:0}, speed) ;\n\t\t\t\tthis.jEl3.css({'z-index':this.zindex}).transition({opacity:0}, speed) ;\n\t\t\t\tthis.jEl4.css({'z-index':this.zindex}).transition({opacity:0}, speed) ;\n\t\t\t}\n\t\t} else {\n\t\t\tif (ok) this.jEl.css({'z-index':this.zindex}).show().transition({opacity:this.alpha}, speed) ;\n\t\t\telse this.jEl.transition({opacity:0}, speed, ()=> {\n\t\t\t\tthis.jEl.remove() ;\n\t\t\t}) ;\n\t\t}\n\t\tthis.visible = ok ;\n\t}\n};\n\n/**\n * Display a window from a template\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @property {type} visible\n * @property {type} clickHide\n * @property {type} alpha\n * @property {type} zindex\n * @property {type} width\n * @property {type} maxWidth\n * @property {type} height\n * @property {type} html\n * @property {type} tpl\n * @property {type} tplData\n * @property {type} tplPartials\n * @property {type} cls\n * @property {type} modal\n * @property {type} animFrom\n * @property {type} top\n * @property {type} left\n * @property {type} position\n */\nM_.Window = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tvisible: false,\n\t\t\tclickHide: false,\n\t\t\talpha: 0.5,\n\t\t\tzindex: M_.Utils.getNextZIndex(),\n\t\t\twidth: 400,\n\t\t\tmaxWidth: 0,\n\t\t\theight: 'auto',\n\t\t\tminHeight: false,\n\t\t\thtml: null,\n\t\t\ttpl: null,\n\t\t\ttplData: {},\n\t\t\ttplPartials: {},\n\t\t\tcls: '',\n\t\t\tmodal: true,\n\t\t\tanimFrom: null,\n\t\t\ttop: 100,\n\t\t\tleft: 0,\n\t\t\tposition: 'center',\n\t\t\toffsetPositionRight: 20,\n\t\t\toffsetPositionLeft: 20,\n\t\t\toffsetPositionTop: 20,\n\t\t\toffsetPositionBottom: 20,\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\t\t$(window).resize(()=>{\n\t\t\tif (this.tsResize) window.clearTimeout(this.tsResize) ;\n\t\t\tthis.tsResize = window.setTimeout(()=> {\n\t\t\t\t// this.showOrHide(this.visible, false) ;\n\t\t\t}, 100) ;\n\t\t}) ;\n\n\t\tthis.create() ;\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tthis.jEl = $(\"<div class='M_Window'></div>\").hide() ;\n\t\t$(\"body\").append(this.jEl) ;\n\n\t\t// if (this.width=='auto') this.width = '100%' ;\n\n\t\tif (this.minHeight) this.jEl.css({\n\t\t\t'min-height': this.minHeight\n\t\t}) ;\n\n\t\tthis.jEl.css({\n\t\t\t'z-index': this.zindex,\n\t\t\twidth: this.width,\n\t\t\theight:this.height\n\t\t}) ;\n\n\t\tif (this.tpl) {\n\t\t\tthis.jEl.html(M_.App.renderMustache(this.tpl, this.tplData, this.tplPartials)) ;\n\t\t} else if (this.html) {\n\t\t\tthis.jEl.html(this.html) ;\n\t\t}\n\t}\n\n\t/**\n\t * Search a class or selector in the container, like $.find()\n\t * @param  {string} selector\n\t * @return {jQuery}\n\t */\n\tfindEl(selector) {\n\t\treturn this.jEl.find(selector) ;\n\t}\n\n\t/**\n\t * @return {Boolean}\n\t */\n\tisVisible() {\n\t\treturn this.visible ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tshow(anim=true) {\n\t\tif (this.trigger('beforeShow', this)===false) return false ;\n\t\tthis.showOrHide(true, anim) ;\n\t\tthis.trigger('show', this) ;\n\t\tM_.Window._lastWindow = this ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\thide(anim=true) {\n\t\tif (this.trigger('beforeHide', this)===false) return false ;\n\t\tthis.showOrHide(false, anim) ;\n\t\tthis.trigger('hide', this) ;\n\t\tM_.Window._lastWindow = null ;\n\t}\n\tmaximize() {\n\t\tthis.jEl.height($(window).height()-150) ;\n\t\tvar l = ($(window).width()-this.jEl.outerWidth())/2 ;\n\t\tvar t = 50 ;\n\t\tthis.jEl.css({\n\t\t\tleft: l,\n\t\t\ttop: t\n\t\t}) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcenter() {\n\t\tthis.jEl.height('auto') ;\n\t\tvar l = ($(window).width()-this.jEl.outerWidth())/2 ;\n\t\tvar t = ($(window).height()-this.jEl.outerHeight())/2 ;\n\t\t// console.log(\"$(window).height()\",$(window).height()-200,this.jEl.outerHeight());\n\t\tif (this.jEl.outerHeight()>$(window).height()-150) {\n\t\t\tthis.jEl.height($(window).height()-150) ;\n\t\t\t// console.log(\"setheigt\",$(window).height()-200);\n\t\t\t// t = ($(window).height()-this.jEl.height()-200)/2 ;\n\t\t\tt = 50 ;\n\t\t}\n\t\tthis.jEl.css({\n\t\t\tleft: l,\n\t\t\ttop: t\n\t\t}) ;\n\t\treturn this ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tshowOrHide(ok, anim=true) {\n\t\t// log(\"showOrHide\")\n\t\tvar speed = M_.Utils.getSpeedAnim() ;\n\t\tif (ok) {\n\t\t\tthis.zindex = M_.Utils.getNextZIndex() ;\n\t\t\tif (this.modal && !this.modalObj) {\n\t\t\t\tthis.modalObj = new M_.Modal({\n\t\t\t\t\tclickHide: this.clickHide,\n\t\t\t\t\talpha: this.alpha,\n\t\t\t\t\tzindex: this.zindex-1,\n\t\t\t\t\tlisteners: [\n\t\t\t\t\t\t['beforeHide', ()=> {\n\t\t\t\t\t\t\tif (this.trigger('beforeHide', this)===false) return false ;\n\t\t\t\t\t\t}]\n\t\t\t\t\t]\n\t\t\t\t}) ;\n\t\t\t\tthis.modalObj.show() ;\n\t\t\t}\n\t\t\t// this.jEl.height(this.height) ;\n\t\t\tvar l1 = this.left,\n\t\t\t\tl2 = this.left,\n\t\t\t\tt1 = this.top,\n\t\t\t\tt2 = this.top,\n\t\t\t\tw1 = this.width,\n\t\t\t\tw2 = this.width,\n\t\t\t\th1 = this.height,\n\t\t\t\th2 = this.height,\n\t\t\t\ts1 = 0.5,\n\t\t\t\ts2 = 1,\n\t\t\t\to1 = 0,\n\t\t\t\to2 = 1 ;\n\n\t\t\t// if (animFrom) {\n\t\t\t// \tt1 = animFrom.offset().top - $(window).scrollTop() ;\n\t\t\t// \tl1 = animFrom.offset().left ;\n\t\t\t// \t// w1 = animFrom.width() ;\n\t\t\t// \t// h1 = animFrom.height() ;\n\t\t\t// \tlog(\"t,l\",t1,l1, animFrom)\n\t\t\t// }\n\n\t\t\tthis.jEl\n\t\t\t.addClass(this.cls)\n\t\t\t.css({\n\t\t\t\tscale: 1,\n\t\t\t\topacity: 0,\n\t\t\t\t'z-index': this.zindex,\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: w1,\n\t\t\t\theight: h1\n\t\t\t})\n\t\t\t.show() ;\n\t\t\t// log(\"this.jEl.height()\",this.jEl.height(), $(window).height())\n\n\t\t\tif (this.maxWidth!==0) {\n\t\t\t\t// w1 = w2 = this.maxWidth ;\n\t\t\t\tthis.jEl.css({\n\t\t\t\t\t'max-width': this.maxWidth,\n\t\t\t\t}) ;\n\n\t\t\t}\n\t\t\tif (this.jEl.outerHeight()+100>$(window).height()) {\n\t\t\t\th1 = h2 = $(window).height()-100 ;\n\t\t\t}\n\t\t\tif (this.position=='center' || this.position=='top') {\n\t\t\t\tl1 = l2 = ($(window).width()-this.jEl.outerWidth())/2 ;\n\t\t\t\tif (h2=='auto') t1 = t2 = ($(window).height()-this.jEl.height())/2 ;\n\t\t\t\telse t1 = t2 = ($(window).height()-h2)/2 ;\n\t\t\t}\n\t\t\tif (this.position=='top') {\n\t\t\t\ts1 = 1 ;\n\t\t\t\to1 = 1 ;\n\t\t\t\tif (h2=='auto') {\n\t\t\t\t\tt1 = -1*this.jEl.height() - this.offsetPositionTop ;\n\t\t\t\t} else {\n\t\t\t\t\tt1 = h2 - 30 ;\n\t\t\t\t}\n\t\t\t\tt2 = this.offsetPositionTop ;\n\t\t\t}\n\t\t\tthis.jEl\n\t\t\t.addClass(this.cls)\n\t\t\t.css({scale:s1, opacity:o1, left:l1, top:t1, width:w1, height:h1})\n\t\t\t.show()\n\t\t\t.transition({scale:s2, opacity:o2, left:l2, top:t2, width:w2+1, height:h2}, speed, ()=> {\n\t\t\t\t// this.jEl.outerWidth(this.width+1);\n\t\t\t}) ;\n\t\t} else {\n\t\t\tthis.jEl.transition({scale:0.5, opacity:0}, speed, ()=> {\n\t\t\t\tthis.jEl.hide() ;\n\t\t\t}) ;\n\t\t\tif (this.modalObj) {\n\t\t\t\tthis.modalObj.hide() ;\n\t\t\t\tthis.modalObj = null ;\n\t\t\t}\n\t\t}\n\t\tthis.visible = ok ;\n\t}\n\tstatic _escapeButtonListener() {\n\t\tM_.Window._lastWindow = null ;\n\t\t$(document).keydown((evt)=> {\n\t\t\tif (evt.keyCode == 27) {\n\t\t\t\tif (M_.Window._lastWindow) {\n\t\t\t\t\tM_.Window._lastWindow.hide() ;\n\t\t\t\t}\n\t\t\t}\n\t\t}) ;\n\t}\n};\nM_.Window._escapeButtonListener() ;\n\n/**\n * Display a button\n * @class\n * @memberof! <global>\n * @extends M_.Outlet\n * @property {type} text\n * @property {type} cls\n * @property {type} handler\n */\nM_.Button = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\ttext: \"Save\",\n\t\t\tcls: \"primary\",\n\t\t\thandler: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tvar html = `<button class=\"M_Button ${this.cls}\" id=\"${this.id}\">${this.text}</button>` ;\n\t\tthis.jEl = $(html) ;\n\t\tthis.container.append(this.jEl) ;\n\t\tif (this.handler) this.jEl.click(this.handler) ;\n\t}\n};\n\n/**\n * Display a alert dialog window or a confirm dialog window\n * @memberof! <global>\n * @property {type} textButtonOk\n * @property {type} textButtonCancel\n */\nM_.Dialog = new (class {\n\tconstructor(opts) {\n\t\tthis.defaults = {\n\t\t\ttextButtonOk: \"OK\",\n\t\t\ttextButtonCancel: \"Annuler\",\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, this.defaults, opts) ;\n\n\n\t}\n\t_createTemplate(title, text, icon='fa-warning') {\n\t\tvar html = `<div style=\"overflow:auto; height:90%;\">\n\t\t\t\t\t\t<h1 style=\"line-height:22px;\">${title}</h1>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class='M_FloatLeft' style='width:25%'><span class='fa ${icon} M_IconBig'></span></div>\n\t\t\t\t\t\t\t<div class='M_FloatLeft' style='width:75%'>${text}</div>\n\t\t\t\t\t\t\t<div class='M_Clear'></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\treturn html ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {type}\n\t * @param  {type}\n\t * @return {type}\n\t */\n\talert(title, text, callbackOk) {\n\t\t// this.callbackOk = callbackOk ;\n\t\tvar html = this._createTemplate(title, text) ;\n\t\thtml += \t`<div class=\"M_margintop\">\n\t\t\t\t\t\t<div class='M_FloatRight'>\n\t\t\t\t\t\t\t<button type=\"button\" class='M_DialogOK M_Button primary'>${this.textButtonOk}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='M_Clear'></div>\n\t\t\t\t\t</div>` ;\n\t\tthis.win = new M_.Window({\n\t\t\thtml: html\n\t\t}) ;\n\t\tthis.win.show() ;\n\t\tthis.win.jEl.find('.M_DialogOK').click(()=> {\n\t\t\tif (callbackOk) callbackOk() ;\n\t\t\tthis.win.hide() ;\n\t\t}) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @param  {type}\n\t * @param  {type}\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tconfirm(title, text, callbackOk, callbackCancel) {\n\t\t// this.callbackOk = callbackOk ;\n\t\t// this.callbackCancel = callbackCancel ;\n\t\tvar html = this._createTemplate(title, text) ;\n\t\thtml += \t`<div class=\"M_margintop\">\n\t\t\t\t\t\t<div class='M_FloatRight'>\n\t\t\t\t\t\t\t<button type=\"button\" class='M_DialogOK M_Button primary'>${this.textButtonOk}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='M_FloatRight'>\n\t\t\t\t\t\t\t<button type=\"button\" class='M_DialogCancel M_ModalCancel M_Button'>${this.textButtonCancel}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='M_Clear'></div>\n\t\t\t\t\t</div>` ;\n\t\tthis.win = new M_.Window({\n\t\t\thtml: html\n\t\t}) ;\n\t\tthis.win.show() ;\n\t\tthis.win.jEl.find('.M_DialogOK').click(()=> {\n\t\t\tif (callbackOk) callbackOk.apply(this) ;\n\t\t\tthis.win.hide() ;\n\t\t}) ;\n\t\tthis.win.jEl.find('.M_DialogCancel').click(()=> {\n\t\t\tif (callbackCancel) callbackCancel.apply(this) ;\n\t\t\tthis.win.hide() ;\n\t\t}) ;\n\t}\n\thide() {\n\t\tthis.win.hide() ;\n\t}\n\t/**\n\t * alert user\n\t * @param  {String} text\n\t * @param  {String} position\n\t * @param  {Number} time      number of milliseconds\n\t * @param  {Function} callbackClose\n\t */\n\tnotify(text, time=2000, position='top', callbackClose=null) {\n\t\tvar html = \"\" ;\n\t\thtml += \t`<div class=\"\">\n\t\t\t\t\t\t\t${text}\n\t\t\t\t\t\t</div>` ;\n\t\tthis.win = new M_.Window({\n\t\t\thtml: html,\n\t\t\tmodal: false,\n\t\t\tposition: 'top'\n\t\t}) ;\n\t\tthis.win.jEl.click(()=> {\n\t\t\tthis.win.hide() ;\n\t\t}) ;\n\t\twindow.setTimeout(()=> {\n\t\t\tif (callbackClose) callbackClose() ;\n\t\t\tthis.win.hide() ;\n\t\t}, time) ;\n\t\tthis.win.show() ;\n\n\t}\n})() ;\n\n\n/**\n * Create a dropdown\n * @class\n * @memberof! <global>\n * @extends M_.Outlet\n * @property {type} destroyOnHide\n * @property {type} alignTo\n * @property {type} offsetTop\n * @property {type} offsetLeft\n * @property {type} container\n * @property {type} constraints\n * @property {type} autoSize\n * @property {type} autoShow\n * @property {type} items\n * @property {type} html\n * @property {type} alwaysDropdownBelow\n */\nM_.Dropdown = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tdestroyOnHide: true,\n\t\t\t_visible: false,\n\t\t\talignTo: null,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 0,\n\t\t\tcontainer: 'body',\n\t\t\talwaysDropdownBelow: false,\n\t\t\tconstraints: $(window),\n\t\t\tautoSize: true,\n\t\t\tautoShow: false,\n\t\t\titems: [],\n\t\t\thtml: null,\n\t\t\titemsClass: '',\n\t\t\tdrawEachItem: null,\n\t\t\t// id: null,\n\t\t\t_items: [],\n\t\t\twidth: 0\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\n\t\t// this.create() ;\n\n\t}\n\tdrawItem(item, i, ul, items) {\n\t\tif (this.drawEachItem) return this.drawEachItem.call(this, item, i, ul, items) ;\n\t\tif (!item.text || item.text=='_m_separation') {\n\t\t\tul.append($(`<li class=\"M_DropdownSeparation\"></li>`)) ;\n\t\t\treturn ;\n\t\t}\n\t\tvar more = \"\" ;\n\t\tif (item.disabled) more += \" disabled\" ;\n\t\tif (this.itemsClass) more += \" \"+this.itemsClass ;\n\t\tif (item.cls) more += \" \"+item.cls ;\n\t\tvar htmlItem = `<li class=\"M_DropdownMenu ${more}\">${item.text}</li>` ;\n\t\tvar jElItem = $(htmlItem) ;\n\t\t// jElItem.data('indexitem', i) ;\n\t\tul.append(jElItem) ;\n\t\tif (item.click && !item.disabled) {\n\t\t\tjElItem.click({fn:item}, (evt)=> {\n\t\t\t\t// var el = $(evt.target).closest('.M_DropdownMenu') ;\n\t\t\t\tevt.data.fn.click(evt, evt.data.fn) ;\n\t\t\t\tthis.hide() ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * @function setItems\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @param {type}\n\t */\n\tsetItems(items) {\n\t\tthis.jEl.empty() ;\n\t\tthis.jEl.height('auto') ;\n\t\t// log(\"setItems\",this.jEl)\n\t\tif (items.length) {\n\t\t\tvar ul = $(\"<ul>\") ;\n\t\t\tthis.jEl.append(ul) ;\n\t\t\tfor(var i=0 ; i<items.length ; i++) {\n\t\t\t\tthis.drawItem(items[i], i, ul, items) ;\n\t\t\t}\n\t\t\tthis._setPosition() ;\n\t\t}\n\t}\n\t/**\n\t * @function create\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {type}\n\t */\n\tcreate() {\n\t\t// console.log(\"create\");\n\t\tvar html = `<div class=\"M_Relative\"><div id=\"${this.id}\" class=\"M_Dropdown\"></div></div>` ;\n\t\t// log(\"this.container\",this.container)\n\t\t$(this.container).append(html) ;\n\t\tthis.jEl = $(this.container).find(\".M_Dropdown\") ;\n\t\tthis.jEl.css('z-index', M_.Utils.getNextZIndex()) ;\n\t\tif (this.width>0) this.jEl.width(this.width) ;\n\n\t\tif (this.items.length) this.setItems(this.items) ;\n\t\telse if (this.html) this.jEl.html(this.html) ;\n\n\n\t\t// if (this.autoShow) this.show() ;\n\n\t\tthis.jEl.on('M_DropdownHide', (evt)=> {\n\t\t\t// log(\"M_DropdownHide\")\n\t\t\t// evt.stopPropagation() ;\n\t\t\tthis.hide() ;\n\t\t}) ;\n\t\t// this.jEl.on('M_DropdownShow', (evt)=> {\n\t\t// \t// evt.stopPropagation() ;\n\t\t// \tlog(\"show!!!\")\n\t\t// \tthis.show() ;\n\t\t// }) ;\n\n\t\t// log(\"ddd\",this.jEl)\n\t}\n\t/**\n\t * @function show\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {type}\n\t */\n\tshow() {\n\t\t// log(\"show\",this._visible)\n\t\t// var evt = $.Event('click') ;\n\t\t// evt.stopPropagation() ;\n\t\t// log(\"show\", this._visible, this.jEl)\n\t\t// window.event.stopPropagation();\n\t\t// M_.Dropdown.closeAllDropdown() ;\n\t\tif (this._visible) return ;\n\t\tif (this.trigger('beforeShow', this)===false) return false ;\n\t\tthis.showOrHide(true) ;\n\t\tthis.trigger('show', this) ;\n\t}\n\t/**\n\t * @function hide\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {type}\n\t */\n\thide() {\n\t\t// log(\"hide\", this.destroyOnHide, this.jEl.get(0).id)\n\t\t// log(\"hide \",this._visible, this.jEl)\n\t\tif (!this._visible) return ;\n\t\tif (this.trigger('beforeHide', this)===false) return false ;\n\t\tthis.showOrHide(false) ;\n\t\tthis.trigger('hide', this) ;\n\t}\n\t/**\n\t * @function isVisible\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {Boolean}\n\t */\n\tisVisible() {\n\t\treturn this._visible ;\n\t}\n\t_waitEndClose() {\n\t\twindow.setTimeout(()=> {\n\t\t\tthis._waitEndClose();\n\t\t}, 10) ;\n\t}\n\t/**\n\t * @function realign\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {type}\n\t */\n\trealign() {\n\t\tthis._setPosition() ;\n\t}\n\t_setPosition() {\n\n\n\t\t// search parent overflow with auto or hidden\n\t\tvar rettemp = this.jEl.parents().filter(function() {\n\t\t\tif ($(this).css('overflow')==='auto' || $(this).css('overflow')==='hidden') return true ;\n\t\t\treturn false ;\n\t\t}).first() ;\n\t\t// var compareTo = {top: $(window).scrollTop(), height: $(window).height()} ;\n\t\t// if (rettemp.length) compareTo = {top: }\n\t\tvar compareTo = $(\"body\") ; // work because body height == window height !!!!\n\t\tif (rettemp.length) compareTo = rettemp ;\n\n\t\tthis.jEl.height('auto') ;\n\n\t\tvar t = this.alignTo.offset().top+this.alignTo.outerHeight()+this.offsetTop ;\n\t\tvar l = this.alignTo.offset().left+this.offsetLeft ;\n\t\tthis.jEl.show().offset({top:t, left:l}) ;\n\t\t// log(\"this.offsetLeft\",this.offsetLeft)\n\n\t\tvar top = this.jEl.offset().top ;\n\t\tvar h = this.jEl.outerHeight() ;\n\t\tvar topCompareTo = compareTo.offset().top ;\n\t\tvar hCompareTo = compareTo.outerHeight() ;\n\t\t// console.log(\"hCompareTo\", hCompareTo);\n\t\t// console.log(\"top,h,topCompareTo,hCompareTo\", top,h,topCompareTo,hCompareTo,this.jEl);\n\t\tif ((top+h > topCompareTo+hCompareTo) && this.alwaysDropdownBelow!==true) {\n\t\t\t// check if space above is bigger than below\n\t\t\tif (top-topCompareTo > topCompareTo+hCompareTo-top) { //more big above\n\t\t\t\t// max height\n\t\t\t\tlet maxh = top-topCompareTo-35 ;\n\t\t\t\tlet moreH = 0 ;\n\t\t\t\tif (h>maxh && this.autoSize) {\n\t\t\t\t\th = maxh ;\n\t\t\t\t\tthis.jEl.height(h - 50) ;\n\t\t\t\t} else moreH = 30 ;\n\t\t\t\tt = top - h - moreH;\n\t\t\t\tthis.jEl.offset({top:t, left:l}) ;\n\t\t\t} else { // more big bottom\n\t\t\t\tlet maxh = topCompareTo+hCompareTo-top-25 ;\n\t\t\t\tif (h>maxh && this.autoSize) {\n\t\t\t\t\th = maxh ;\n\t\t\t\t\tthis.jEl.height(h) ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// var hWin = $(window).height() ;\n\t\t// var top = this.jEl.offset().top ;\n\t\t// var h = this.jEl.height() ;\n\t\t// if (top+h-$(window).scrollTop() > hWin) {\n\t\t// \t// try to set dropdown on top of alignTo\n\t\t// \tif (this.alignTo.offset().top>(hWin/2) && h<(hWin/2)) {\n\t\t// \t\tt = this.alignTo.offset().top - h - 30 ;\n\t\t// \t\tthis.jEl.offset({top:t, left:l}) ;\n\n\t\t// \t// else set dropdown height\n\t\t// \t} else {\n\t\t// \t\tvar h = hWin-(top-$(window).scrollTop())-30 ;\n\t\t// \t\tthis.jEl.height(h) ;\n\t\t// \t}\n\t\t// }\n\t}\n\t/**\n\t * @function showOrHide\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tshowOrHide(ok) {\n\t\t// log(\"showOrHide\",ok,this.jEl)\n\t\tvar speed = M_.Utils.getSpeedAnim() ;\n\t\tif (ok) {\n\t\t\t// this.jEl.show().css({opacity:0}).offset({top, left}).transition({opacity:1}) ;\n\t\t\tM_.Dropdown.closeAllDropdown() ;\n\t\t\t// log(\"this.jEl\",this.jEl)\n\t\t\tthis.jEl.show().css({opacity:0.5}).transition({opacity:1}, speed) ;\n\t\t\tthis._setPosition() ;\n\t\t\tthis._visible = true ;\n\t\t} else {\n\t\t\t// this.jEl.transition({opacity:0}, speed, ()=> {\n\t\t\t\tthis.jEl.hide() ;\n\t\t\t\tthis._visible = false ;\n\t\t\t\tif (this.destroyOnHide) this.destroy() ;\n\t\t\t// }) ;\n\t\t}\n\t\t// log(\"_visible\",this._visible)\n\t}\n\t/**\n\t * @function destroy\n\t * @memberOf! M_.Dropdown\n\t * @instance\n\t * @return {type}\n\t */\n\tdestroy() {\n\t\t// log(\"destroy\");\n\t\t// $(document).off('click', $.proxy(this.onDocumentClick, this)) ;\n\t\tthis.jEl.parent().remove() ;\n\t\tthis.trigger('destroy', this) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tstatic closeAllDropdown() {\n\t\t// log(\"closeAllDropdown\")\n\t\t$('.M_Dropdown').trigger('M_DropdownHide') ;\n\t\t// if (this.tabDropdowns) {\n\t\t// \tfor(var i=0 ; i<this.tabDropdowns.length ; i++) {\n\t\t// \t\tif (this.tabDropdowns[i]) this.tabDropdowns[i].hide() ;\n\t\t// \t}\n\t\t// }\n\t}\n\tstatic _goGlobalListeners() {\n\t\t$(document)\n\t\t.on('click', '.M_Dropdown', (evt)=> {\n\t\t\tM_.Help.hideMHelp() ;\n\t\t\tevt.stopPropagation() ;\n\t\t})\n\t\t.on('click', (evt)=> {\n\t\t\tM_.Help.hideMHelp() ;\n\t\t\t// log(\"clickDocument\")\n\t\t\t// if ($(evt.target).closest('.M_Dropdown').length===0) {\n\t\t\t\tthis.closeAllDropdown() ;\n\t\t\t\t// $('.M_Dropdown').trigger('M_DropdownHide') ;\n\t\t\t// }\n\t\t}) ;\n\t}\n};\nM_.Dropdown._goGlobalListeners() ;\n\n\n/**\n * Create month calendar to display directly on page or in a M_.Form.Date\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @property {type} container\n * @property {type} dateViewed\n * @property {type} dateSelected\n * @property {type} renderCellDay\n * @property {type} dateFormat\n * @property {type} dateFormatFrom\n * @property {type} firstDay\n * @property {type} noDays\n * @property {type} noMonths\n * @property {type} allways6lines\n * @property {type} cls\n * @property {type} displayHeader\n * @property {type} showDateSelected\n * @property {type} showDateViewed\n */\nM_.CalendarMonth = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tcontainer: null,\n\t\t\tdateViewed: moment(),\n\t\t\tdateSelected: moment(),\n\t\t\trenderCellDay: null,\n\t\t\t// disabledDatesTo: null,\n\t\t\t// disabledDatesFrom: null,\n\t\t\tdisabledDates: null,\n\t\t\tdateFormat: 'DD/MM/YYYY',\n\t\t\tdateFormatFrom: 'YYYY-MM-DD',\n\t\t\tfirstDay: 1, //0=sunday, 1=monday\n\t\t\tnoDays: false,\n\t\t\tnoMonths: false,\n\t\t\t_thefirstDay: null,\n\t\t\t_thelastDay: null,\n\t\t\tallways6lines: false,\n\t\t\tcls: '',\n\t\t\t_cls: '',\n\t\t\tdisplayHeader: true,\n\t\t\tselectable: true,\n\t\t\tshowDateSelected: true,\n\t\t\tshowDateViewed: true,\n\t\t\tshowWeekNumber: false,\n\t\t\tselectWeek: false\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\n\n\t\tthis.create() ;\n\n\t}\n\t// tpl: 'tpl_M_CalendarMonth',\n\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tvar html =\n\t\t`<div class=\"M_CalendarMonth ${this._cls} ${this.cls}\">\n\t\t\t<div class=\"M_CalendarMonth_days\">\n\t\t\t\t<div class=\"M_CalendarMonth_previous\"><span class=\"fa fa-arrow-circle-left\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_date\">Date</div>\n\t\t\t\t<div class=\"M_CalendarMonth_next\"><span class=\"fa fa-arrow-circle-right\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_content\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"M_CalendarMonth_months\">\n\t\t\t\t<div class=\"M_CalendarMonth_previous\"><span class=\"fa fa-arrow-circle-left\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_date\">Date</div>\n\t\t\t\t<div class=\"M_CalendarMonth_next\"><span class=\"fa fa-arrow-circle-right\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_content\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"M_CalendarMonth_years\">\n\t\t\t\t<div class=\"M_CalendarMonth_previous\"><span class=\"fa fa-arrow-circle-left\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_date\">Date</div>\n\t\t\t\t<div class=\"M_CalendarMonth_next\"><span class=\"fa fa-arrow-circle-right\"></span></div>\n\t\t\t\t<div class=\"M_CalendarMonth_content\"></div>\n\t\t\t</div>\n\t\t</div>` ;\n\n\n\t\tthis.jEl = $(html) ;\n\t\tthis.container.append(this.jEl) ;\n\t\tthis.redraw() ;\n\n\t\tif (!this.displayHeader) this.container.find('.M_CalendarMonth_date, .M_CalendarMonth_previous, .M_CalendarMonth_next').hide() ;\n\t\telse this.container.find('.M_CalendarMonth_date, .M_CalendarMonth_previous, .M_CalendarMonth_next').show() ;\n\t}\n\t/**\n\t * @param {type}\n\t * @param {type}\n\t */\n\tsetDateViewed(dateViewed, dateSelected) {\n\t\tthis.dateViewed = dateViewed ;\n\t\t// log(\"this.dateViewed\",this.dateViewed)\n\t\tif (dateSelected) this.dateSelected = dateSelected ;\n\t\tthis.redraw() ;\n\t}\n\t/**\n\t * @param {type}\n\t * @param {type}\n\t */\n\tsetDateSelected(dateSelected, dateViewed) {\n\t\tthis.dateSelected = dateSelected ;\n\t\tif (dateViewed) this.dateViewed = dateViewed ;\n\t\tthis.redraw() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetDateSelected() {\n\t\treturn moment(this.dateSelected) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tredraw() {\n\t\tthis.showDays() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshowYears() {\n\t\tthis.jEl.find(\".M_CalendarMonth_days\").hide() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months\").hide() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years\").show() ;\n\n\t\tvar yearStart = (Math.floor(this.dateViewed.year()/10)*10)-1 ;\n\n\t\tvar html = \"\" ;\n\t\thtml += \"<table>\" ;\n\t\tfor(var i=0 ; i<12 ; i++) {\n\t\t\tvar dActu = moment({year:yearStart+i, month:this.dateViewed.month(), day:1}) ;\n\t\t\tif (i%4===0) html += \"<tr>\" ;\n\t\t\tvar active = \"\" ;\n\t\t\tif (dActu.year()==this.dateSelected.year()) active = \"class='active'\" ;\n\t\t\thtml += \"<td \"+active+\" data-m-date='\"+dActu.format('YYYY-MM-DD')+\"'>\"+dActu.year()+\"</td>\" ;\n\t\t\tif (i%4===3) html += \"</tr>\" ;\n\t\t}\n\t\thtml += \"</table>\" ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_content\").html(html) ;\n\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_date\").html((yearStart+1)+\" - \"+(yearStart+11)) ;\n\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_content td\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_content td\").on('click', (evt)=> {\n\t\t\tvar d = $(evt.target).attr(\"data-m-date\") ;\n\t\t\tthis.selectYear(d) ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_next\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_next\").on('click', (evt)=> {\n\t\t\tthis.nextYears() ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_previous\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years .M_CalendarMonth_previous\").on('click', (evt)=> {\n\t\t\tthis.previousYears() ;\n\t\t}) ;\n\t\tthis.trigger('viewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tpreviousYears() {\n\t\tthis.dateViewed.add(-10, 'years') ; //  = new Date(this.dateViewed.getFullYear()*1-10, this.dateViewed.getMonth(), 1) ;\n\t\tthis.showYears() ;\n\t\tthis.trigger('yearViewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tnextYears() {\n\t\tthis.dateViewed.add(10, 'years') ; //this.dateViewed = new Date(this.dateViewed.getFullYear()*1+10, this.dateViewed.getMonth(), 1) ;\n\t\tthis.showYears() ;\n\t\tthis.trigger('yearViewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tselectYear(date) {\n\t\t// if ($.type(date)==\"string\") date = moment(date) ; //date = M_.Utils.parseDate(date, 'Y-m-d') ;\n\t\tthis.dateViewed = moment(date) ;\n\t\tif (this.noMonths) {\n\t\t\tdate.month(0).date(1) ;\n\t\t\t//this.selectDate(date) ;\n\t\t\tthis.trigger(\"selected\", this, moment(date)) ;\n\t\t} else {\n\t\t\tthis.showMonths() ;\n\t\t\tthis.trigger('yearViewedChanged', this, moment(this.dateViewed)) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshowMonths() {\n\t\tif (this.noMonths) {\n\t\t\tthis.showYears() ;\n\t\t\treturn ;\n\t\t}\n\t\tthis.jEl.find(\".M_CalendarMonth_days\").hide() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months\").show() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years\").hide() ;\n\n\t\tvar html = \"\" ;\n\t\thtml += \"<table>\" ;\n\t\tvar tabMonths = moment.months() ;\n\t\tfor(var i=0 ; i<12 ; i++) {\n\t\t\tvar dActu = moment({year:this.dateViewed.year(), month:i, day:1}) ;//new Date(this.dateViewed.year(), i, 1) ;\n\t\t\tif (i%3===0) html += \"<tr>\" ;\n\t\t\tvar active = \"\" ;\n\t\t\tif (dActu.year()==this.dateSelected.year() && dActu.month()==this.dateSelected.month()) active = \"class='active'\" ;\n\t\t\tvar moreD = \"\" ;\n\t\t\tif (this.showWeekNumber) {\n\t\t\t\tvar dTemp3 = moment(dActu).endOf('month') ;\n\t\t\t\tmoreD += \"<br>(S\"+dActu.week()+\" - S\"+dTemp3.week()+\")\" ;\n\t\t\t}\n\t\t\thtml += \"<td \"+active+\" data-m-date='\"+dActu.format('YYYY-MM-DD')+\"'>\"+tabMonths[i]+moreD+\"</td>\" ;\n\t\t\tif (i%3==2) html += \"</tr>\" ;\n\t\t}\n\t\thtml += \"</table>\" ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_content\").html(html) ;\n\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_date\").html(this.dateViewed.year()+\" <span class='fa fa-arrow-circle-down'></span>\") ;\n\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_content td\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_content td\").on('click', (evt)=> {\n\t\t\tvar d = $(evt.target).attr(\"data-m-date\") ;\n\t\t\tthis.selectMonth(d) ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_next\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_next\").on('click', (evt)=> {\n\t\t\tthis.nextYear() ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_date\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_date\").on('click', (evt)=> {\n\t\t\tthis.showYears() ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_previous\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months .M_CalendarMonth_previous\").on('click', (evt)=> {\n\t\t\tthis.previousYear() ;\n\t\t}) ;\n\t\tthis.trigger('viewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tselectMonth(date) {\n\t\t// if ($.type(date)==\"string\") date = moment(date) ;\n\t\tthis.dateViewed = moment(date) ;\n\t\tif (this.noDays) {\n\t\t\tthis.dateViewed.date(1) ;\n\t\t\t//this.selectDate(date) ;\n\t\t\tthis.trigger(\"selected\", this, moment(this.dateViewed)) ;\n\t\t} else {\n\t\t\tthis.showDays() ;\n\t\t\tthis.trigger('dateViewedChanged', this, moment(this.dateViewed)) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tpreviousYear() {\n\t\tvar d = this.dateViewed.date() ;\n\t\tif (this.dateViewed.date()*1>28) d = 28 ;\n\t\tthis.dateViewed.subtract(1,'years') ;\n\t\tthis.showMonths() ;\n\t\tthis.trigger('yearViewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tnextYear() {\n\t\tvar d = this.dateViewed.date() ;\n\t\tif (this.dateViewed.date()*1>28) d = 28 ;\n\t\tthis.dateViewed.add(1,'years') ;\n\t\tthis.showMonths() ;\n\t\tthis.trigger('yearViewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshowDays() {\n\t\tvar i ;\n\t\tif (this.noDays) {\n\t\t\tthis.showMonths() ;\n\t\t\treturn ;\n\t\t}\n\t\tthis.jEl.find(\".M_CalendarMonth_days\").show() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_months\").hide() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_years\").hide() ;\n\n\t\tvar today = moment() ;\n\t\tvar year = this.dateViewed.year() ;\n\t\tvar month = this.dateViewed.month() ;\n\t\t// var date = this.dateViewed.date() ;\n\t\tvar nbDaysInMonth = this.dateViewed.daysInMonth() ;\n\t\tvar firstDate = moment({year:year, month:month, day:1}).startOf('day') ;\n\t\tvar decalage = 0 ;\n\t\t// log(\"firstDate\",firstDate,decalage)\n\t\tfor(i=1 ; i<=7 ; i++) {\n\t\t\tif (firstDate.day()==1) break ;\n\t\t\tdecalage-- ;\n\t\t\tfirstDate.add(-1, 'days') ;\n\t\t}\n\t\t// log(\"firstDate\",firstDate,decalage)\n\t\tvar html = \"\" ;\n\t\thtml += \"<table>\" ;\n\t\thtml += \"<thead><tr>\" ;\n\t\tif (this.showWeekNumber) html += \"<th>S</th>\" ;\n\t\tvar tabDaysShort = moment.weekdaysShort() ;\n\t\tfor(i=0 ; i<7 ; i++) {\n\t\t\tvar j = (i+1)%7 ;\n\t\t\thtml += \"<th>\"+tabDaysShort[j]+\"</th>\" ;\n\t\t}\n\t\thtml += \"</tr></thead>\" ;\n\t\thtml += \"<tbody>\" ;\n\t\tvar tabCells = [] ;\n\t\tvar nbMax = Math.ceil((nbDaysInMonth+15)) ;\n\t\tvar nbLines = 0 ;\n\t\t// log(\"firstDate\",nbMax,firstDate, this.dateViewed)\n\t\tfor(i=0 ; i<nbMax ; i++) {\n\t\t\tvar dActu = moment().year(year).month(month).date(1+decalage+i).startOf('day') ;//{year:year, month:month, day:1+decalage+i}\n\t\t\tif (i===0) this._thefirstDay = moment(dActu) ;\n\t\t\tif (dActu.day()==1) {\n\t\t\t\thtml += \"<tr>\" ;\n\t\t\t\tif (this.showWeekNumber) {\n\t\t\t\t\tlet tdClsWeek = '' ;\n\t\t\t\t\tif (this.disabledDates && this.disabledDates(this, dActu)) tdClsWeek = 'notselectable' ;\n\t\t\t\t\thtml += \"<td class='\"+tdClsWeek+\"' data-m-date='\"+dActu.format('YYYY-MM-DD')+\"'><b>\"+dActu.week()+\"</b>&nbsp;&nbsp;</td>\" ;\n\t\t\t\t}\n\t\t\t\tnbLines++ ;\n\t\t\t\tif (this.allways6lines && nbLines==7) {\n\t\t\t\t\tthis._thelastDay = moment(dActu) ;\n\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar tdCls = \"\" ;\n\t\t\tif (this.showDateViewed && dActu.year()==this.dateSelected.year() && dActu.month()==this.dateSelected.month() && dActu.date()==this.dateSelected.date()) tdCls += \"active \" ;\n\t\t\tif (dActu.month()!=this.dateViewed.month()) tdCls += \"notthegoodmonth \" ;\n\t\t\tvar isDisabled = false ;\n\t\t\tif (this.disabledDates) isDisabled = this.disabledDates(this, dActu) ;\n\t\t\tif (isDisabled) tdCls += \"notselectable \" ;\n\t\t\tif (this.showDateSelected && dActu.year()==today.year() && dActu.month()==today.month() && dActu.date()==today.date()) tdCls += \"current \" ;\n\t\t\tvar contentTemp = dActu.date() ;\n\t\t\tvar idCell = M_.Utils.id() ;\n\t\t\t//if (this.renderCellDay) contentTemp = this.renderCellDay(this, dActu, idCell) ;\n\t\t\ttabCells.push([dActu, idCell]) ;\n\t\t\thtml += \"<td class='\"+tdCls+\"' id='\"+idCell+\"' data-m-date='\"+dActu.format('YYYY-MM-DD')+\"'><div class='M_CalendarMonth_txt'>\"+contentTemp+\"</div></td>\" ;\n\t\t\tif (dActu.day()===0) html += \"</tr>\" ;\n\t\t\tif ((dActu.month()!=month && dActu.day()===0 && !this.allways6lines && nbLines>=2)) {\n\t\t\t\tthis._thelastDay = moment(dActu) ;\n\t\t\t\tbreak ;\n\t\t\t}\n\t\t}\n\t\thtml += \"</tbody>\" ;\n\t\thtml += \"</table>\" ;\n\t\tvar tabMonths = moment.months() ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_content\").html(html) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_date\").html(tabMonths[this.dateViewed.month()]+\" \"+this.dateViewed.year()+\" <span class='fa fa-arrow-circle-down'></span>\") ;\n\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_content td\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_content td\").on('click', (evt)=> {\n\t\t\tvar target = $(evt.target).closest(\"td\") ;\n\t\t\tif (target.hasClass('notselectable')) return ;\n\t\t\tvar d = target.attr(\"data-m-date\") ;\n\t\t\tvar date = moment(d) ;\n\t\t\tif (this.selectWeek) date.startOf('week') ;\n\t\t\t//this.selectDate(d) ;\n\t\t\tif (this.selectable) this.setDateSelected(date) ;\n\t\t\tthis.trigger(\"selected\", this, date) ;\n\t\t}) ;\n\t\tif (this.selectWeek) {\n\t\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_content tr\").mouseenter((evt)=> {\n\t\t\t\t$(evt.target).closest('tr').addClass('alllineover') ;\n\t\t\t});\n\t\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_content tr\").mouseleave((evt)=> {\n\t\t\t\t$(evt.target).closest('tr').removeClass('alllineover') ;\n\t\t\t});\n\t\t}\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_next\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_next\").on('click', (evt)=> {\n\t\t\tthis.nextMonth() ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_date\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_date\").on('click', (evt)=> {\n\t\t\tthis.showMonths() ;\n\t\t}) ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_previous\").off('click') ;\n\t\tthis.jEl.find(\".M_CalendarMonth_days .M_CalendarMonth_previous\").on('click', (evt)=> {\n\t\t\tthis.previousMonth() ;\n\t\t}) ;\n\n\t\tif (this.renderCellDay) {\n\t\t\tfor(i=0 ; i<tabCells.length ; i++) {\n\t\t\t\tvar el = $(\"#\"+tabCells[i][1]) ;\n\t\t\t\tvar contentTemp2 = this.renderCellDay(this, tabCells[i][0], el) ;\n\t\t\t\tel.html(contentTemp2) ;\n\t\t\t}\n\t\t}\n\t\tthis.trigger('viewedChanged', this, moment(this.dateViewed)) ;\n\t}\n\n\t/**\n\t * @return {type}\n\t */\n\tgetFirstDay() {\n\t\treturn this._thefirstDay ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetLastDay() {\n\t\treturn this._thelastDay ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tpreviousMonth() {\n\t\t// console.log(\"this.dateViewed\", this.dateViewed);\n\t\tthis.dateViewed.subtract(1,'month').startOf('months') ;\n\t\tthis.showDays() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tnextMonth() {\n\t\t// this.dateViewed = moment({year:this.dateViewed.year(), month:this.dateViewed.month()*1+1, day:1}) ;\n\t\tthis.dateViewed.add(1,'month').startOf('months') ;\n\t\tthis.showDays() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tdestroy() {\n\t\tthis.jEl.remove() ;\n\t\tthis.trigger('destroy', this) ;\n\t}\n};\n\n\n\nM_.Calendar = {} ;\n\nM_.Calendar.MonthView = class extends M_.CalendarMonth {\n\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tdisplayHeader: false,\n\t\t\t_cls: 'M_CalendarMonthView',\n\t\t\tcellMinHeight: 50,\n\t\t\tcellHeadMinHeight: 20,\n\t\t\tshowDateViewed: false,\n\t\t\tshowDateSelected: true,\n\t\t\tprovideEvents: null,\n\t\t\tselectable: false,\n\t\t\tmodelDef: {\n\t\t\t\tkey: 'key',\n\t\t\t\tstart: 'start',\n\t\t\t\tend: 'end',\n\t\t\t\ttext: 'text',\n\t\t\t\tcls: 'cls',\n\t\t\t},\n\t\t\tevents: [\n\t\t\t\t// {\n\t\t\t\t// \tid: '1',\n\t\t\t\t// \tstart: moment(),\n\t\t\t\t// \tend: moment().add(8, 'days'),\n\t\t\t\t// \ttext: \"Cline\",\n\t\t\t\t// \tbgcolor: 'red'\n\t\t\t\t// }, {\n\t\t\t\t// \tid: '2',\n\t\t\t\t// \tstart: moment(),\n\t\t\t\t// \tend: moment().add(2, 'days'),\n\t\t\t\t// \ttext: \"Bernard\",\n\t\t\t\t// \tbgcolor: 'green'\n\t\t\t\t// }, {\n\t\t\t\t// \tid: '3',\n\t\t\t\t// \tstart: moment().subtract(2, 'days'),\n\t\t\t\t// \tend: moment().add(8, 'days'),\n\t\t\t\t// \ttext: \"Bernard2\",\n\t\t\t\t// \tbgcolor: 'green'\n\t\t\t\t// }, {\n\t\t\t\t// \tid: '4',\n\t\t\t\t// \tstart: moment().subtract(60, 'days'),\n\t\t\t\t// \tend: moment().subtract(15, 'days'),\n\t\t\t\t// \ttext: \"Henri\",\n\t\t\t\t// \tbgcolor: 'purple'\n\t\t\t\t// }\n\t\t\t]\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\n\t\tsuper(opts) ;\n\n\t\tObject.mixin(this, M_.Stored) ;\n\t\t// log(\"store\", Object.mixin)\n\t\tthis.initStored() ;\n\t}\n\tloadEvents() {\n\t\tif (this.store) this.store.load({\n\t\t\tskip: 0,\n\t\t\t// where: \"{'va_start':{'<': '\"+moment(this.dateViewed).startOf('month').add(1, 'month').format('YYYY-MM-DD')+\"'}, 'va_end':{'>':'\"+moment(this.dateViewed).startOf('month').format('YYYY-MM-DD')+\"'}}\"\n\t\t\tstart: moment(this.dateViewed).startOf('month').format('YYYY-MM-DD'),\n\t\t\tend: moment(this.dateViewed).startOf('month').add(1, 'month').format('YYYY-MM-DD'),\n\t\t}) ;\n\t}\n\tselectMonth(date) {\n\t\tsuper.selectMonth(date) ;\n\t\tthis.loadEvents() ;\n\t}\n\tupdateStore() {\n\t\t// this.showDays() ;\n\t\tthis.drawEvents() ;\n\t\t// log(\"this.store\",this.store) ;\n\t}\n\tshowDays() {\n\t\tsuper.showDays() ;\n\t\t// this._loadEvents() ;\n\t\t// if (this.store) this.store.reload() ;\n\t}\n\t_loadEvents() {\n\t\t// if (this.provideEvents) {\n\t\t// \tthis.provideEvents((events)=> {\n\t\t// \t\tthis.events = events ;\n\t\t// \t\tthis.drawEvents() ;\n\t\t// \t}) ;\n\t\t// } else {\n\t\t// \tthis.drawEvents() ;\n\t\t// }\n\t}\n\tdrawEvents() {\n\t\tthis.jEl.find('.M_CalendarMonthView_bar').remove() ;\n\t\tif (this.cellMinHeight>0) {\n\t\t\tthis.jEl.find('.M_CalendarMonth_days tbody tr').css('min-height', this.cellMinHeight) ;\n\t\t\tthis.jEl.find('.M_CalendarMonth_days tbody tr').css('height', this.cellMinHeight) ;\n\t\t}\n\t\tif (this.cellHeadMinHeight>0) {\n\t\t\tthis.jEl.find('.M_CalendarMonth_days thead tr').css('min-height', this.cellHeadMinHeight) ;\n\t\t\tthis.jEl.find('.M_CalendarMonth_days thead tr').css('height', this.cellHeadMinHeight) ;\n\t\t}\n\t\tvar widthCell = this.jEl.find('td').outerWidth() ;\n\t\t// var tabNbEventsByDate = {} ; // stock le nb d'vnements pour une journe\n\t\tvar tabNbEventsByWeek = {} ; // stock le nb d'vnements dans la semaine\n\t\tvar tabBars = [] ;\n\t\t// _.each(this.events, (evt)=> {\n\t\tthis.store.each((model)=> {\n\t\t\tvar start = moment(model.get(this.modelDef.start)).startOf('day') ;\n\t\t\tvar end = moment(model.get(this.modelDef.end)).startOf('day') ;\n\t\t\tvar start2 = model.get(this.modelDef.start2) || false ;\n\t\t\tvar end2 = model.get(this.modelDef.end2) || false ;\n\t\t\tvar nbDays = end.diff(start, 'days')+1 ;\n\t\t\tvar dActu = moment(start) ;\n\t\t\tfor(var nj=0 ; nj<nbDays ; nj++) {\n\t\t\t\tvar isFirst = false ;\n\t\t\t\tvar isLast = false ;\n\t\t\t\tvar startOfWeek = moment(dActu).startOf('week').format('YYYY-MM-DD') ;\n\t\t\t\tif (nj===0 || dActu.day()===1) {\n\t\t\t\t\tif (!tabNbEventsByWeek[startOfWeek]) tabNbEventsByWeek[startOfWeek] = 0 ;\n\t\t\t\t\tif (nj===0) isFirst = true ;\n\t\t\t\t\tvar objTemp = {\n\t\t\t\t\t\tid: model.get(this.modelDef.key),\n\t\t\t\t\t\tstart: moment(dActu),\n\t\t\t\t\t\tstart2: start2,\n\t\t\t\t\t\tend2: end2,\n\t\t\t\t\t\tisFirst: isFirst,\n\t\t\t\t\t\tisLast: isLast,\n\t\t\t\t\t\tnbDays: 0,\n\t\t\t\t\t\tstartOfWeek: startOfWeek,\n\t\t\t\t\t\tposition: tabNbEventsByWeek[startOfWeek],\n\t\t\t\t\t\t// text: model.get(this.modelDef.text),\n\t\t\t\t\t\t// color: model.get(this.modelDef.color),\n\t\t\t\t\t\t// bgcolor: model.get(this.modelDef.bgcolor)\n\t\t\t\t\t} ;\n\t\t\t\t\tif (_.isFunction(this.modelDef.text)) objTemp.text = this.modelDef.text(model) ;\n\t\t\t\t\telse objTemp.text = model.get(this.modelDef.text) ;\n\t\t\t\t\tif (_.isFunction(this.modelDef.cls)) objTemp.cls = this.modelDef.cls(model) ;\n\t\t\t\t\telse objTemp.cls = model.get(this.modelDef.cls) ;\n\t\t\t\t\ttabBars.push(objTemp) ;\n\t\t\t\t\ttabNbEventsByWeek[startOfWeek]++ ;\n\t\t\t\t}\n\t\t\t\ttabBars[tabBars.length-1].nbDays++ ;\n\t\t\t\tif (nj===nbDays-1) tabBars[tabBars.length-1].isLast = true ;\n\t\t\t\t// if (!tabNbEventsByDate[dActu.format('YYYY-MM-DD')]) tabNbEventsByDate[dActu.format('YYYY-MM-DD')] = 0 ;\n\t\t\t\t// tabNbEventsByDate[dActu.format('YYYY-MM-DD')]++ ;\n\n\t\t\t\tdActu.add(1, 'days') ;\n\t\t\t}\n\t\t}) ;\n\t\t// _.each(tabBars, (barEvt)=> {\n\t\tfor(let barEvt of tabBars) {\n\t\t\tvar bar = $(\"<div class='M_CalendarMonthView_bar \"+barEvt.cls+\"' data-m-evt='\"+barEvt.id+\"'>\"+barEvt.text+\"</div>\") ;\n\t\t\tvar css = {\n\t\t\t\ttop: barEvt.position*15+25\n\t\t\t} ;\n\t\t\tif (barEvt.bgcolor) css['background-color'] = barEvt.bgcolor ;\n\t\t\tif (barEvt.color) css.color = barEvt.color ;\n\t\t\tvar moreLeft = 0 ;\n\t\t\tvar moreWidth = 0 ;\n\t\t\tif (barEvt.start2 && barEvt.isFirst) moreLeft = 50 ; //widthCell/2\n\t\t\tif (barEvt.end2 && barEvt.isLast) moreWidth = 50 ; //widthCell/2\n\t\t\tcss.left = moreLeft+'%' ;\n\t\t\tbar\n\t\t\t.width(101*barEvt.nbDays - moreLeft - moreWidth+'%') //widthCell*barEvt.nbDays\n\t\t\t.css(css)\n\t\t\t.html(barEvt.text) ;\n\t\t\tvar el2 = this.jEl.find(\"td[data-m-date='\"+barEvt.start.format('YYYY-MM-DD')+\"']\") ;\n\t\t\tif (el2) el2.append(bar) ;\n\t\t\tvar tr = this.jEl.find(\"td[data-m-date='\"+barEvt.startOfWeek+\"']\").parent() ;\n\t\t\tvar h = 25+15*tabNbEventsByWeek[barEvt.startOfWeek]+5 ;\n\t\t\ttr.css('height', Math.max(h, this.cellMinHeight)) ;\n\t\t}\n\t\tthis.jEl.find('.M_CalendarMonthView_bar').click((evt)=> {\n\t\t\tevt.stopPropagation() ;\n\t\t\tvar bar = $(evt.target) ;\n\t\t\tvar id = bar.closest('.M_CalendarMonthView_bar').attr('data-m-evt') ;\n\t\t\tvar found = this.store.getRow(id) ;\n\t\t\tif (found) this.trigger('clickitem', this, found, bar)  ;\n\t\t}).mouseenter((evt)=> {\n\t\t\tvar bar = $(evt.target) ;\n\t\t\tvar id = bar.closest('.M_CalendarMonthView_bar').attr('data-m-evt') ;\n\t\t\tvar found = this.store.getRow(id) ;\n\t\t\tthis.trigger('enteritem', this, found, bar) ;\n\t\t}) ;\n\t}\n\tsetEvents(events) {\n\t\tthis.events = events ;\n\t\tthis.redraw() ;\n\t}\n} ;\n\n\n\n/**\n * All form elements\n * @namespace\n * @memberof! <global>\n */\nM_.Form = {};\n\n/**\n * Manage a form\n * @class\n * @memberof! <global>\n * @implements M_.Observable\n * @implements M_.CRUD\n * @property {type} useWebsocket\n * @property {type} items\n * @property {type} itemsDefaults\n * @property {type} model\n * @property {type} url\n */\nM_.Form.Form = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tuseWebsocket: M_.App.useWebsocket,\n\t\t\titems: [],\n\t\t\t_items: [],\n\t\t\titemsDefaults: {},\n\t\t\t_currentModel: null,\n\t\t\tmodel: null,\n\t\t\turl: '',\n\t\t\tvalidBeforeSave: true\n\t\t};\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tObject.mixin(this, M_.Observable) ;\n\t\tthis.initObservable() ;\n\t\tObject.mixin(this, M_.CRUD) ;\n\t\tthis.initCRUD() ;\n\n\t\tvar items = this.items ;\n\t\tfor(var i=0 ; i<items.length ; i++) {\n\t\t\tthis.addItem(items[i]) ;\n\t\t}\n\n\t\tif (this.autoUnedit) {\n\t\t\t// $(document).click((evt)=> {\n\t\t\t// \tif ($(evt.target).closest('.edit').length===0) {\n\t\t\t// \t\tthis.edit(false) ;\n\t\t\t// \t}\n\t\t\t// }) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\treset() {\n\t\tvar _items = this._items ;\n\t\tfor(var i=0 ; i<_items.length ; i++) {\n\t\t\t_items[i].reset() ;\n\t\t}\n\t\tthis.trigger(\"reset\", this) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tvalid(err=[]) {\n\t\tvar ok = true ;\n\t\tvar _items = this._items ;\n\t\tfor(var i=0 ; i<_items.length ; i++) {\n\t\t\tif (!_items[i].valid()) {\n\t\t\t\tok = false ;\n\t\t\t\tvar label = _items[i].name ;\n\t\t\t\tif (_items[i].label!=='') label = _items[i].label ;\n\t\t\t\terr.push({key:_items[i].name, label:label}) ;\n\t\t\t}\n\t\t\t// console.log(\"_items[i].valid(),_items[i].name\", _items[i].valid(),_items[i].name);\n\t\t}\n\t\tvar ok2 = this.trigger(\"valid\", this, ok, err) ;\n\t\t// console.log(\"ok2\", ok2, ok);\n\t\treturn ok && ok2 ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tinformValidReturnSails(data) {\n\t\t// log(\"informValidReturnSails\",data)\n\t\tvar errTxt = \"\" ;\n\t\t_.each(data.invalidAttributes, (attr, key)=> {\n\t\t\t// log(\"attr, key\",attr, key)\n\t\t\tif (this.find(key)) {\n\t\t\t\tthis.find(key).informValid(false) ;\n\t\t\t\tlet key2 = this.find(key).label ;\n\t\t\t\tif (key2==='') key2 = key ;\n\t\t\t\tkey = key2 ;\n\t\t\t}\n\t\t\terrTxt += \"<b>\"+key+\"</b> : \" ;\n\t\t\t_.each(attr, (msg)=> {\n\t\t\t\terrTxt += msg.message ;\n\t\t\t}) ;\n\t\t\terrTxt += \"<br/>\" ;\n\t\t}) ;\n\t\tM_.Dialog.alert(\"Erreur\", \"Merci de corriger les champs en rouge :<br/>\"+errTxt) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tonLoad(model) {\n\t\tif (this.model) this.setValues(model) ;//.getData()\n\t\telse this.setValues(model) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tonBeforeLoad() {\n\t\tthis.resetValid() ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValues(dataOrModel) {\n\t\t// console.log(\"this._items\", this._items);\n\t\tthis.reset() ;\n\t\tif (!(dataOrModel instanceof M_.Model) && (this.model)) dataOrModel = new this.model({row:dataOrModel}) ;\n\t\tthis._currentModel = dataOrModel ;\n\t\tvar _items = this._items ;\n\t\t// log(\"_items\",_items)\n\t\tfor(var i=0 ; i<_items.length ; i++) {\n\t\t\tlet v ;\n\t\t\tif (this.model) v = this._currentModel.get(_items[i].name) ;\n\t\t\telse v = this._currentModel[_items[i].name] ;\n\t\t\t// log(\"_items[i].name\",i, _items[i].name, v)\n\t\t\tif (v!==undefined) {\n\t\t\t\tif (_items[i] instanceof M_.Form.Combobox) {\n\t\t\t\t\tlet v2 ;\n\t\t\t\t\tif (this.model) v2 = this._currentModel.get(_items[i].name+'_val') ;\n\t\t\t\t\telse v2 = this._currentModel[_items[i].name+'_val'] ;\n\t\t\t\t\t// log(\"v2\",v2,name+'_val')\n\t\t\t\t\tif (v2) _items[i].setValueAndRawValue(v, v2) ;\n\t\t\t\t\telse {\n\t\t\t\t\t\t_items[i].setValue(v) ;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// console.log(\"v\", v, _items[i].inputType);\n\t\t\t\t\t_items[i].setValue(v) ;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_items[i].reset() ;\n\t\t\t}\n\t\t}\n//\t\tthis._hideIfEmpty() ;\n\t\tthis.trigger(\"update\", this) ;\n\t}\n//\t_hideIfEmpty() {\n//\t\tvar _items = this._items ;\n//\t\tfor(var i=0 ; i<_items.length ; i++) {\n//\t\t\t// _items[i]._hideIfEmpty() ;\n//\t\t\t// log(\"hideIfEmpty\",_items[i].hideIfEmpty2)\n//\t\t\tif (_items[i].hideContainerIfEmpty && M_.Utils.isEmpty(_items[i].getValue())) {\n//\t\t\t\t_items[i].container.hide() ;\n//\t\t\t} else {\n//\t\t\t\t_items[i].container.show() ;\n//\t\t\t}\n//\t\t\t\t// if (this._inEdit || _items[i].value!=='') _items[i].container.closest(_items[i].hideIfEmpty).show() ;\n//\t\t\t// \telse if (_items[i].value==='') _items[i].container.closest(_items[i].hideIfEmpty).hide() ;\n//\t\t\t// }\n//\t\t}\n//\t}\n\t/**\n\t * @param  {Boolean}\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValues(serialized=false, returnModel=false) {\n\t\t// var model = new this.model() ;\n\t\t// log(\"model\",model)\n\t\tvar _items = this._items,\n\t\t\tdata = {} ;\n\t\tfor(var i=0 ; i<_items.length ; i++) {\n\t\t\tif (_items[i] instanceof M_.Form.File) continue ;\n\t\t\t// \t// log(\"AAAAAAAAAAA\")\n\t\t\t// \tvar resTemp = _items[i].getValue(serialized) ;\n\t\t\t// \tif (resTemp===\"\") continue ;\n\t\t\t// \telse data[_items[i].name] = resTemp ;\n\t\t\t// } else\n\t\t\tvar val = _items[i].getValue(serialized) ;\n\t\t\tif (_items[i].name.slice(-2)===\"[]\") {\n\t\t\t\tvar nameTemp = _items[i].name.slice(0,-2) ;\n\t\t\t\tif (!data[nameTemp]) data[nameTemp] = [] ;\n\t\t\t\tdata[nameTemp].push(val) ;\n\t\t\t} else {\n\t\t\t\tdata[_items[i].name] = val ;\n\t\t\t}\n\t\t\t// if (data[_items[i].name]==undefined) {\n\t\t\t// \tdata[_items[i].name] = val ;\n\t\t\t// } else {\n\t\t\t// \tif (Array.isArray(data[_items[i].name])) {\n\t\t\t// \t\tdata[_items[i].name].push(val) ;\n\t\t\t// \t} else {\n\t\t\t// \t\tdata[_items[i].name] = [data[_items[i].name], val] ;\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\t// if (moment.isMoment(data[_items[i].name])) data[_items[i].name] = data[_items[i].name].format(\"YYYY-MM-DD HH:mm:ss\") ;\n\t\t\t// if (_items[i].)\n\t\t}\n\t\t// log(\"getValues\",data);\n\t\tif (returnModel) return new this.model({row:data}) ;\n\t\treturn data ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tfind(fieldName) {\n\t\tvar _items = this._items ;\n\t\tfor(var i=0 ; i<_items.length ; i++) {\n\t\t\tif (_items[i].name==fieldName) {\n\t\t\t\treturn _items[i] ;\n\t\t\t}\n\t\t}\n\t\treturn null ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tresetValid() {\n\t\tfor (var i = 0; i < this._items.length; i++) {\n\t\t\tthis._items[i].informValid(true);\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tvalidAndAlert() {\n\t\tvar err = [] ;\n\t\tvar ok = this.valid(err);\n\t\tif (!ok) this._alert(err) ;\n\t\treturn ok ;\n \t}\n\t_alert(err) {\n\t\tvar errTxt = \"\" ;\n\t\t_.each(err, (er)=> {\n\t\t\terrTxt += \" \"+er.label+\"<br>\" ;\n\t\t}) ;\n\t\tM_.Dialog.alert(\"Erreur\", \"Merci de corriger les champs en rouge :<br>\"+errTxt) ;\n\t}\n\tvalidAndSave(modelOrData=null, args={}, callback=null) {\n\t\tvar err = [] ;\n\t\tvar ok = this.valid(err);\n\t\t// console.log(\"ok\", ok);\n\t\tif (ok) this.save(modelOrData, args, callback) ;\n\t\telse this._alert(err) ;\n\t\treturn ok ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tpopulate(dataOrModel) {\n\t\tthis.setValues(dataOrModel) ;\n\t\t// if (data instanceof M_.Model) {\n\t\t// \tdata = data.getArray();\n\t\t// }\n\t\t// this.resetSate();\n\t\t// for (var i = 0; i < this.outlets.length; i++) {\n\t\t// \tvar outlet = this.outlets[i];\n\t\t// \tfor (var key in data) {\n\t\t// \t\tif (outlet.name == key) {\n\t\t// \t\t\tif (outlet instanceof M_.Form.Static) {\n\t\t// \t\t\t\tif (data[key + \"_val\"])\n\t\t// \t\t\t\t\toutlet.setValueAndText(data[key], data[key + \"_val\"]);\n\t\t// \t\t\t\telse\n\t\t// \t\t\t\t\toutlet.setValue(data[key]);\n\t\t// \t\t\t} else if (outlet instanceof M_.Form.MultiCombobox) {\n\t\t// \t\t\t\toutlet.reset();\n\t\t// \t\t\t\tif ($.isArray(data[key]))\n\t\t// \t\t\t\t\toutlet.setValue(data[key]);\n\t\t// \t\t\t} else if (outlet instanceof M_.Form.Combobox) {\n\t\t// \t\t\t\tif (data[key + \"_val\"])\n\t\t// \t\t\t\t\toutlet.setValueAndText(data[key], data[key + \"_val\"]);\n\t\t// \t\t\t\telse\n\t\t// \t\t\t\t\toutlet.setValue(data[key]);\n\t\t// \t\t\t} else {\n\t\t// \t\t\t\toutlet.setValue(data[key]);\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddItem(item) {\n\t\tif (!_.isArray(item)) item = [item] ;\n\t\tfor (let i=0 ; i<item.length ; i++) {\n\t\t\tvar optsItem = $.extend({}, this.itemsDefaults, item[i]) ;\n\t\t\toptsItem.form = this ;\n\t\t\tif (optsItem.autoContainer) {\n\t\t\t\tvar jElTemp = $(\"<div></div>\") ;\n\t\t\t\toptsItem.autoContainer.append(jElTemp) ;\n\t\t\t\toptsItem.container = jElTemp ;\n\t\t\t}\n\t\t\tif (optsItem.type===M_.Form.Div) new optsItem.type(optsItem) ;\n\t\t\telse {\n\t\t\t\tvar item2 = new optsItem.type(optsItem) ;\n\t\t\t\tthis._items.push(item2) ;\n\t\t\t}\n\t\t}\n\t\t// console.log(\"this._items\",this._items);\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tdeleteItem(name) {\n\t\tvar keepedItems = [] ;\n\t\tfor(var i=0 ; i<this._items.length ; i++) {\n\t\t\t// log(\"destroy\",this._items[i].name,name)\n\t\t\tif (this._items[i].name==name) {\n\t\t\t\tthis._items[i].destroy() ;\n\n\t\t\t} else {\n\t\t\t\tkeepedItems.push(this._items[i]) ;\n\t\t\t}\n\t\t}\n\t\tthis._items = keepedItems ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetItem(name) {\n\t\tthis.find(name) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetItems() {\n\t\treturn this._items ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tgetItemsByFakeGroup(fakeGroupName) {\n\t\tvar keepedItems = [] ;\n\t\tfor(var i=0 ; i<this._items.length ; i++) {\n\t\t\tif (this._items[i].fakeGroup.indexOf(fakeGroupName)>=0) keepedItems.push(this._items[i]) ;\n\t\t}\n\t\treturn keepedItems ;\n\t}\n\n\tgetItemsByType(type) {\n\t\tvar keepedItems = [] ;\n\t\tfor(var i=0 ; i<this._items.length ; i++) {\n\t\t\tif (this._items[i] instanceof type) keepedItems.push(this._items[i]) ;\n\t\t}\n\t\treturn keepedItems ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tdeleteByFakeGroup(fakeGroupName) {\n\t\tvar keepedItems = [] ;\n\t\tfor(var i=0 ; i<this._items.length ; i++) {\n\t\t\t// console.log(\"this._items[i].fakeGroup.indexOf(fakeGroupName)\",this._items[i].fakeGroup.indexOf(fakeGroupName),fakeGroupName);\n\t\t\tif (this._items[i].fakeGroup.indexOf(fakeGroupName)<0) keepedItems.push(this._items[i]) ;\n\t\t\telse this._items[i].destroy() ;\n\t\t}\n\t\tthis._items = keepedItems ;\n\t}\n\tgetCurrentModel() {\n\t\treturn this._currentModel ;\n\t}\n\tdisable() {\n\t\tfor(var i=0 ; i<this._items.length ; i++) {\n\t\t\tif (this._items[i].disable) this._items[i].disable() ;\n\t\t}\n\t}\n};\n\n\n/**\n * Base class to input form\n * @class\n * @memberof! <global>\n * @extends M_.Outlet\n * @property {type} name\n * @property {type} value\n * @property {type} autoContainer\n * @property {type} hideContainerIfEmpty\n * @property {type} placeholder\n * @property {type} form\n * @property {type} inputType\n * @property {type} editable\n * @property {type} clsInput\n * @property {type} clsGroup\n * @property {type} clsLabel\n * @property {type} styleInput\n * @property {type} styleGroup\n * @property {type} styleLabel\n * @property {type} label\n * @property {type} labelPosition\n * @property {type} labelWidth\n * @property {type} labelFocusInput\n * @property {type} dontSave\n * @property {type} fakeGroup\n * @property {type} allowEmpty\n * @property {type} minLength\n * @property {type} maxLength\n * @property {type} disabled\n */\nM_.Form.Input = class extends M_.Outlet {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tname: '',\n\t\t\tvalue: '',\n\t\t\tautoContainer: null,\n\t\t\t// modelValue: '',\n\t\t\t// modelKey: '',\n\t\t\thideContainerIfEmpty: false,\n\t\t\tplaceholder: '',\n\t\t\tform: null,\n\t\t\tinputType: 'hidden',\n\t\t\ttabindex: 0,\n\t\t\teditable: true,\n\t\t\t_inEdit: false,\n\t\t\t_clsMore: '',\n\t\t\tclsInput: '',\n\t\t\tclsGroup: '',\n\t\t\tclsLabel: '',\n\t\t\tstyleInput: '',\n\t\t\tstyleGroup: '',\n\t\t\tstyleLabel: '',\n\t\t\tlabel: \"\",\n\t\t\tlabelPosition: 'top',\n\t\t\tlabelWidth: 0,\n\t\t\tlabelFocusInput: true,\n\t\t\tdontSave: false,\n\t\t\tfakeGroup: [],\n\t\t\tallowEmpty: true,\n\t\t\tminLength: null,\n\t\t\tmaxLength: null,\n\t\t\tdisabled: false,\n\t\t\tpreviousValue: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t\tif (typeof this.fakeGroup === 'string') this.fakeGroup = [this.fakeGroup] ;\n\n\t\tif ((this.labelPosition=='left' || this.labelPosition=='right') && this.labelWidth===0) this.labelWidth = 0.3 ;\n\n\t\tthis.setValue(this.value) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetLabel(txt) {\n\t\tthis.container.find('label').html(txt) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tif (M_.Utils.isEmpty(this.id)) this.id = M_.Utils.id() ;\n\t\tvar v = this.value ;\n\t\tif ($.type(v)!==\"string\") v = '' ;\n\t\tif ((this.labelPosition=='left') && this.label!=='') {\n\t\t\tthis.clsLabel += \" M_LabelLeft\" ;\n\t\t\tthis.clsInput += \" M_InputLeft\" ;\n\t\t}\n\t\tif ((this.labelPosition=='right') && this.label!=='') {\n\t\t\tthis.clsLabel += \" M_LabelRight\" ;\n\t\t\tthis.clsInput += \" M_InputRight\" ;\n\t\t}\n\t\tif (this.labelWidth>0 && this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='right') && this.inputType!='checkbox') {\n\t\t\tif (this.labelWidth<=1) {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth*100)+\"%;\" ;\n\t\t\t\tthis.styleInput += \" width:\"+(100-this.labelWidth*100)+\"%;\" ;\n\t\t\t} else {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth)+\"px;\" ;\n\t\t\t\tthis.styleInput += \" width:calc(100% - \"+(this.labelWidth)+\"px);\" ;\n\t\t\t}\n\t\t}\n\n\t\tvar html = \"\" ;\n\t\tvar readOnly = \"\" ;\n\t\tvar forattr = \"\" ;\n\t\tvar tabindex = \"\" ;\n\t\tif (this.tabindex) tabindex = 'tabindex=\"'+this.tabindex+'\"' ;\n\t\tif (this.labelFocusInput) forattr = 'for=\"'+this.id+'\"' ;\n\t\tif (!this.editable) readOnly = \"readonly\" ;\n\t\tif (this.inputType=='hidden') {\n\t\t\thtml += `<input ${readOnly} id=\"${this.id}\" type=\"${this.inputType}\" class=\"M_Input\" name=\"${this.name}\" value=\"${v}\">` ;\n\t\t} else {\n\t\t\thtml += `<div style=\"${this.styleGroup}\" class=\"M_FormGroup ${this.clsGroup}\">` ;\n\t\t\tif (this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='top')) html += `<label style=\"${this.styleLabel}\" class=\"${this.clsLabel}\" ${forattr}>${this.label}</label>` ;\n\t\t\t// if (this._addInputGroup) html += `<div class=\"M_InputGroup\">` ;\n\t\t\tvar multiple = \"\" ;\n\t\t\tif (this.multiple) multiple = \"multiple\" ;\n\t\t\tif (this.inputType=='file') {\n\t\t\t\thtml += `<input ${tabindex} ${readOnly} id=\"${this.id}\" type=\"${this.inputType}\" style=\"${this.styleInput}\" ${multiple} class=\"M_Input ${this.clsInput}\" name=\"${this.name}\" value=\"${v}\" placeholder=\"${this.placeholder}\">` ;\n\t\t\t} else if (this.inputType=='textarea') {\n\t\t\t\tif (!this.height) this.height = 100;\n\t\t\t\tthis.styleInput += ' height:'+this.height+'px;' ;\n\t\t\t\thtml += `<textarea ${tabindex} placeholder=\"${this.placeholder}\" ${readOnly} id=\"${this.id}\" class=\"M_Input ${this.clsInput}\" style=\"${this.styleInput}\" rows=\"${this.rows}\" name=\"${this.name}\">${v}</textarea>` ;\n\t\t\t} else if (this.inputType=='none') {\n\t\t\t\thtml += `<div id=\"${this.id}\"></div>` ;\n\t\t\t} else {\n\t\t\t\tvar incremental = '' ;\n\t\t\t\tif (this.incremental) incremental = 'incremental=\"incremental\"' ;\n\t\t\t\thtml += `<input ${tabindex} ${readOnly} id=\"${this.id}\" ${incremental} type=\"${this.inputType}\" style=\"${this.styleInput}\" class=\"M_Input ${this._clsMore} ${this.clsInput}\" name=\"${this.name}\" value=\"${v}\" placeholder=\"${this.placeholder}\">` ;\n\t\t\t}\n\t\t\t// if (this._addInputGroup) html += `</div>` ;\n\t\t\tif (this.label!=='' && (this.labelPosition=='bottom' || this.labelPosition=='right')) html += `<label style=\"${this.styleLabel}\" class=\"${this.clsLabel}\" ${forattr}\">${this.label}</label>` ;\n\t\t\thtml +=  `</div>` ;\n\t\t}\n\t\t// log(\"html\",html)\n\t\tthis.container.append(html) ;\n\t\tthis.jEl = $(\"#\"+this.id) ;\n\t\tif (this.disabled) this.jEl.prop('disabled',true) ;\n\t\t// this.jEl = this.container.find('.M_Input') ;\n\t\t// this.jEl.attr('data-m-after', this.placeholder) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\treset() {\n\t\tthis.setValue('') ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tdisable() {\n\t\tthis.disabled = true ;\n\t\tthis.jEl.prop('disabled',true) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tenable() {\n\t\tthis.disabled = false ;\n\t\tthis.jEl.prop('disabled',false) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tvalid() {\n\t\tvar ok = true,\n\t\t\tval = this.getValue(),\n\t\t\terr = \"\" ;\n\t\tif (!this.allowEmpty && M_.Utils.isEmpty(val)) {\n\t\t\tok = false ;\n\t\t\terr = \"Ce champs ne peut pas tre vide\\n\" ;\n\t\t}\n\t\tif (this.minLength!==null && val.length<this.minLength) {\n\t\t\tif (val.length===0 && this.allowEmpty) {\n\t\t\t} else {\n\t\t\t\tok = false ;\n\t\t\t\terr = \"La longeur minimum est de \"+this.minLength+\" pour ce champs\\n\" ;\n\t\t\t}\n\t\t}\n\t\tif (this.maxLength!==null && val.length>this.maxLength) {\n\t\t\tok = false ;\n\t\t\terr = \"La longeur maximum est de \"+this.maxLength+\" pour ce champs\\n\" ;\n\t\t}\n\t\tthis.informValid(ok) ;\n\t\treturn ok ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tinformValid(ok) {\n\t\tif (!ok) this.jEl.addClass('M_Error') ;\n\t\telse this.jEl.removeClass('M_Error') ;\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisEmpty() {\n\t\t// log(\"isEmpty\",\"'\"+this.value+\"'\")\n\t\tvar v = this.getValue() ;\n\t\tif (v==='' || v===null) return true ;\n\t\treturn false ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\t// console.log(\"setValuePrim\", val);\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t\tthis.jEl.val(val) ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tthis.value = this.jEl.val() ;\n\t\treturn this.value ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\thide() {\n\t\tthis.container.hide() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tshow() {\n\t\tthis.container.show() ;\n\t}\n};\n\n\nM_.Form.Slider = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tplaceholder: \"\",\n\t\t\tinputType: 'perso',\n\t\t\tjElCursor: null,\n\t\t\tsteps: 2,\n\t\t\tvalue: 0,\n\t\t\tlabelLeft: \"Left\",\n\t\t\tlabelRight: \"Right\",\n\t\t\tlabelWidth: 50,\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\tcreate() {\n\t\tif (M_.Utils.isEmpty(this.id)) this.id = M_.Utils.id() ;\n\t\tvar v = this.value ;\n\t\tvar jEl = $(\"<div class='M_Slider'><label class='M_SliderLabelLeft'>\"+this.labelLeft+\"</label><div class='M_SliderBar'><div class='M_SliderCursor'></div></div><label class='M_SliderLabelRight'>\"+this.labelRight+\"</label><div class='M_Clear'></div></div>\") ;\n\t\tvar wLabels = 0 ;\n\t\tif (this.labelLeft==='') {\n\t\t\tjEl.find('.M_SliderLabelLeft').remove() ;\n\t\t} else {\n\t\t\twLabels += this.labelWidth ;\n\t\t\tjEl.find('.M_SliderLabelLeft').width(this.labelWidth) ;\n\t\t}\n\t\tif (this.labelRight==='') {\n\t\t\tjEl.find('.M_SliderLabelRight').remove() ;\n\t\t} else {\n\t\t\twLabels += this.labelWidth ;\n\t\t\tjEl.find('.M_SliderLabelRight').width(this.labelWidth) ;\n\t\t}\n\t\tthis.container.append(jEl) ;\n\t\tthis.jEl = jEl.find('.M_SliderBar') ;\n\t\tthis.jElCursor = jEl.find('.M_SliderCursor') ;\n\t\tthis._spaceCursor = this.jElCursor.position().left;\n\n\t\tthis.jEl.css('width', 'calc(100% - '+wLabels+'px)');\n\n\t\tthis.jElCursor.width((this.jEl.width() - this._spaceCursor*2)/this.steps);\n\t\tthis.jEl.click((evt)=> {\n\t\t\tvar pos = 0 ;\n\t\t\tif (this.steps==2) {\n\t\t\t\tif (!this.getValue()) pos = 1 ;\n\t\t\t\tthis.setValue(pos) ;\n\t\t\t} else {\n\t\t\t\tvar parentOffset = $(evt.target).closest('.M_Slider').offset();\n\t\t\t\tvar relX = evt.pageX - parentOffset.left;\n\t\t\t\tvar w = this.jEl.width();\n\t\t\t\t// console.log(\"w % this.steps\", Math.ceil(relX / (w/this.steps)));\n\t\t\t\tpos = Math.ceil(relX / (w/this.steps))-1 ;\n\t\t\t\t// if (pos<0) pos = 0 ;\n\t\t\t\tthis.setValue(pos) ;\n\t\t\t}\n\t\t\tthis.trigger('change', this, pos) ;\n\t\t});\n\t}\n\tsetPosition(pos) {\n\t\tvar w = this.jEl.width();\n\t\tvar l = pos*(w/this.steps) ;\n\t\tif (pos===0) l += this._spaceCursor ;\n\t\tthis.jElCursor.transition({left:l});\n\t}\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t\tthis.setPosition(val) ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tif (this.steps==2) {\n\t\t\tif (this.value==1) return true ;\n\t\t\treturn false ;\n\t\t}\n\t\treturn this.value ;\n\t}\n};\n\n/**\n * Hidden input form\n * @class\n * @extends M_.Form.Input\n * @memberof! <global>\n */\nM_.Form.Hidden = class extends M_.Form.Input {\n\tsetValue(val) {\n\t\tif (_.isPlainObject(val)) val = val[this.name] ;\n\t\tsuper.setValue(val) ;\n\t}\n};\n\n/**\n * A multi is a combobox + a list of values\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n * @property {type} confirmDelete\n * @property {type} confirmDeleteMessage\n * @property {type} value\n * @property {type} onClickBtAdd\n */\nM_.Form.Multi = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'none',\n\t\t\tconfirmDelete: false,\n\t\t\tconfirmDeleteMessage: \"Etes-vous certain de vouloir supprimer ce mot cl ?\",\n\t\t\tvalue: [],\n\t\t\tonClickBtAdd: null\n\t\t} ;\n\t\tvar _idBtAddKeyword = M_.Utils.id() ;\n\t\tif (opts.label) opts.label += \" <span id='\"+_idBtAddKeyword+\"' class='fa fa-plus faa-pulse animated-hover'>\" ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t\t// this._idBtAddKeyword = _idBtAddKeyword ;\n\t\tthis.drawContainer() ;\n\t\t$(\"#\"+_idBtAddKeyword).click(()=> {\n\t\t\tif (this.onClickBtAdd) this.onClickBtAdd(this, this.value) ;\n\t\t}) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tdrawContainer() {\n\t\t// log(\"this.value\",this.value)\n\t\tthis.jEl.empty() ;\n\t\t_.each(this.value, (val)=> {\n\t\t\tlet html = `<div class=\"M_ComboboxMultiItem selected\" data-kw-id=\"${val}\">${val} <span class=\"fa fa-trash faa-pulse animated-hover\"></span></div>` ;\n\t\t\tlet jEl = $(html) ;\n\t\t\tthis.jEl.append(jEl) ;\n\t\t\tjEl.find('.fa-trash').click((evt)=> {\n\t\t\t\tif (this.confirmDelete) {\n\t\t\t\t\tM_.Dialog.confirm(\"Confirmation effacement\", this.confirmDeleteMessage, ()=> {\n\t\t\t\t\t}) ;\n\t\t\t\t} else {\n\t\t\t\t\tthis.removeValue($(evt.target).parent().attr(\"data-kw-id\")) ;\n\t\t\t\t}\n\t\t\t}) ;\n\t\t}) ;\n\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tremoveValue(val) {\n\t\t_.pull(this.value, val);\n\t\tthis.drawContainer() ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tif (val===\"\") val=[] ;\n\t\tthis.value = val ;\n\t\tthis.drawContainer() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\treturn this.value ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddValue(val) {\n\t\tthis.value.push(val) ;\n\t}\n};\n\n/**\n * Display stars to rate\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n * @property {type} value\n * @property {type} nbStars\n */\nM_.Form.Rating = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'none',\n\t\t\tvalue: -1,\n\t\t\tnbStars: 5\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t\t// this._idBtAddKeyword = _idBtAddKeyword ;\n\t\t// $(\"#\"+_idBtAddKeyword).click(()=> {\n\t\t// \tif (this.onClickBtAdd) this.onClickBtAdd(this, this.value) ;\n\t\t// }) ;\n\t\tthis.jEl.addClass('M_FormRate') ;\n\t\tfor(var i=0 ; i<this.nbStars ; i++) {\n\t\t\tvar el = $(\"<div class='M_FormRateItem'>\"+i+\"</div>\") ;\n\t\t\tthis.jEl.append(el) ;\n\t\t\tel.mouseenter({note:i}, (evt)=> {\n\t\t\t\tif (this._toExitStar) window.clearTimeout(this._toExitStar) ;\n\t\t\t\t// log(\"mouseover\", evt.data.note, $(evt.target))\n\t\t\t\t// $(evt.target).addClass('over') ;\n\t\t\t\tfor(var i=0 ; i<this.nbStars ; i++) {\n\t\t\t\t\tif (i<=evt.data.note*1) this.jEl.find('.M_FormRateItem:nth-child('+(i+1)+')').addClass('over') ;\n\t\t\t\t\telse this.jEl.find('.M_FormRateItem:nth-child('+(i+1)+')').removeClass('over') ;\n\t\t\t\t}\n\t\t\t}) ;\n\t\t\tel.mouseleave({note:i}, (evt)=> {\n\t\t\t\tthis._toExitStar = window.setTimeout(()=> {\n\t\t\t\t\tthis._toExitStar = null ;\n\t\t\t\t\tthis.setValue(this.value) ;\n\t\t\t\t}, 300) ;\n\t\t\t}) ;\n\t\t\tel.click({note:i}, (evt)=> {\n\t\t\t\tthis.setValue(evt.data.note*1) ;\n\t\t\t}) ;\n\t\t}\n\t\tthis.drawContainer() ;\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tdrawContainer() {\n\t\t// this.jEl.empty() ;\n\t\t// this.jEl.removeClass('M_FormRate') ;\n\t\tfor(var i=0 ; i<this.nbStars ; i++) {\n\t\t\tif (i<=this.value*1) this.jEl.find('.M_FormRateItem:nth-child('+(i+1)+')').addClass('over') ;\n\t\t\telse this.jEl.find('.M_FormRateItem:nth-child('+(i+1)+')').removeClass('over') ;\n\t\t}\n\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tremoveValue(val) {\n\t\t_.pull(this.value, val);\n\t\tthis.drawContainer() ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tif (val===\"\") val=0 ;\n\t\tthis.value = val ;\n\t\tthis.drawContainer() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\treturn this.value ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\taddValue(val) {\n\t\tthis.value.push(val) ;\n\t}\n};\n\n\n/**\n * Input file form\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} placeholder\n * @property {type} inputType\n * @property {type} regxValidChar\n */\nM_.Form.File = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tplaceholder: \"\",\n\t\t\tinputType: 'file',\n\t\t\tmultiple: false,\n\t\t\tregxValidChar: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tthis.value = this.jEl.val() ;\n\t\t// if (this.jEl.get(0).files.length>0) return this.jEl.get(0).files[0] ;\n\t\treturn this.value ;\n\t\t// return this.value ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t}\n\n};\n\n\n/**\n * Input text form\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} placeholder\n * @property {type} inputType\n * @property {type} regxValidChar\n */\nM_.Form.Text = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tplaceholder: \"\",\n\t\t\tinputType: 'text',\n\t\t\tregxValidChar: null,\n\t\t\tselectOnFocus: false\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\n\t\t// this.jEl.keypress((evt)=> {\n\t\t// \t// log(\"evt.which\",evt.which)\n\t\t// \tif (this.jEl.hasClass('M_editablePlaceholder')) {\n\t\t// \t\tthis.jEl.removeClass('M_editablePlaceholder') ;\n\t\t// \t\tthis.jEl.empty() ;\n\t\t// \t}\n\t\t// \tif(evt.which == 13) {\n\t\t// \t\tevt.preventDefault() ;\n\t\t// \t\tthis.form.edit(false) ;\n\t\t// \t\tthis.jEl.blur() ;\n\t\t// \t}\n\t\t// }) ;\n\t\t// this.jEl.keydown((evt)=> {\n\t\t// \t// log(\"keydownevt.which\",evt.which)\n\t\t// }) ;\n\t\tthis.jEl.keyup((evt)=> {\n\t\t\tif (evt.which==13) {\n\t\t\t\tif (this.onEnterInput(evt)!==false) {\n\t\t\t\t\tthis.onKeyup(evt) ;\n\t\t\t\t}\n\t\t\t} else this.onKeyup(evt) ;\n\t\t}) ;\n\t\tthis.jEl.keypress((evt)=> {\n\t\t\tthis.onKeyPress(evt) ;\n\t\t}) ;\n\t\tif (this.selectOnFocus) {\n\t\t\tthis.jEl.focus((evt)=> {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.jEl.select() ;\n\t\t\t}) ;\n\t\t}\n\t}\n\tonEnterInput(evt) {\n\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tonKeyup(evt) {\n\t\t// this.value = this.jEl.val() ;\n\t\tthis.trigger(\"keyup\", this, evt) ;\n\t\tthis.trigger(\"update\", this, this.getValue()) ;\n\t\tthis.valid() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tonKeyPress(evt) {\n\t\tthis.trigger(\"keypress\", this, evt) ;\n\t\tif (evt.which == 13) return true ;\n\t\tif (evt.which == 9) return true ;\n\t\tif (evt.which == 8) return true ;\n\t\tif (!this.validChar(String.fromCharCode(evt.which))) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation();\n\t\t\t// this.informValid(2);\n\t\t\treturn false;\n\t\t}\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tvalidChar(txt) {\n\t\tif (this.regxValidChar === null) return true ;\n\t\tvar reg = new RegExp(this.regxValidChar) ;\n\t\tvar ok = reg.test(txt) ;\n\t\treturn ok ;\n\t}\n\n};\n\n\nM_.Form.Search = class extends M_.Form.Text {\n   constructor(opts) {\n\t   var defaults = {\n\t\t   inputType: 'search',\n\t\t   incremental: true\n\t   } ;\n\t   opts = (opts)?opts:{} ;\n\t   opts = $.extend({}, defaults, opts) ;\n\t   super(opts) ;\n\n\t   if (M_.Utils.isEventSupported('search')) {\n\t\t   this.jEl.on('search', (evt)=> {\n\t\t\t   this.trigger(\"search\", this, evt) ;\n\t\t   }) ;\n\t   } else {\n\t\t   this.jEl.on('keyup', (evt)=> {\n\t\t\t   this.trigger(\"search\", this, evt) ;\n\t\t   }) ;\n\t   }\n   }\n};\n\n\n/**\n * Input textarea form\n * @class\n * @memberof! <global>\n * @extends M_.Form.Text\n * @property {type} inputType\n * @property {type} acceptTabulation\n * @property {type} rows\n */\n M_.Form.Textarea = class extends M_.Form.Text {\n \tconstructor(opts) {\n \t\tvar defaults = {\n \t\t\tinputType: 'textarea',\n \t\t\tacceptTabulation: false,\n \t\t\trows: 4\n \t\t} ;\n \t\topts = (opts)?opts:{} ;\n \t\topts = $.extend({}, defaults, opts) ;\n \t\tsuper(opts) ;\n\n \t\tif (this.acceptTabulation) {\n \t\t\tthis.jEl.on('keydown', (e)=> {\n \t\t\t\tvar keyCode = e.keyCode || e.which;\n \t\t\t\tif (keyCode == 9) {\n \t\t\t\t\te.preventDefault();\n \t\t\t\t\tvar start = this.jEl.get(0).selectionStart;\n \t\t\t\t\tvar end = this.jEl.get(0).selectionEnd;\n \t\t\t\t\tthis.jEl.val(this.jEl.val().substring(0, start) + \"\\t\" + this.jEl.val().substring(end));\n \t\t\t\t\tthis.jEl.get(0).selectionStart = this.jEl.get(0).selectionEnd = start + 1;\n \t\t\t\t}\n \t\t\t}) ;\n \t\t}\n\n \t}\n\n };\n\n M_.Form.Password = class extends M_.Form.Text {\n \tconstructor(opts) {\n \t\tvar defaults = {\n \t\t\tinputType: 'password',\n \t\t\tcheckstrength: true\n \t\t} ;\n \t\topts = (opts)?opts:{} ;\n \t\topts = $.extend({}, defaults, opts) ;\n \t\tsuper(opts) ;\n\n \t\tif (this.checkstrength) {\n\t\t\tthis.jElPass = $(\"<div class='M_DivPassword'>OK</div>\") ;\n\t\t\tthis.jElPass.hide() ;\n\t\t\tthis.container.append(this.jElPass) ;\n\t\t\tthis.container.css('position','relative') ;\n \t\t\tthis.jEl.on('keyup', (e)=> {\n\t\t\t\tvar pos = this.jEl.offset() ;\n\t\t\t\tthis.jElPass.show() ;\n\t\t\t\tvar score = this.checkPassword() ;\n\t\t\t\tthis.jElPass.removeClass('bg_col3 bg_col5 bg_col2') ;\n\t\t\t\tif (score<2) {\n\t\t\t\t\tthis.jElPass.addClass('bg_col3').html(\"Mauvais\") ;\n\t\t\t\t} else if (score < 4) {\n\t\t\t\t\tthis.jElPass.addClass('bg_col5').html(\"Moyen\") ;\n\t\t\t\t} else {\n\t\t\t\t\tthis.jElPass.addClass('bg_col2').html(\"Bon\") ;\n\t\t\t\t}\n\t\t\t\tthis.jElPass.offset({\n\t\t\t\t\ttop: pos.top,\n\t\t\t\t\tleft: pos.left+this.jEl.outerWidth()-this.jElPass.outerWidth()\n\t\t\t\t}).outerHeight(this.jEl.outerHeight()) ;\n \t\t\t}) ;\n \t\t}\n\n \t}\n\tcheckPassword() {\n\t\tvar v = this.jEl.val() ;\n\t\tvar err = [] ;\n\t\tvar score = 0 ;\n\t\tif(v.length < this.minLength) {\n\t\t\terr.push(this.minLength+\" char minimum\") ;\n\t\t} else score++ ;\n\t\tvar re = /[0-9]/;\n\t\tif(!re.test(v)) {\n\t\t\terr.push(\"password must contain at least one number (0-9)!\");\n\t\t} else score++ ;\n\t\tre = /[a-z]/;\n\t\tif(!re.test(v)) {\n\t\t\terr.push(\"password must contain at least one lowercase letter (a-z)!\");\n\t\t} else score++ ;\n\t\tre = /[A-Z]/;\n\t\tif(!re.test(v)) {\n\t\t\terr.push(\"password must contain at least one uppercase letter (A-Z)!\");\n\t\t} else score++ ;\n\t\treturn score ;\n\t}\n };\n\n\n/**\n * A wysiwyg editor\n * @class\n * @memberof! <global>\n * @extends M_.Form.Textarea\n * @property {type} heightEditor\n */\nM_.Form.TextEditor = class extends M_.Form.Textarea {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\theightEditor: 200\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tsuper.create() ;\n\n\t\t// var h = this.jEl.height() ;\n\t\tthis.jEl.hide() ;\n\t\tvar idTemp1 = M_.Utils.id() ;\n\t\tvar idTemp2 = M_.Utils.id() ;\n\t\tthis.jEl.after(\"<div id='\"+idTemp1+\"'></div><div><div class='M_FormEditor-Content' id='\"+idTemp2+\"'></div></div>\") ;\n\t\t$(\"#\"+idTemp2).height(this.heightEditor) ;\n\t\tthis.editor = new M_.Editor({\n\t\t\tbuttonsContainer: $(\"#\"+idTemp1),\n\t\t\tcontainer: $(\"#\"+idTemp2)\n\t\t}) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t\tthis.jEl.val(val) ;\n\t\tthis.editor.container.html(val) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\tvar val = this.editor.container.html() ;\n\t\tthis.jEl.val(val) ;\n\t\treturn val ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetEditor() {\n\t\treturn this.editor ;\n\t}\n};\n\n/**\n * A radio buttons group\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n * @property {type} radioPosition\n * @property {type} items\n */\nM_.Form.RadioGroup = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'radiogroup',\n\t\t\tradioPosition: 'inline', // inline | col\n\t\t\titems: []\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\t// var id1 = M_.Utils.id(),\n\t\t// \tid2 = M_.Utils.id() ;\n\n\n\t\tif (M_.Utils.isEmpty(this.id)) this.id = M_.Utils.id() ;\n\t\tvar v = this.value ;\n\t\tif ($.type(v)!==\"string\") v = '' ;\n\t\tif ((this.labelPosition=='left' || this.labelPosition=='right') && this.label!=='') {\n\t\t\tthis.clsLabel += \" M_LabelLeft\" ;\n\t\t\tthis.clsInput += \" M_InputLeft\" ;\n\t\t}\n\t\tif (this.labelWidth>0 && this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='right') && this.inputType!='checkbox') {\n\t\t\tif (this.labelWidth<=1) {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth*100)+\"%;\" ;\n\t\t\t\tthis.styleInput += \" width:\"+(100-this.labelWidth*100)+\"%;\" ;\n\t\t\t} else {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth)+\"px;\" ;\n\t\t\t\tthis.styleInput += \" width:calc(100% - \"+(this.labelWidth)+\"px);\" ;\n\t\t\t}\n\t\t}\n\n\t\tvar html = \"\" ;\n\t\tvar readOnly = \"\" ;\n\t\tvar forattr = \"\" ;\n\t\tif (this.labelFocusInput) forattr = 'for=\"'+this.id+'\"' ;\n\t\tif (!this.editable) readOnly = \"readonly\" ;\n\n\t\t// var html = `<div class='M_HorizontalForm'></div></div>` ;\n\n\n\t\thtml += `<div style=\"${this.styleGroup}\" class=\"M_FormGroup ${this.clsGroup}\">` ;\n\t\tif (this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='top')) html += `<label style=\"${this.styleLabel}\" class=\"${this.clsLabel}\" ${forattr}>${this.label}</label>` ;\n\t\thtml += `<div id=\"${this.id}\" type=\"${this.inputType}\" style=\"${this.styleInput}\" class=\"M_Input ${this.clsInput}\">` ;\n\t\tvar nameTemp = M_.Utils.id() ;\n\t\t_.each(this.items, (item)=> {\n\t\t\tlet idTemp = M_.Utils.id() ;\n\t\t\thtml += `<div class=\"M_RadioGroupItem ${this.radioPosition}\"><input type='radio' name=\"${nameTemp}\" id=\"${idTemp}\" value=\"${item.key}\" class=\"M_InputRight\"/><label for=\"${idTemp}\" class=\"M_LabelRight\">${item.val}</label></div>` ;\n\t\t}) ;\n\t\thtml +=  `</div></div>` ;\n\n\t\tthis.container.append(html) ;\n\t\tthis.jEl = this.container.find('.M_HorizontalForm') ;\n\n\t\tthis.container.find('input').click((evt)=> {\n\t\t\tthis.trigger(\"change\", this, this.getValue(), evt) ;\n\t\t}) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t\tthis.container.find('input').each((ind, el)=> {\n\t\t\tif (el.value==this.value) $(el).prop('checked', true) ;\n\t\t\telse $(el).prop('checked', false) ;\n\t\t}) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\tvar v = this.container.find('input:checked').val() ;\n\t\treturn v ;\n\t}\n};\n\n\n/**\n * Input checkbox form\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n * @property {type} labelWidth\n * @property {type} labelFocusInput\n * @property {type} labelPosition\n */\nM_.Form.Checkbox = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'checkbox',\n\t\t\tlabelWidth: 100,\n\t\t\tlabelFocusInput: true,\n\t\t\tlabelPosition: 'right',\n\t\t\tthreeStates: false,\n\t\t\tindeterminate: false,\n\t\t\tpreviousValue: false\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t\tif (this.threeStates) {\n\t\t\tvar v = 0 ;\n\t\t\tif (this.value) v = 1 ;\n\t\t\tif (this.indeterminate) v = 2 ;\n\t\t\tthis.jEl.data('checked',v) ;\n\t\t\tif (v===2) this.jEl.prop('indeterminate',true);\n\t\t}\n\t\tthis.jEl.change((evt)=> {\n\t\t\tif (this.indeterminate) {\n\t\t\t\tswitch(this.jEl.data('checked')) {\n\t\t\t\t\t// unchecked, going indeterminate\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tthis.jEl.data('checked',1);\n\t\t\t\t\t\tthis.jEl.prop('indeterminate',true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// indeterminate, going checked\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tthis.jEl.data('checked',2);\n\t\t\t\t\t\tthis.jEl.prop('indeterminate',false);\n\t\t\t\t\t\tthis.jEl.prop('checked',true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// checked, going unchecked\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.jEl.data('checked',0);\n\t\t\t\t\t\tthis.jEl.prop('indeterminate',false);\n\t\t\t\t\t\tthis.jEl.prop('checked',false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.trigger(\"change\", this, this.getValue(), evt) ;\n\t\t}) ;\n\t\tif (this.indeterminate) this.jEl.prop('indeterminate', true) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\t setValue(val) {\n\t\t// console.log(\"val\", val);\n\t\tif (val==='' || val==='false' || val==='0' || val===0) val = false ;\n\t\tif (val==='true' || val==='1' || val===1) val = true ;\n\t\tthis.previousValue = this.value ;\n\t\tthis.value = val ;\n\t\tif (val) this.jEl.prop('checked', true);\n\t\telse this.jEl.prop('checked', false);\n\t\tif (this.threeStates) {\n\t\t\tvar v = 0 ;\n\t\t\tif (val) v = 1 ;\n\t\t\tif (val==2) v = 2 ;\n\t\t\tthis.jEl.data('checked',v) ;\n\t\t\tif (v===2) this.jEl.prop('indeterminate',true);\n\t\t\telse this.jEl.prop('indeterminate',false);\n\t\t}\n\t}\n\timcheckbox() {\n\t\treturn \"ok\" ;\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tif (this.threeStates) {\n\t\t\tif (this.jEl.prop('indeterminate')) return 2 ;\n\t\t}\n\t\treturn this.jEl.is(\":checked\") ;\n\t}\n\n};\n\n/**\n * Input number form ; only number are accepted\n * @class\n * @memberof! <global>\n * @extends M_.Form.Text\n * @property {type} decimalLength\n * @property {type} decimalSeparator\n * @property {type} decimalForced\n * @property {type} allowNegative\n * @property {type} valueMax\n * @property {type} valueMin\n * @property {type} startEmpty\n * @property {type} allowComparison allow signs : > or < or = or >= or <=\n */\nM_.Form.Number = class extends M_.Form.Text {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\t// inputType: 'number',\n\t\t\tdecimalLength: 0,\n\t\t\tdecimalSeparator: ',',\n\t\t\tdecimalForced: false,\n\t\t\tallowNegative: true,\n\t\t\tvalueMax: null,\n\t\t\tvalueMin: null,\n\t\t\tstartEmpty: false,\n\t\t\tallowComparison: false\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\t// onKeyup(evt) {}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tvalidChar(txt) {\n\t\tvar re = \"\\\\d\";\n\t\tif (this.allowNegative)\n\t\t\tre += \"|\\\\-\";\n\t\tif (this.decimalLength > 0)\n\t\t\tre += \"|\\\\\" + this.decimalSeparator;\n\t\tif (this.allowComparison)\n\t\t\tre += \"|\\>|\\<|\\=\" ;\n\t\tthis.regxValidChar = re;\n\t\treturn super.validChar(txt);\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(v) {\n\t\t// log(\"setValue\",v)\n\t\tif (v==='' && this.startEmpty) return this.jEl.val('');\n\t\tv = v * 1;\n\t\tthis.value = v;\n\t\tvar v2 = v;\n\t\tv2 = (v2 + \"\").replace(\".\", this.decimalSeparator);\n\t\tif (this.decimalForced) {\n\t\t\tlet dec = v % 1,\n\t\t\t\tnbDec = Math.pow(10, this.decimalLength),\n\t\t\t\tdec2 = Math.floor((dec*nbDec)) ;\n\t\t\tdec2 = M_.Utils.str_pad(dec2, this.decimalLength, \"0\", -1) ;\n\t\t\t// log(\"dec\",dec, nbDec, dec2)\n\t\t\tv2 = Math.floor(v)+this.decimalSeparator+dec2 ;\n\t\t}\n\t\tthis.jEl.val(v2);\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tvar v = (this.jEl.val() + \"\").replace(this.decimalSeparator, \".\");\n\t\tthis.value = v * 1;\n\t\tif (this.allowComparison) this.value = v ;\n\t\treturn this.value ;\n\t}\n};\n\n/**\n * Input price form ; only number are accepted\n * @class\n * @memberof! <global>\n * @extends M_.Form.Number\n * @property {type} decimalLength\n * @property {type} decimalSeparator\n * @property {type} decimalForced\n * @property {type} allowNegative\n */\n M_.Form.Price = class extends M_.Form.Number {\n \tconstructor(opts) {\n \t\tvar defaults = {\n \t\t\tdecimalLength: 2,\n \t\t\tdecimalSeparator: ',',\n \t\t\tdecimalForced: true,\n \t\t\tallowNegative: true\n \t\t} ;\n \t\topts = (opts)?opts:{} ;\n \t\topts = $.extend({}, defaults, opts) ;\n \t\tsuper(opts) ;\n \t}\n };\n\n\n\n\n/**\n * Input color form ; TO implement !!!!\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n */\nM_.Form.Color = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'color'\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\t}\n\n};\n\n/**\n * A base class to add a picker to input text form\n * @class\n * @memberof! <global>\n * @extends M_.Form.Text\n * @property {type} hidePicker\n * @property {type} showDropdownOnFocus\n * @property {type} icon\n * @property {type} containerDropdown\n */\nM_.Form.Picker = class extends M_.Form.Text {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\talwaysDropdownBelow: false,\n\t\t\thasDropdown: true,\n\t\t\thidePicker: false,\n\t\t\tshowDropdownOnFocus: true,\n\t\t\ticon: 'fa fa-caret-down',\n\t\t\tcontainerDropdown: null,\n\t\t\t_clsMore: 'M_Combobox',\n\t\t\tstylePicker: '',\n\t\t\tdropdownOpts: {},\n\t\t\tdropdown: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tif (!optsTemp.containerDropdown) optsTemp.containerDropdown = optsTemp.container ;\n\t\toptsTemp.containerDropdown = 'body' ;\n\t\t// log(\"optsTemp.containerDropdown\",optsTemp.containerDropdown,optsTemp.container)\n\n\n\t\tsuper(optsTemp) ;\n\n\n\t\tif (this.showDropdownOnFocus && this.hasDropdown) {\n\t\t\tthis._sameEventEventClick = false ;\n\t\t\tthis.jEl.on('click', (evt)=> {// focus\n\t\t\t\t// console.log(\"this._sameEventEventClick\", this._sameEventEventClick);\n\t\t\t\tif (!this._sameEventEventClick) this.showDropdown(evt) ;\n\t\t\t\tthis._sameEventEventClick = true ;\n\t\t\t\tM_.Utils.delay(()=> {\n\t\t\t\t\tthis._sameEventEventClick = false ;\n\t\t\t\t}, 200, \"_sameEventEventClick\") ;\n\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreateDropdown() {\n\t\tif (this.dropdown) return ;\n\t\tif (!this.hasDropdown) return ;\n\t\t// console.log(\"createDropdown\");\n\t\tvar optsTemp = $.extend({}, {\n\t\t\talignTo: this.jEl,\n\t\t\tautoShow: false,\n\t\t\tdestroyOnHide: true,\n\t\t\tcontainer: this.containerDropdown,\n\t\t\talwaysDropdownBelow: this.alwaysDropdownBelow,\n\t\t\tlisteners: [\n\t\t\t\t['hide', ()=> {\n\t\t\t\t\tthis.dropdown = null ;\n\t\t\t\t}]\n\t\t\t]\n\t\t}, this.dropdownOpts) ;\n\t\tthis.dropdown = new M_.Dropdown(optsTemp) ;\n\t}\n\t/**\n\t * @return {Boolean}\n\t */\n\tisDropdownVisible() {\n\t\tif (!this.dropdown) return false ;\n\t\treturn this.dropdown.isVisible() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tshowDropdown(evt) {\n\t\t// log(\"showDropdown\")\n\t\tM_.Help.hideMHelp() ;\n\t\tif (!this.hasDropdown) return ;\n\t\tevt.stopPropagation() ;\n\t\tif (!this.dropdown) this.createDropdown() ;\n\t\tthis.dropdown.show() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tclickPicker(evt) {\n\t\tthis.showDropdown(evt) ;\n\t\tthis.trigger('clickpicker', this, evt) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tsuper.create() ;\n\n\t\tif (!this.hidePicker) {\n\t\t\tvar moreCls = '', moreStyle='' ;\n\t\t\tif ((this.labelPosition=='left' || this.labelPosition=='right') && this.label!=='') {\n\t\t\t\tmoreCls += \" M_InputLeft\" ;\n\t\t\t\tmoreStyle += \" width:calc(100% - \"+(this.labelWidth)+\"px);\" ;\n\t\t\t}\n\t\t\tthis.jEl.outerWidth('100%') ;\n\t\t\tthis.jEl.removeClass('M_InputLeft') ;\n\t\t\tthis.jEl.wrap(\"<div class='M_FormInputGroup \"+moreCls+\"' style='\"+moreStyle+\"'>\") ;\n\t\t\tvar htmlCaret = `<div class=\"M_FormCaret ${this.icon}\" style='${this.stylePicker}'></div>` ;\n\t\t\tthis.caret = $(htmlCaret) ;\n\t\t\tthis.container.find('.M_FormInputGroup').append(this.caret);\n\t\t\tthis.caret.click((evt)=> {\n\t\t\t\tthis.clickPicker(evt) ;\n\t\t\t}) ;\n\t\t}\n\t}\n};\n\n/**\n * Input date form ; display a date picker and a month view\n * @class\n * @memberof! <global>\n * @extends M_.Form.Picker\n * @property {type} icon\n * @property {type} dateFormat\n * @property {type} dateFormatInput\n */\nM_.Form.Date = class extends M_.Form.Picker {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\ticon: 'fa fa-calendar',\n\t\t\tdateFormat: 'DD/MM/YYYY',\n\t\t\tdateFormatInput: 'YYYY-MM-DD',\n\t\t\tnoDays: false,\n\t\t\tshowWeekNumber: false,\n\t\t\tselectWeek: false,\n\t\t\tdisabledDates: null\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\t// if (!optsTemp.value) optsTemp.value = moment() ;\n\t\tsuper(optsTemp) ;\n\n\t\t// this.jEl.click((evt)=> {\n\t\t// \tevt.stopPropagation() ;\n\t\t// \t// if (!this.dropdown) this.createDropdown() ;\n\t\t// \t// this.dropdown.show() ;\n\t\t// })\n\t\t// this.jEl.on('M_DropdownShow', (evt)=> {\n\t\t// \tif (!this.dropdown) this.createDropdown() ;\n\t\t// \tthis.dropdown.show() ;\n\t\t// }) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreateDropdown() {\n\t\tthis.dropdown = new M_.Dropdown({\n\t\t\tdestroyOnHide: true,\n\t\t\talignTo: this.jEl,\n\t\t\tcontainer: this.containerDropdown,\n\t\t\tautoSize: false,\n\t\t\talwaysDropdownBelow: this.alwaysDropdownBelow,\n\t\t\tlisteners: [\n\t\t\t\t['destroy', ()=> {\n\t\t\t\t\tthis.dropdown = null ;\n\t\t\t\t\tthis.calendar.destroy() ;\n\t\t\t\t}]\n\t\t\t]\n\t\t}) ;\n\t\tthis.calendar = new M_.CalendarMonth({\n\t\t\tcontroller: this,\n\t\t\tcontainer: this.dropdown.jEl,\n\t\t\tnoDays: this.noDays,\n\t\t\tshowWeekNumber: this.showWeekNumber,\n\t\t\tselectWeek: this.selectWeek,\n\t\t\tdisabledDates: this.disabledDates,\n\t\t\tlisteners: [\n\t\t\t\t['selected', (cal, date)=> {\n\t\t\t\t\t// log(\"date\",cal, date)\n\t\t\t\t\t// this.container.html(date.format('DD/MM/YYYY')) ;\n\t\t\t\t\tthis.setValue(date) ;\n\t\t\t\t\tthis.trigger('change', this, date) ;\n\t\t\t\t\tthis.dropdown.hide() ;\n\t\t\t\t}],\n\t\t\t\t['viewedChanged', ()=> {\n\t\t\t\t\tthis.dropdown.realign() ;\n\t\t\t\t}]\n\t\t\t]\n\t\t}) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tshowDropdown(evt) {\n\t\tsuper.showDropdown(evt) ;\n\t\tif (moment.isMoment(this.value) && this.calendar) {\n\t\t\tthis.calendar.setDateViewed(this.value) ;\n\t\t\tthis.calendar.setDateSelected(this.value) ;\n\t\t}\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tonKeyup(evt) {\n\t\tsuper.onKeyup(evt) ;\n\t\tif (this.isDropdownVisible()) {\n\t\t\tvar m = moment(this.jEl.val(), this.dateFormat) ;\n\t\t\tif (m.isValid()) {\n\t\t\t\tthis.value = m ;\n\t\t\t\tif (this.calendar) {\n\t\t\t\t\tthis.calendar.setDateViewed(this.value) ;\n\t\t\t\t\tthis.calendar.setDateSelected(this.value) ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tif (val==='' || !val || val=='0000-00-00' || val=='0000-00-00 00:00:00') val = \"\" ;\n\t\telse if (moment.isMoment(val)) {\n\t\t\tif (!val.isValid()) val = \"\" ;\n\t\t\t// else val = val.format('YYYY-MM-DD') ;\n\t\t} else val = moment(val, this.dateFormatInput);\n\t\tthis.value = val ;\n\t\t// if (val!=='') log(\"format\",val,val.format(this.dateFormat))\n\t\tif (val!=='') {\n\t\t\tthis.jEl.val(val.format(this.dateFormat)) ;\n\t\t} else this.jEl.val(val) ;\n\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tvar v = this.jEl.val() ;\n\t\tif (v!=='') {\n\t\t\tv = moment(v, this.dateFormat).startOf('day') ;\n\t\t\tif (!serialized) return v ;\n\t\t\tv = v.format(\"YYYY-MM-DD\") ;\n\t\t}\n\t\treturn v ;\n\t}\n};\n\nM_.Form.DateWeek = class extends M_.Form.Date {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\t// icon: 'fa fa-clock-o',\n\t\t\tdateFormat: 'YYYY-\\\\SWW',\n\t\t\tdateFormatInput: 'YYYY-MM-DD',\n\t\t\tshowWeekNumber: true,\n\t\t\tselectWeek: true\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\t}\n};\n\n/**\n * Input hour form ; display a date picker and a hour view\n * @class\n * @memberof! <global>\n * @extends M_.Form.Date\n * @property {type} icon\n * @property {type} dateFormat\n * @property {type} dateFormatInput\n * @property {type} incrementHour\n * @property {type} incrementMinute\n * @property {type} incrementSecond\n */\nM_.Form.Hour = class extends M_.Form.Date {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\ticon: 'fa fa-clock-o',\n\t\t\tdateFormat: 'HH:mm',\n\t\t\tdateFormatInput: 'HH:mm',\n\t\t\tincrementHour: 1,\n\t\t\tincrementMinute: 10,\n\t\t\tincrementSecond: 5\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreateDropdown() {\n\t\t// log(\"createDropdown\")\n\t\tvar html = `\n\t\t<div class=\"\">\n\t\t\t<div class=\"M_Col6 M_FormHour_hour_up\"><span class=\"fa fa-chevron-up\"></span></div>\n\t\t\t<div class=\"M_Col6 M_FormHour_minute_up\"><span class=\"fa fa-chevron-up\"></span></div>\n\t\t\t<div class=\"M_Col6 M_FormHour_second_up\"><span class=\"fa fa-chevron-up\"></span></div>\n\t\t\t<div class=\"M_Clear\"></div>\n\n\t\t\t<div class=\"M_Col6\"><input type=\"text\" class=\"form-control M_FormHour_hour\" placeholder=\"\" maxlength=\"2\"></div>\n\t\t\t<div class=\"M_Col6\"><input type=\"text\" class=\"form-control M_FormHour_minute\" placeholder=\"\" maxlength=\"2\"></div>\n\t\t\t<div class=\"M_Col6\"><input type=\"text\" class=\"form-control M_FormHour_second\" placeholder=\"\" maxlength=\"2\"></div>\n\t\t\t<div class=\"M_Clear\"></div>\n\n\t\t\t<div class=\"M_Col6 M_FormHour_hour_down\"><span class=\"fa fa-chevron-down\"></span></div>\n\t\t\t<div class=\"M_Col6 M_FormHour_minute_down\"><span class=\"fa fa-chevron-down\"></span></div>\n\t\t\t<div class=\"M_Col6 M_FormHour_second_down\"><span class=\"fa fa-chevron-down\"></span></div>\n\t\t\t<div class=\"M_Clear\"></div>\n\t\t\t<div>\n\t\t</div>\n\t\t` ;\n\t\tthis.dropdown = new M_.Dropdown({\n\t\t\tdestroyOnHide: true,\n\t\t\talignTo: this.jEl,\n\t\t\tautoSize: false,\n\t\t\thtml: html,\n\t\t\tlisteners: [\n\t\t\t\t['destroy', ()=> {\n\t\t\t\t\tthis.dropdown = null ;\n\t\t\t\t}]\n\t\t\t]\n\t\t}) ;\n\t\tthis.jElDropdown = this.dropdown.jEl ;\n\t\tthis.value = moment();\n\t\t// log(\"this.value\",this.value)\n\t\tif (this.jEl.val().length > 0)\n\t\t\tthis.value = moment(this.jEl.val(), this.dateFormat);\n\t\tthis.setToCurrent();\n\t\tif (this.dateFormat.indexOf(\"s\") < 0) {\n\t\t\tthis.jElDropdown.find(\".M_FormHour_second_up, .M_FormHour_second_down\").hide();\n\t\t\tthis.jElDropdown.find(\".M_FormHour_second\").parent().hide();\n\t\t\tthis.jElDropdown.find(\".col-lg-4\").removeClass('col-lg-4').addClass('col-lg-6');\n\t\t\tthis.jElDropdown.find(\".dropdown-menu\").addClass('short');\n\t\t}\n\t\tthis.jElDropdown.find(\".M_FormHour_hour_up\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_hour_up\").on('click', $.proxy(function(evt) {\n\t\t\t// log(\"this.value\",this.value)\n\t\t\tvar m = this.value.hours() + this.incrementHour;\n\t\t\tm = (Math.floor(m / this.incrementHour) * this.incrementHour);\n\t\t\tthis.value.hours(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".M_FormHour_minute_up\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_minute_up\").on('click', $.proxy(function(evt) {\n\t\t\tvar m = this.value.minutes() + this.incrementMinute;\n\t\t\tm = (Math.floor(m / this.incrementMinute) * this.incrementMinute);\n\t\t\tthis.value.minutes(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".M_FormHour_second_up\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_second_up\").on('click', $.proxy(function(evt) {\n\t\t\tvar m = this.value.seconds() + this.incrementSecond;\n\t\t\tm = (Math.floor(m / this.incrementSecond) * this.incrementSecond);\n\t\t\tthis.value.seconds(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".M_FormHour_hour_down\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_hour_down\").on('click', $.proxy(function(evt) {\n\t\t\tvar m = this.value.hours() - this.incrementHour;\n\t\t\tm = (Math.floor(m / this.incrementHour) * this.incrementHour);\n\t\t\tthis.value.hours(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".M_FormHour_minute_down\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_minute_down\").on('click', $.proxy(function(evt) {\n\t\t\tvar m = this.value.minutes() - this.incrementMinute;\n\t\t\tm = (Math.floor(m / this.incrementMinute) * this.incrementMinute);\n\t\t\tthis.value.minutes(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".M_FormHour_second_down\").off('click');\n\t\tthis.jElDropdown.find(\".M_FormHour_second_down\").on('click', $.proxy(function(evt) {\n\t\t\tvar m = this.value.seconds() - this.incrementSecond;\n\t\t\tm = (Math.floor(m / this.incrementSecond) * this.incrementSecond);\n\t\t\tthis.value.seconds(m);\n\t\t\tthis.setToCurrent();\n\t\t\tthis.setValue(this.value);\n\t\t}, this));\n\t\tthis.jElDropdown.find(\".dropdown-menu\").show();\n\t}\n\t/**\n\t * To document\n\t */\n\tsetToCurrent() {\n\t\tthis.jElDropdown.find(\".M_FormHour_hour\").val(this.value.format(\"HH\"));\n\t\tthis.jElDropdown.find(\".M_FormHour_minute\").val(this.value.format(\"mm\"));\n\t\tthis.jElDropdown.find(\".M_FormHour_second\").val(this.value.format(\"ss\"));\n\t}\n\tgetValue() {\n\t\tvar v = this.jEl.val() ;\n\t\tvar t = v.split(':') ;\n\t\tvar m = moment().hours(t[0]).minutes(t[1]).seconds(0) ;\n\t\t// console.log(\"v\",v,m,t);\n\t\treturn m ;\n\t}\n\tsetValue(val) {\n\t\tvar val2 ;\n\t\t// console.log(\"val\",val,moment().utcOffset());\n\t\tif (!val) val = '00:00' ;\n\t\tif (typeof val == 'string') {\n\t\t\tvar v = '' ;\n\t\t\tif (val.length>11) v = val.substring(11,16) ;\n\t\t\telse v = val ;\n\t\t\tvar t = v.split(':') ;\n\t\t\tval2 = moment().hours(t[0]).minutes(t[1]).seconds(0) ;//.add(moment().utcOffset(),'minutes')\n\t\t} else val2 = moment(val) ;//.add(moment().utcOffset(),'minutes')\n\t\tthis.jEl.val(val2.format(this.dateFormat)) ;\n\t\tthis.value = val2 ;\n\t}\n};\n\n/**\n * Input datehour form ; display 2 pickers for date and hour\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} configDateDef\n * @property {type} configHourDef\n */\nM_.Form.DateHour = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tconfigDateDef: {\n\t\t\t\tlabel: \"\",\n\t\t\t\t// labelPosition: 'left',\n\t\t\t\t// labelWidth: 3,\n\t\t\t\tname: '',\n\t\t\t\tcontainerWidth: '64%',\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tconfigHourDef: {\n\t\t\t\tlabel: \"\",\n\t\t\t\tname: '',\n\t\t\t\tcontainerWidth: '36%',\n\t\t\t\tincrementMinute: 15,\n\t\t\t\trequired: false\n\t\t\t}\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\t\t// if ((this.labelPosition=='left' || this.labelPosition=='right') && this.labelWidth===0) this.labelWidth = 0.3 ;\n\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tvar id1 = M_.Utils.id(),\n\t\t\tid2 = M_.Utils.id() ;\n\n\n\t\tif (M_.Utils.isEmpty(this.id)) this.id = M_.Utils.id() ;\n\t\tvar v = this.value ;\n\t\tif ($.type(v)!==\"string\") v = '' ;\n\t\tif ((this.labelPosition=='left' || this.labelPosition=='right') && this.label!=='') {\n\t\t\tthis.clsLabel += \" M_LabelLeft\" ;\n\t\t\tthis.clsInput += \" M_InputLeft\" ;\n\t\t}\n\t\tif (this.labelWidth>0 && this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='right') && this.inputType!='checkbox') {\n\t\t\tif (this.labelWidth<=1) {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth*100)+\"%;\" ;\n\t\t\t\tthis.styleInput += \" width:\"+(100-this.labelWidth*100)+\"%;\" ;\n\t\t\t} else {\n\t\t\t\tthis.styleLabel += \" width:\"+(this.labelWidth)+\"px;\" ;\n\t\t\t\tthis.styleInput += \" width:calc(100% - \"+(this.labelWidth)+\"px);\" ;\n\t\t\t}\n\t\t}\n\n\t\tvar html = \"\" ;\n\t\tvar readOnly = \"\" ;\n\t\tvar forattr = \"\" ;\n\t\tif (this.labelFocusInput) forattr = 'for=\"'+this.id+'\"' ;\n\t\tif (!this.editable) readOnly = \"readonly\" ;\n\n\t\t// var html = `<div class='M_HorizontalForm'></div></div>` ;\n\n\n\t\thtml += `<div style=\"${this.styleGroup}\" class=\"M_FormGroup ${this.clsGroup}\">` ;\n\t\tif (this.label!=='' && (this.labelPosition=='left' || this.labelPosition=='top')) html += `<label style=\"${this.styleLabel}\" class=\"${this.clsLabel}\" ${forattr}>${this.label}</label>` ;\n\t\thtml += `<div id=\"${this.id}\" type=\"${this.inputType}\" style=\"${this.styleInput}\" class=\"M_Input ${this.clsInput}\"><div id='${id1}' class='M_FloatLeft'></div><div id='${id2}' class='M_FloatLeft'></div>` ;\n\t\thtml +=  `</div>` ;\n\n\n\n\t\tthis.container.append(html) ;\n\t\tthis.jEl = this.container.find('.M_HorizontalForm') ;\n\n\t\tvar configDate = $.extend({}, this.configDateDef, this.configDate) ;\n\t\tvar configHour = $.extend({}, this.configHourDef, this.configHour) ;\n\t\tconfigDate.container = $('#'+id1) ;\n\t\tconfigHour.container = $('#'+id2) ;\n\t\t$('#'+id1).width(configDate.containerWidth) ;\n\t\t$('#'+id2).width(configHour.containerWidth) ;\n\t\tthis.formDate = new M_.Form.Date(configDate) ;\n\t\tthis.formHour = new M_.Form.Hour(configHour) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\tthis.formDate.setValue(val);\n\t\tthis.formHour.setValue(val);\n\t}\n\t/**\n\t * @param  {Boolean}\n\t * @return {type}\n\t */\n\tgetValue(serialized=false) {\n\t\tvar d1 = this.formDate.getValue();\n\t\tif (d1 !== '') {\n\t\t\tvar d = moment(d1);\n\t\t\tvar d2 = this.formHour.getValue();\n\t\t\t// console.log(\"d2\",d2,d2.hours(),d2.minutes(),d2.seconds(),d2.format('HH:mm'),d2.utcOffset());\n\t\t\tif (d2) {\n\t\t\t\t// d2.local() ;\n\t\t\t\t// log(\".utcOffset()\",d2.utcOffset())\n\t\t\t\td.hours(d2.hours());\n\t\t\t\td.minutes(d2.minutes());//+d2.utcOffset()\n\t\t\t\td.seconds(d2.seconds());\n\t\t\t}\n\t\t\treturn d;\n\t\t}\n\t\treturn d1;\n\t}\n};\n\n\n/**\n * Input combobox form ; display a comobobox\n * @class\n * @memberof! <global>\n * @extends M_.Form.Picker\n * @property {type} store\n * @property {type} modelKey\n * @property {type} modelValue\n * @property {type} mode\n * @property {type} editable\n * @property {type} useRawValue\n * @property {type} useZeroIfEmpty\n */\nM_.Form.Combobox = class extends M_.Form.Picker {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tstore: null,\n\t\t\tmodelKey: 'key',\n\t\t\tmodelValue: 'val',\n\t\t\tmode: 'local',\n\t\t\teditable: true,\n\t\t\tuseRawValue: false,\n\t\t\tuseZeroIfEmpty: false,\n\t\t\t// inputType: 'text',\n\t\t\t// _currentVal: ''\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\t\tif (this.store.url==='') this.mode = 'local' ;\n\t\telse this.mode = 'remote' ;\n\n\t\tif (this.mode=='remote') {\n\t\t\tthis.store.addListener('load', (store, models)=> {\n\t\t\t\t// log(\"models\", models, this.modelValue)\n\t\t\t\tthis.createDropdown() ;\n\t\t\t\tthis._createItemsFromStore() ;\n\t\t\t\tthis.dropdown.show() ;\n\t\t\t}) ;\n\t\t}\n\n\t\t// this.jEl.on('M_DropdownShow', (evt)=> {\n\t\t// \tif (!this.dropdown) this.createDropdown() ;\n\t\t// \tthis.showDropdown() ;\n\t\t// }) ;\n\t\tif (!this.editable) {\n\t\t\tthis.jEl.css('cursor', 'pointer') ;\n\t\t\tthis.jEl.on('click', (evt)=> {\n\t\t\t\tthis.showDropdown(evt) ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t_createItemsFromStore() {\n\t\t// log(\"_createItemsFromStore\",this.store)\n\t\tvar items = [] ;\n\t\tthis.store.each((model)=> {\n\t\t\t// var val = \"\" ;\n\t\t\t// if (typeof this.modelValue === 'function') val = this.modelValue(model) ;\n\t\t\t// else val = model.get(this.modelValue) ;\n\t\t\titems.push({\n\t\t\t\ttext: this._getVal(model),\n\t\t\t\tclick: $.proxy(this.clickItemDropdown, this, model.get(this.modelKey))\n\t\t\t}) ;\n\t\t}) ;\n\t\t// if (!this.dropdown)\n\t\t\tthis.createDropdown() ;\n\t\tthis.dropdown.setItems(items) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreate() {\n\t\tsuper.create() ;\n\t\t// this.caret = $('<span class=\"fa fa-caret-down M_caret M_showonedit\"></span>') ;\n\t\t// this.container.find('.M_editable').after(this.caret);\n\t\t// this.caret.click($.proxy(this.showDropdown, this)) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tshowDropdown(evt) {\n\t\tM_.Help.hideMHelp() ;\n\t\tif (evt) evt.stopPropagation() ;\n\t\tif (this.disabled) return ;\n\t\t// if (!this.dropdown)\n\n\t\tif (this.mode=='local') {\n\t\t\tthis.createDropdown() ;\n\t\t\tthis._createItemsFromStore() ;\n\t\t\tthis.dropdown.show() ;\n\t\t} else if (this.store.load()) {\n\t\t\t// this.createDropdown() ;\n\t\t} ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tclickItemDropdown(val) {\n\t\tthis.setValue(val) ;\n\t\tlet model = this.store.getRow(val) ;\n\t\tif (model) {\n\t\t\tthis.trigger('itemclick', this, model) ;\n\t\t} else {\n\t\t\tthis.trigger('itemclick', this, val) ;\n\t\t}\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetRawValue() {\n\t\t// return this.container.find('M_editable').text() ;\n\t\treturn this.jEl.val() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\tif (this.useRawValue) return this.getRawValue() ;\n\t\tif (this.getRawValue()==='') this.value = '' ;\n\t\tif (this.value===\"\" && this.useZeroIfEmpty) return 0 ;\n\t\treturn this.value ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValueAndRaw() {\n\t\treturn {key:this.value, val:this.getRawValue()} ;\n\t}\n\t_getVal(model) {\n\t\tvar val = \"\" ;\n\t\tif (typeof this.modelValue === 'function') val = this.modelValue(model) ;\n\t\telse val = model.get(this.modelValue) ;\n\t\treturn val ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\t// log(\"setValue\",this.name, val)\n\t\tif (val===null) val = \"\" ;\n\t\tif (typeof val === 'object') {\n\t\t\tlet model = new this.store.model({row:val}) ;\n\t\t\t// log(\"setValue cr\",model)\n\t\t\tthis.setValueAndRawValue(val[this.modelKey], this._getVal(model)) ;\n\t\t\tthis.trigger('update', this, model) ;\n\t\t} else {\n\t\t\tthis.value = val ;\n\t\t\tlet model = this.store.getRow(val) ;\n\t\t\tif (model) {\n\t\t\t\tthis.setValueAndRawValue(val, this._getVal(model)) ;\n\t\t\t\tthis.trigger('update', this, model) ;\n\t\t\t} else {\n\t\t\t\tthis.setRawValue(val);\n\t\t\t\tthis.trigger('update', this, val) ;\n\t\t\t}\n\t\t}\n\n\t}\n\t/**\n\t * @param {type}\n\t * @param {type}\n\t */\n\tsetValueAndRawValue(val, rawVal) {\n\t\tthis.value = val ;\n\t\tthis.setRawValue(rawVal) ;\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetRawValue(val) {\n\t\tvar v = val ;\n\t\tv = M_.Utils.strip_tags(v) ;\n\t\tv = M_.Utils.html_entity_decode(v) ;\n\t\tv = M_.Utils.trim(v) ;\n\t\tthis.jEl.val(v) ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tonKeyup(evt) {\n\t\t// log(\"this.keyField\",this.keyField)\n\t\tvar v = this.getRawValue() ;\n\t\tif (this.mode=='local') {\n\t\t\tthis.showDropdown() ;\n\t\t\tvar items = [] ;\n\t\t\tthis.store.each((model)=> {\n\t\t\t\t// log(\"model\",model)\n\t\t\t\tvar val = this._getVal(model).toLowerCase() ;\n\t\t\t\tif (val.indexOf(v.toLowerCase())>=0) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: this._getVal(model),\n\t\t\t\t\t\tclick: $.proxy(this.clickItemDropdown, this, model.get(this.modelKey))\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t}) ;\n\t\t\tthis.dropdown.setItems(items) ;\n\t\t} else {\n\t\t\tthis.store.load({query:v.toLowerCase()}) ;\n\t\t}\n\t\tthis.trigger('keyup',this,evt) ;\n\t}\n};\n\n\n/**\n * Input combobox form ; display a comobobox + a list of values\n * @class\n * @memberof! <global>\n * @extends M_.Form.Combobox\n */\nM_.Form.ComboboxMulti = class extends M_.Form.Combobox {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tallowCreate: true\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\tvar optsTemp = $.extend({}, defaults, opts) ;\n\t\tsuper(optsTemp) ;\n\n\t\tthis.jElForMulti = $(\"<div></div>\") ;\n\t\tthis.container.append(this.jElForMulti) ;\n\t\tthis.container.append(\"<div class='M_Clear'></div>\") ;\n\t}\n\tonEnterInput() {\n\t\tif (this.allowCreate) {\n\t\t\tthis.addItemMulti('', this.getRawValue()) ;\n\t\t\tthis.setValueAndRawValue('', '') ;\n\t\t}\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\tclickItemDropdown(val) {\n\t\tvar model = this.store.getRow(val) ;\n\t\tvar realval = this._getVal(model) ;\n\t\t// super.clickItemDropdown(val);\n\t\t// this.setValueAndRawValue('', '') ;\n\t\t// this.addItemMulti(val, realval) ;\n\t\t// this.setValue(val) ;\n\t\t// let model = this.store.getRow(val) ;\n\t\t// if (model) {\n\t\t// \tthis.trigger('itemclick', this, model) ;\n\t\t// } else {\n\t\t// \tthis.trigger('itemclick', this, val) ;\n\t\t// }\n\t\tthis.setRawValue('') ;\n\t\tthis.addItemMulti(val, realval) ;\n\t}\n\t/**\n\t * @param {type}\n\t * @param {type}\n\t */\n\taddItemMulti(val, realval, deletable) {\n\t\tvar idTemp = M_.Utils.id() ;\n\t\tvar html = \"<div class='M_ComboboxMultiItem selected' data-comboboxmultiitem=\\\"\"+val+\"\\\" data-comboboxmultiitemval=\\\"\"+realval+\"\\\">\"+realval ;\n\t\tif (deletable!==false) html += \"&nbsp;<span class='fa fa-trash faa-pulse animated-hover' id='\"+idTemp+\"'></span>\" ;\n\t\thtml += \" </div>\" ;\n\t\tthis.jElForMulti.append(html) ;\n\t\tif (deletable!==false) {\n\t\t\t$(\"#\"+idTemp).click((evt)=> {\n\t\t\t\t$(evt.target).closest('.M_ComboboxMultiItem').remove() ;\n\t\t\t\tthis.trigger('update', this, val) ;\n\t\t\t}) ;\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\tvar res = [] ;\n\t\tvar me = this ;\n\t\tthis.jElForMulti.find('.M_ComboboxMultiItem').each(function() {\n\t\t\tvar obj = {} ;\n\t\t\tobj[me.modelKey] = $(this).attr('data-comboboxmultiitem') ;\n\t\t\tobj[me.modelValue] = $(this).attr('data-comboboxmultiitemval') ;\n\t\t\tres.push(obj) ;\n\t\t}) ;\n\t\treturn res ;\n\t}\n\tsetValue(val) {\n\t\tthis.reset() ;\n\t\t_.each(val, (v)=> {\n\t\t\tthis.addItemMulti(v[this.modelKey], v[this.modelValue], v.deletable) ;\n\t\t}) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\treset() {\n\t\tif (this.jElForMulti) this.jElForMulti.empty() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValueAndRaw() {\n\t\tvar res = [] ;\n\t\tthis.jElForMulti.find('.M_ComboboxMultiItem').each(function() {\n\t\t\tres.push({\n\t\t\t\tval:$(this).attr('data-comboboxmultiitemval'),\n\t\t\t\tkey:$(this).attr('data-comboboxmultiitem')\n\t\t\t}) ;\n\t\t}) ;\n\t\treturn res ;\n\t}\n};\n\n/**\n * A simple div to use in forms (no label)\n * @class\n * @memberof! <global>\n * @property {type} html\n */\nM_.Form.Div = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\thtml: '',\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\t\tthis.container.append(this.html) ;\n\t}\n};\n\n/**\n * A simple div with label\n * @class\n * @memberof! <global>\n * @extends M_.Form.Input\n * @property {type} inputType\n */\nM_.Form.Display = class extends M_.Form.Input {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tinputType: 'none',\n\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\topts = $.extend({}, defaults, opts) ;\n\t\tsuper(opts) ;\n\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetValue(val) {\n\t\t// if (val==\"\") val=[] ;\n\t\tthis.value = val ;\n\t\tthis.jEl.html(val) ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tgetValue() {\n\t\treturn this.value ;\n\t}\n};\n\n\n/**\n * A wysiwyg editor to use directly or in a textarea\n * @class\n * @memberof! <global>\n * @property {type} buttonsContainer\n * @property {type} buttons\n */\nM_.Editor = class {\n\tconstructor(opts) {\n\t\tvar defaults = {\n\t\t\tbuttonsContainer: null,\n\t\t\tbuttonsToDisplay: [\n\t\t\t\t'formatBlock', 'bold', 'italic', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'list', 'removeFormat', '|', 'createLink', 'table', 'image', 'templates', '|', 'source'\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t['formatBlock', \"Fomater paragraphe\", 'fa-font', '', '', [\n\t\t\t\t\t['formatH1', \"H1\", '', 'execFormatBlock', 'H1'],\n\t\t\t\t\t['formatH2', \"H2\", '', 'execFormatBlock', 'H2'],\n\t\t\t\t\t['formatH3', \"H3\", '', 'execFormatBlock', 'H3'],\n\t\t\t\t\t['formatH4', \"H4\", '', 'execFormatBlock', 'H4'],\n\t\t\t\t\t['formatH5', \"H5\", '', 'execFormatBlock', 'H5'],\n\t\t\t\t\t['formatP', \"P\", '', 'execFormatBlock', 'P'],\n\t\t\t\t\t['formatDIV', \"DIV\", '', 'execFormatBlock', 'DIV']\n\t\t\t\t]],\n\t\t\t\t['bold', \"Gras\", 'fa-bold', 'execCommand', 'bold'],\n\t\t\t\t['italic', \"Italique\", 'fa-italic', 'execCommand', 'italic'],\n\t\t\t\t['justifyLeft', \"Justifier  gauche\", 'fa-align-left', 'execJustify', 'Left'],\n\t\t\t\t['justifyCenter', \"Justifier au centre\", 'fa-align-center', 'execJustify', 'Center'],\n\t\t\t\t['justifyRight', \"Justifier  droite\", 'fa-align-right', 'execJustify', 'Right'],\n\t\t\t\t['justifyFull', \"Justifier  gauche et  droite\", 'fa-align-justify', 'execJustify', 'Full'],\n\t\t\t\t['list', \"Liste numrot ou avec puces\", 'fa-list-ol', 'execCommand', '' , [\n\t\t\t\t\t['insertorderedlist', \"Liste numrot\", 'fa-list-ol', 'execCommand', 'insertorderedlist'],\n\t\t\t\t\t['insertunorderedlist', \"Liste avec puces\", 'fa-list-ul', 'execCommand', 'insertunorderedlist'],\n\t\t\t\t\t['outdent', \"Outdent\", 'fa-outdent', 'execCommand', 'outdent'],\n\t\t\t\t\t['indent', \"Indent\", 'fa-indent', 'execCommand', 'indent'],\n\t\t\t\t]],\n\t\t\t\t['removeFormat', \"Effacer\", 'fa-eraser', 'execCommand', 'removeFormat'],\n\t\t\t\t'|',\n\t\t\t\t['createLink', \"Lien\", 'fa-link', '', '', [\n\t\t\t\t\t['insertorderedlist', \"Crer un lien\", 'fa-link', 'execLink', ''],\n\t\t\t\t\t['insertunorderedlist', \"Enlever le lien\", 'fa-unlink', 'execCommand', 'unlink'],\n\t\t\t\t]],\n\t\t\t\t['table', \"Outils tableau\", 'fa-table', '', '', [\n\t\t\t\t\t['insertTable', \"Insrer un tableau\", '', 'execInsertTable'],\n\t\t\t\t\t['insertTableColumn', \"Nouvelle colonne\", '', 'execInsertTableColumn'],\n\t\t\t\t\t['insertTableRow', \"Nouvelle range\", '', 'execInsertTableRow'],\n\t\t\t\t\t['editTable', \"Edition tableau\", '', 'execEditTable'],\n\t\t\t\t\t['editCell', \"Edition cllule\", '', 'execEditCell']\n\t\t\t\t]],\n\t\t\t\t['image', \"Images\", 'fa-picture-o', '', '', [\n\t\t\t\t\t['newImage', \"Nouvelle image\", 'fa-picture-o', 'execNewImage', ''],\n\t\t\t\t\t['infoImage', \"Information sur l'image\", 'fa-edit', 'execImageInfo', ''],\n\t\t\t\t\t['imagesLibrary', \"Bibliothque d'images\", 'fa-windows', 'execImageLibrary', ''],\n\t\t\t\t\t['imagesReplace', \"Remplacer image\", 'fa-magic', 'execImageReplace', ''],\n\t\t\t\t]],\n\t\t\t\t['templates', \"Templates\", 'fa-file', '', ''],\n\t\t\t\t'|',\n\t\t\t\t['source', \"Code source\", 'fa-terminal', 'execSource']\n\t\t\t],\n\t\t\t} ;\n\t\topts = (opts)?opts:{} ;\n\t\t$.extend(this, defaults, opts) ;\n\n\t\tthis.init() ;\n\t}\n\t/**\n\t */\n\tinit() {\n\t\tthis.createButtons() ;\n\n\t\tif (this.container) {\n\t\t\tthis.setContainer(this.container) ;\n\t\t\tthis.path = $(\"<div class='M_FormEditor-Path'>&nbsp;</div>\") ;\n\t\t\tthis.container.after(this.path) ;\n\t\t}\n\t\tdocument.execCommand(\"styleWithCSS\", false, false) ;\n\t\tdocument.execCommand(\"enableObjectResizing\", false, false) ;\n\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\texecJustify(what) {\n\t\tdocument.execCommand(\"justify\"+what, false, null) ;\n\t\tthis.caretMove() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\texecCommand(comm) {\n\t\tdocument.execCommand(comm, false, null) ;\n\t\tthis.caretMove() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecInsertTable() {\n\t\tdocument.execCommand(\"insertHTML\", false, \"<table><tr><td>Cell 1.1</td><td>Cell 1.2</td></tr><tr><td>Cell 2.1</td><td>Cell 2.2</td></tr></table>\") ;\n\t\tthis.caretMove() ;\n\t}\n\t/**\n\t * @param  {type}\n\t * @return {type}\n\t */\n\texecFormatBlock(block) {\n\t\tdocument.execCommand(\"formatBlock\", false, block.toLowerCase()) ;\n\t\tthis.caretMove() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecInsertTableColumn() {\n\t\tvar td = $(document.getSelection().getRangeAt(0).commonAncestorContainer).closest(\"td\") ;\n\t\tif (td.length && td.closest(\"#\"+this.container.get(0).id).length) {\n\t\t\tvar n = td.closest(\"tr\").find(\"td\").index(td) ;\n\t\t\ttd.closest(\"table\").find('tr').each(function(){\n\t\t\t\t$(this).find('td').eq(n).after('<td>Nouvelle cellule</td>');\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecInsertTableRow() {\n\t\tvar tr = $(document.getSelection().getRangeAt(0).commonAncestorContainer).closest(\"tr\") ;\n\t\tif (tr.length && tr.closest(\"#\"+this.container.get(0).id).length) {\n\t\t\t// var n = tr.closest(\"table\").find(\"tr\").index(tr) ;\n\t\t\tvar countTds = tr.find(\"td\").length ;\n\t\t\tvar newTr = $(\"<tr></tr>\") ;\n\t\t\tfor(var i=0 ; i<countTds ; i++) {\n\t\t\t\tnewTr.append(\"<td>Nouvelle cellule</td>\") ;\n\t\t\t}\n\t\t\ttr.after(newTr);\n\t\t}\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecLink() {\n\t\tif (!this.winLink) {\n\t\t\tthis.winLink = new (class extends M_.Window {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\twidth: 400\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tcreate() {\n\t\t\t\t\tvar idBtSave = M_.Utils.id(),\n\t\t\t\t\t\tidBtCancel = M_.Utils.id(),\n\t\t\t\t\t\tidLink = M_.Utils.id(),\n\t\t\t\t\t\tidTarget = M_.Utils.id() ;\n\t\t\t\t\tthis.html = `<div class=\"M_WindowContent\">\n\t\t\t\t\t\t<div class=\"M_WindowHeader\">\n\t\t\t\t\t\t\t<h1>Edition <b>d'un lien</b></h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowBody\">\n\t\t\t\t\t\t\t<div id=\"${idLink}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idTarget}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowFooter\">\n\t\t\t\t\t\t\t<div class=\"M_FloatRight\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtSave}\" type=\"button\" class=\"M_Button primary\">Enregistrer</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"M_FloatLeft\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtCancel}\" type=\"button\" class=\"M_Button\">Annuler</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\t\t\t\tsuper.create() ;\n\n\t\t\t\t\tthis.form = new M_.Form.Form({\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tname: 'link',\n\t\t\t\t\t\t\t\tplaceholder: \"Lien\",\n\t\t\t\t\t\t\t\tlabel: \"Lien\",\n\t\t\t\t\t\t\t\tlabelPosition: 'top',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idLink)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Combobox,\n\t\t\t\t\t\t\t\tname: 'target',\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tplaceholder: \"\",\n\t\t\t\t\t\t\t\tlabel: \"Cible\",\n\t\t\t\t\t\t\t\tlabelPosition: 'top',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idTarget),\n\t\t\t\t\t\t\t\tstore: new M_.Store({\n\t\t\t\t\t\t\t\t\tcontroller: this,\n\t\t\t\t\t\t\t\t\tmodel: M_.ModelKeyVal,\n\t\t\t\t\t\t\t\t\trows: [{key:\"\", val:\"Aucun\"}, {key:\"_blank\", val:\"_blank\"}, {key:\"_self\", val:\"_self\"}]\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtSave).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tdocument.execCommand('createLink', false, this.form.find('link').getValue()) ;\n\t\t\t\t\t\tif (this.form.find('target').getValue()!=='') $(document.getSelection().getRangeAt(0).commonAncestorContainer).closest(\"a\").attr(\"target\",this.form.find('target').getValue());\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtCancel).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t})() ;\n\t\t}\n\t\tthis.winLink.show() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecSource() {\n\t\tif (!this.winSource) {\n\t\t\tthis.winSource = new (class extends M_.Window {\n\t\t\t\tconstructor(containerEditor) {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\twidth: 800\n\t\t\t\t\t}) ;\n\t\t\t\t\tthis.containerEditor = containerEditor ;\n\t\t\t\t}\n\t\t\t\tcreate() {\n\t\t\t\t\tvar idBtSave = M_.Utils.id(),\n\t\t\t\t\t\tidBtCancel = M_.Utils.id(),\n\t\t\t\t\t\tidCode = M_.Utils.id() ;\n\t\t\t\t\tthis.html = `<div class=\"M_WindowContent\">\n\t\t\t\t\t\t<div class=\"M_WindowHeader\">\n\t\t\t\t\t\t\t<h1>Edition <b>du code source</b></h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowBody\">\n\t\t\t\t\t\t\t<div id=\"${idCode}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowFooter\">\n\t\t\t\t\t\t\t<div class=\"M_FloatRight\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtSave}\" type=\"button\" class=\"M_Button primary\">Enregistrer</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"M_FloatLeft\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtCancel}\" type=\"button\" class=\"M_Button\">Annuler</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\t\t\t\tsuper.create() ;\n\n\t\t\t\t\tthis.form = new M_.Form.Form({\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: M_.Form.Textarea,\n\t\t\t\t\t\t\t\tname: 'htmlcode',\n\t\t\t\t\t\t\t\tacceptTabulation: true,\n\t\t\t\t\t\t\t\trows: 30,\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idCode)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtSave).click(()=> {\n\t\t\t\t\t\tvar html = this.form.find('htmlcode').getValue() ;\n\t\t\t\t\t\tthis.containerEditor.html(html) ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtCancel).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t})(this.container) ;\n\t\t}\n\t\tvar html = this.container.html() ;\n\t\tthis.winSource.form.find('htmlcode').setValue(html) ;\n\t\tthis.winSource.show() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecEditTable() {\n\t\tvar table = $(document.getSelection().getRangeAt(0).commonAncestorContainer).closest(\"table\") ;\n\t\tif (!table.length || !table.closest(\"#\"+this.container.get(0).id).length) return ;\n\t\tif (!this.winEditTable) {\n\t\t\tthis.winEditTable = new (class extends M_.Window {\n\t\t\t\tconstructor(containerEditor) {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\tcontainerEditor: containerEditor\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tcreate() {\n\t\t\t\t\tvar idBtSave = M_.Utils.id(),\n\t\t\t\t\t\tidBtCancel = M_.Utils.id(),\n\t\t\t\t\t\tidwidth = M_.Utils.id(),\n\t\t\t\t\t\tidcellspacing = M_.Utils.id(),\n\t\t\t\t\t\tidcellpadding = M_.Utils.id(),\n\t\t\t\t\t\tidborder = M_.Utils.id(),\n\t\t\t\t\t\tidstyle = M_.Utils.id(),\n\t\t\t\t\t\tidid = M_.Utils.id(),\n\t\t\t\t\t\tidalign = M_.Utils.id() ;\n\t\t\t\t\tthis.html = `<div class=\"M_WindowContent\">\n\t\t\t\t\t\t<div class=\"M_WindowHeader\">\n\t\t\t\t\t\t\t<h1>Edition <b>d'un tableau</b></h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowBody\">\n\t\t\t\t\t\t\t<div id=\"${idwidth}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idcellspacing}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idcellpadding}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idborder}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idstyle}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idid}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idalign}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowFooter\">\n\t\t\t\t\t\t\t<div class=\"M_FloatRight\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtSave}\" type=\"button\" class=\"M_Button primary\">Enregistrer</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"M_FloatLeft\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtCancel}\" type=\"button\" class=\"M_Button\">Annuler</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\t\t\t\tsuper.create() ;\n\n\t\t\t\t\tthis.form = new M_.Form.Form({\n\t\t\t\t\t\titemsDefaults: {\n\t\t\t\t\t\t\tlabelPosition: 'left',\n\t\t\t\t\t\t\tlabelWidth: 250\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tlabel: \"Largeur (px ou %)\",\n\t\t\t\t\t\t\t\tname: 'width',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idwidth)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Number,\n\t\t\t\t\t\t\t\tlabel: \"Espacement des cellules\",\n\t\t\t\t\t\t\t\tname: 'cellpadding',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idcellpadding)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Number,\n\t\t\t\t\t\t\t\tlabel: \"Marge des cellules\",\n\t\t\t\t\t\t\t\tname: 'cellspacing',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idcellspacing)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Number,\n\t\t\t\t\t\t\t\tlabel: \"Taille de la bordure\",\n\t\t\t\t\t\t\t\tname: 'border',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idborder)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tlabel: \"Style CSS\",\n\t\t\t\t\t\t\t\tname: 'style',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idstyle)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tlabel: \"ID\",\n\t\t\t\t\t\t\t\tname: 'id',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idid)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Combobox,\n\t\t\t\t\t\t\t\tname: 'align',\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tplaceholder: \"\",\n\t\t\t\t\t\t\t\tlabel: \"Alignement\",\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idalign),\n\t\t\t\t\t\t\t\tstore: new M_.Store({\n\t\t\t\t\t\t\t\t\tcontroller: this,\n\t\t\t\t\t\t\t\t\tmodel: M_.ModelKeyVal,\n\t\t\t\t\t\t\t\t\trows: [{key:\"\", val:\"Aucun\"}, {key:\"left\", val:\"Gauche\"}, {key:\"center\", val:\"Centr\"}, {key:\"right\", val:\"Droite\"}]\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtSave).click(()=> {\n\t\t\t\t\t\tthis.currentTable.css({width: this.form.find(\"width\").getValue()}) ;\n\t\t\t\t\t\tthis.currentTable.attr(\"cellpadding\", this.form.find(\"cellpadding\").getValue()) ;\n\t\t\t\t\t\tthis.currentTable.attr(\"cellspacing\", this.form.find(\"cellspacing\").getValue()) ;\n\t\t\t\t\t\tthis.currentTable.attr(\"border\", this.form.find(\"border\").getValue()) ;\n\t\t\t\t\t\tthis.currentTable.attr(\"align\", this.form.find(\"align\").getValue()) ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtCancel).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tsetCurrentTable(currentTable) {\n\t\t\t\t\tthis.currentTable = currentTable ;\n\t\t\t\t\tvar sEl = this.currentTable.get(0).style ;\n\t\t\t\t\tif (sEl.width!=='') this.form.find(\"width\").setValue(this.currentTable.get(0).style.width) ;\n\t\t\t\t\telse this.form.find(\"width\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentTable.attr('cellpadding')) this.form.find(\"cellpadding\").setValue(this.currentTable.attr('cellpadding')) ;\n\t\t\t\t\telse this.form.find(\"cellpadding\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentTable.attr('cellspacing')) this.form.find(\"cellspacing\").setValue(this.currentTable.attr('cellspacing')) ;\n\t\t\t\t\telse this.form.find(\"cellspacing\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentTable.attr('border')) this.form.find(\"border\").setValue(this.currentTable.attr('border')) ;\n\t\t\t\t\telse this.form.find(\"border\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentTable.attr('align')) this.form.find(\"align\").setValue(this.currentTable.attr('align')) ;\n\t\t\t\t\telse this.form.find(\"align\").setValue(\"\") ;\n\t\t\t\t}\n\t\t\t})(this.container) ;\n\t\t}\n\t\tthis.winEditTable.setCurrentTable(table) ;\n\t\tthis.winEditTable.show() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecEditCell() {\n\t\tvar td = $(document.getSelection().getRangeAt(0).commonAncestorContainer).closest(\"td\") ;\n\t\tif (!td.length || !td.closest(\"#\"+this.container.get(0).id).length) return ;\n\t\tif (!this.winEditCell) {\n\t\t\tthis.winEditCell = new (class extends M_.Window {\n\t\t\t\tconstructor(containerEditor) {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\tcontainerEditor: containerEditor\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tcreate() {\n\t\t\t\t\tvar idBtSave = M_.Utils.id(),\n\t\t\t\t\t\tidBtCancel = M_.Utils.id(),\n\t\t\t\t\t\tidwidth = M_.Utils.id(),\n\t\t\t\t\t\tidalign = M_.Utils.id(),\n\t\t\t\t\t\tidvalign = M_.Utils.id(),\n\t\t\t\t\t\tidcolor = M_.Utils.id() ;\n\t\t\t\t\tthis.html = `<div class=\"M_WindowContent\">\n\t\t\t\t\t\t<div class=\"M_WindowHeader\">\n\t\t\t\t\t\t\t<h1>Edition <b>d'une cellule</b></h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowBody\">\n\t\t\t\t\t\t\t<div id=\"${idwidth}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idalign}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idvalign}\"></div>\n\t\t\t\t\t\t\t<div id=\"${idcolor}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowFooter\">\n\t\t\t\t\t\t\t<div class=\"M_FloatRight\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtSave}\" type=\"button\" class=\"M_Button primary\">Enregistrer</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"M_FloatLeft\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtCancel}\" type=\"button\" class=\"M_Button\">Annuler</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\t\t\t\tsuper.create() ;\n\n\t\t\t\t\tthis.form = new M_.Form.Form({\n\t\t\t\t\t\titemsDefaults: {\n\t\t\t\t\t\t\tlabelPosition: 'left',\n\t\t\t\t\t\t\tlabelWidth: 250\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tlabel: \"Largeur (px ou %)\",\n\t\t\t\t\t\t\t\tname: 'width',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idwidth)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Combobox,\n\t\t\t\t\t\t\t\tname: 'align',\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tplaceholder: \"\",\n\t\t\t\t\t\t\t\tlabel: \"Alignement\",\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idalign),\n\t\t\t\t\t\t\t\tstore: new M_.Store({\n\t\t\t\t\t\t\t\t\tcontroller: this,\n\t\t\t\t\t\t\t\t\tmodel: M_.ModelKeyVal,\n\t\t\t\t\t\t\t\t\trows: [{key:\"\", val:\"Aucun\"}, {key:\"left\", val:\"Gauche\"}, {key:\"center\", val:\"Centr\"}, {key:\"right\", val:\"Droite\"}]\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Combobox,\n\t\t\t\t\t\t\t\tname: 'valign',\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tplaceholder: \"\",\n\t\t\t\t\t\t\t\tlabel: \"Alignement vertical\",\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idvalign),\n\t\t\t\t\t\t\t\tstore: new M_.Store({\n\t\t\t\t\t\t\t\t\tcontroller: this,\n\t\t\t\t\t\t\t\t\tmodel: M_.ModelKeyVal,\n\t\t\t\t\t\t\t\t\trows: [{key:\"\", val:\"Aucun\"}, {key:\"top\", val:\"Haut\"}, {key:\"middle\", val:\"Milieu\"}, {key:\"bottom\", val:\"Bas\"}]\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\ttype: M_.Form.Text,\n\t\t\t\t\t\t\t\tlabel: \"Couleur\",\n\t\t\t\t\t\t\t\tname: 'color',\n\t\t\t\t\t\t\t\tcontainer: $(\"#\"+idwidth)\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtSave).click(()=> {\n\t\t\t\t\t\tthis.currentCell.css({width: this.form.find(\"width\").getValue()}) ;\n\t\t\t\t\t\tthis.currentCell.attr(\"align\", this.form.find(\"align\").getValue()) ;\n\t\t\t\t\t\tthis.currentCell.attr(\"valign\", this.form.find(\"valign\").getValue()) ;\n\t\t\t\t\t\tthis.currentCell.css({backgroundColor: this.form.find(\"color\").getValue()}) ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtCancel).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tsetCurrentCell(currentCell) {\n\t\t\t\t\tthis.currentCell = currentCell ;\n\t\t\t\t\tvar sEl = this.currentCell.get(0).style ;\n\t\t\t\t\tif (sEl.width!=='') this.form.find(\"width\").setValue(this.currentCell.css('width')) ;\n\t\t\t\t\telse this.form.find(\"width\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentCell.attr('align')) this.form.find(\"align\").setValue(this.currentCell.attr('cellpadding')) ;\n\t\t\t\t\telse this.form.find(\"align\").setValue(\"\") ;\n\t\t\t\t\tif (this.currentCell.attr('valign')) this.form.find(\"valign\").setValue(this.currentCell.attr('valign')) ;\n\t\t\t\t\telse this.form.find(\"valign\").setValue(\"\") ;\n\t\t\t\t\tif (sEl.backgroundColor!=='') this.form.find(\"color\").setValue(this.currentCell.css('backgroundColor')) ;\n\t\t\t\t\telse this.form.find(\"color\").setValue(\"\") ;\n\t\t\t\t}\n\t\t\t})(this.container) ;\n\t\t}\n\t\tthis.winEditCell.setCurrentCell(td) ;\n\t\tthis.winEditCell.show() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\texecNewImage() {\n\t\tif (!this.winNewImage) {\n\t\t\tthis.winNewImage = new (class extends M_.Window {\n\t\t\t\tconstructor(containerEditor) {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\ttabFilesToSend: []\n\t\t\t\t\t}) ;\n\t\t\t\t\tthis.containerEditor = containerEditor ;\n\t\t\t\t}\n\t\t\t\tcreate() {\n\t\t\t\t\tvar idBtSave = M_.Utils.id(),\n\t\t\t\t\t\tidBtCancel = M_.Utils.id(),\n\t\t\t\t\t\tidCode = M_.Utils.id() ;\n\t\t\t\t\tthis.html = `<div class=\"M_WindowContent\">\n\t\t\t\t\t\t<div class=\"M_WindowHeader\">\n\t\t\t\t\t\t\t<h1>Envoyer <b>des images</b></h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowBody\">\n\t\t\t\t\t\t\t<div id=\"${idCode}\"></div>\n\t\t\t\t\t\t\t<div class=\"m_dropherenewimage\" contenteditable><h2>Dposer ici un (ou des) fichier(s) de votre bureau</h2></div>\n\t\t\t\t\t\t\t<h2 style=\"margin-top:15px;\">Ou choisissez les fichiers  envoyer</h2>\n\t\t\t\t\t\t\t<input type=\"file\" class=\"m_fileinput\" multiple />\n\t\t\t\t\t\t\t<div class=\"M_Clear\"></div>\n\t\t\t\t\t\t\t<output class=\"m_fileoutput\"></output>\n\t\t\t\t\t\t\t<div class=\"M_Clear\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"M_WindowFooter\">\n\t\t\t\t\t\t\t<div class=\"M_FloatRight\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtSave}\" type=\"button\" class=\"M_Button primary\">Enregistrer</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"M_FloatLeft\">\n\t\t\t\t\t\t\t\t<button id=\"${idBtCancel}\" type=\"button\" class=\"M_Button\">Annuler</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>` ;\n\t\t\t\t\tsuper.create() ;\n\n\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').on('dragover', $.proxy(function(e) {\n\t\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').css('background-color','green') ;\n\t\t\t\t\t}, this)) ;\n\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').on('dragleave', $.proxy(function(e) {\n\t\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').css('background-color','white') ;\n\t\t\t\t\t}, this)) ;\n\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').on('drop', $.proxy(function(e) {\n\t\t\t\t\t\tthis.jEl.find('.m_dropherenewimage').css('background-color','white') ;\n\t\t\t\t\t\te.preventDefault() ;\n\t\t\t\t\t\tvar files = e.originalEvent.dataTransfer.files ;\n\t\t\t\t\t\tif (files.length===0) return ;\n\t\t\t\t\t\tfor(var i=0 ; i<files.length ; i++) {\n\t\t\t\t\t\t\tvar f = files[i];\n\t\t\t\t\t\t\tthis.createThumbnail(f) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)) ;\n\n\n\t\t\t\t\t$(\"#\"+idBtSave).click(()=> {\n\n\t\t\t\t\t\tvar formData = new FormData();\n\t\t\t\t\t\tfor (var i=0 ; i<this.tabFilesToSend.length ; i++) {\n\t\t\t\t\t\t\tformData.append('file'+i, this.tabFilesToSend[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\t\t\txhr.open('POST', '/upload');\n\t\t\t\t\t\tvar me = this ;\n\t\t\t\t\t\txhr.onload = function() {\n\t\t\t\t\t\t\t//console.log(xhr.responseText);\n\t\t\t\t\t\t\tvar jsonResponse = JSON.parse(xhr.responseText);\n\t\t\t\t\t\t\tif (me.callbackSave) {\n\t\t\t\t\t\t\t\tvar img = null ;\n\t\t\t\t\t\t\t\tif (jsonResponse.tabRes.length>0) img = jsonResponse.tabRes[0] ;\n\t\t\t\t\t\t\t\tme.callbackSave(img) ;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfor(var i=0 ; i<jsonResponse.tabRes.length ; i++) {\n\t\t\t\t\t\t\t\t\tdocument.execCommand(\"insertImage\", false, jsonResponse.tabRes[i]) ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tme.hide() ;\n\t\t\t\t\t\t\t//document.execCommand(\"insertImage\", false, jsonResponse.url) ;\n\t\t\t\t\t\t\t//me.caretMove() ;\n\t\t\t\t\t\t};\n\t\t\t\t\t\txhr.upload.onprogress = function(e) {\n\t\t\t\t\t\t\tif (e.lengthComputable) {\n\t\t\t\t\t\t\t\t// var complete = (e.loaded / e.total * 100 | 0);\n\t\t\t\t\t\t\t\t//Mlog(\"complete\",complete)\n\t\t\t\t\t\t\t\t//updates a <progress> tag to show upload progress\n\t\t\t\t\t\t\t\t//$('progress').val(complete);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\txhr.send(formData) ;\n\n\t\t\t\t\t}) ;\n\t\t\t\t\t$(\"#\"+idBtCancel).click(()=> {\n\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\tthis.hide() ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t\tresetFileInput() {\n\t\t\t\t\tvar control = this.jEl.find('.m_fileinput') ;\n\t\t\t\t\tthis.jEl.find('.m_fileinput').replaceWith( control = control.clone( true ) ) ;\n\t\t\t\t\tthis.jEl.find('.m_fileinput').on('change', $.proxy(function(e) {\n\t\t\t\t\t\tvar files = e.target.files;\n\t\t\t\t\t\tif (files.length===0) return ;\n\t\t\t\t\t\tfor(var i=0 ; i<files.length ; i++) {\n\t\t\t\t\t\t\tvar f = files[i];\n\t\t\t\t\t\t\tthis.createThumbnail(f) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)) ;\n\n\t\t\t\t}\n\t\t\t\tcreateThumbnail(f) {\n\t\t\t\t\tthis.tabFilesToSend.push(f) ;\n\t\t\t\t\tvar list = this.jEl.find('.m_fileoutput') ;\n\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\tvar me = this ;\n\t\t\t\t\treader.onload = (function(theFile) {\n\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\tlist.append(['<img style=\"margin:0 15px 15px 0\" src=\"', e.target.result,'\" title=\"', theFile.name, '\" width=\"100\" />'].join('')) ;\n\t\t\t\t\t\t\tme.center() ;\n\t\t\t\t\t\t};\n\t\t\t\t\t})(f);\n\t\t\t\t\treader.readAsDataURL(f);\n\t\t\t\t}\n\t\t\t})(this.container) ;\n\t\t}\n\t\tthis.winNewImage.resetFileInput() ;\n\t\tthis.winNewImage.show() ;\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcaretMove() {\n\t\tif (document.getSelection().rangeCount>0) {\n\t\t\tvar sel = $(document.getSelection().getRangeAt(0).commonAncestorContainer) ;\n\t\t\tvar html = \"\" ;\n\t\t\tvar jEls = sel.parentsUntil(\"#\"+this.container.get(0).id) ;\n\t\t\tif (!sel.hasClass('M_FormEditor-Content')) {\n\t\t\t\tvar tabTemp = [] ;\n\t\t\t\tjEls.each(function(ind, el) {\n\t\t\t\t\tif (el.tagName) tabTemp.push(el.tagName) ;\n\t\t\t\t}) ;\n\t\t\t\ttabTemp.reverse() ;\n\t\t\t\ttabTemp.push(\"text\") ;\n\t\t\t\thtml = tabTemp.join(' &gt; ') ;\n\t\t\t}\n\t\t\t//html += sel.get(0).tagName ;\n\t\t\thtml += \"&nbsp;\" ;\n\t\t\tthis.path.html(html) ;\n\t\t}\n\n\t\tif (document.queryCommandValue('bold')=='true') this.buttonsContainer.find('button[m_id=\"bold\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"bold\"]').removeClass('active') ;\n\t\tif (document.queryCommandValue('italic')=='true') this.buttonsContainer.find('button[m_id=\"italic\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"italic\"]').removeClass('active') ;\n\t\tif (document.queryCommandValue('justifyLeft')=='true') this.buttonsContainer.find('button[m_id=\"justifyLeft\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"justifyLeft\"]').removeClass('active') ;\n\t\tif (document.queryCommandValue('justifyRight')=='true') this.buttonsContainer.find('button[m_id=\"justifyRight\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"justifyRight\"]').removeClass('active') ;\n\t\tif (document.queryCommandValue('justifyCenter')=='true') this.buttonsContainer.find('button[m_id=\"justifyCenter\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"justifyCenter\"]').removeClass('active') ;\n\t\tif (document.queryCommandValue('justifyFull')=='true') this.buttonsContainer.find('button[m_id=\"justifyFull\"]').addClass('active') ;\n\t\telse this.buttonsContainer.find('button[m_id=\"justifyFull\"]').removeClass('active') ;\n\n\n\t}\n\t/**\n\t * @return {type}\n\t */\n\tcreateButtons() {\n\t\tvar toolbar = $(\"<div>\", {'class':'M_Editor', 'role':'toolbar'}) ;\n\t\tthis.buttonsContainer.append(toolbar) ;\n\t\t// var currentGroup = $(\"<div>\", {'class':'btn-group'}) ;\n\t\t// toolbar.append(currentGroup) ;\n\t\tfor(var i=0 ; i<this.buttons.length ; i++) {\n\t\t\tlet bt = this.buttons[i] ;\n\t\t\tif (_.indexOf(this.buttonsToDisplay, bt[0])<0) continue ;\n\t\t\tif (bt[0]===\"|\") {\n\t\t\t\t// currentGroup = $(\"<div>\", {'class':'btn-group'}) ;\n\t\t\t\t// toolbar.append(currentGroup) ;\n\t\t\t} else {\n\t\t\t\tlet caret = \"\" ;\n\t\t\t\tif (bt[5]) caret = \"<span class='fa fa-caret-down'></span>\" ;\n\t\t\t\tlet button = $(\"<button m_id='\"+bt[0]+\"'><i class='fa \"+bt[2]+\"'></i> \"+caret+\"</button>\") ;\n\t\t\t\ttoolbar.append(button) ;\n\t\t\t\tif (bt[5]) {\n\t\t\t\t\tbutton.click({items: bt[5]}, (evt)=> {\n\t\t\t\t\t\tevt.stopPropagation() ;\n\t\t\t\t\t\tM_.Utils.saveSelection() ;\n\t\t\t\t\t\tvar items = [] ;\n\t\t\t\t\t\t_.each(evt.data.items, (item)=> {\n\t\t\t\t\t\t\tlet nameTemp = item[1] ;\n\t\t\t\t\t\t\tif (item[2] && item[2]!=='') nameTemp = \"<i class='fa \"+item[2]+\"'></i>&nbsp;\"+nameTemp ;\n\t\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\ttext: nameTemp,\n\t\t\t\t\t\t\t\tclick: (evt)=> {\n\t\t\t\t\t\t\t\t\t// evt.stopPropagation() ;\n\t\t\t\t\t\t\t\t\t// evt.preventDefault()\n\t\t\t\t\t\t\t\t\tM_.Utils.restoreSelection() ;\n\t\t\t\t\t\t\t\t\tthis[item[3]](item[4]) ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}) ;\n\t\t\t\t\t\t}) ;\n\t\t\t\t\t\tvar dropdown = new M_.Dropdown({\n\t\t\t\t\t\t\tdestroyOnHide: true,\n\t\t\t\t\t\t\talignTo: $(evt.target).closest('button'),\n\t\t\t\t\t\t\titems: items\n\t\t\t\t\t\t}) ;\n\t\t\t\t\t\tdropdown.show() ;\n\t\t\t\t\t}) ;\n\t\t\t\t} else {\n\t\t\t\t\tbutton.click({items: bt[5]}, (evt)=> {\n\t\t\t\t\t\tthis[bt[3]](bt[4]) ;\n\t\t\t\t\t}) ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t}\n\t/**\n\t * @param {type}\n\t */\n\tsetContainer(container) {\n\t\tthis.container = container ;\n\t\tthis.container.on('click', $.proxy(function(e) {\n\t\t\tthis.container.prop(\"contenteditable\", true) ;\n\t\t\tthis.container.addClass('isEditing') ;\n\t\t\tif (!this.isStartedDrag) {\n\t\t\t\t$(\"#\"+this.container.get(0).id+\" .M_todelete\").remove() ;\n\t\t\t\tthis.imgDraggable = null ;\n\t\t\t}\n\t\t\tthis.caretMove() ;\n\t\t}, this)) ;\n\t\tthis.container.on('keyup', $.proxy(function(e) {\n\t\t\tthis.caretMove() ;\n\t\t}, this)) ;\n\t\tthis.container.on('keydown', $.proxy(function(e) {\n\t\t\tthis.caretMove() ;\n\t\t}, this)) ;\n\t\tthis.container.on('dragstart', $.proxy(function(e) {\n\t\t\t$(\"#\"+this.container.get(0).id+\" .M_todelete\").remove() ;\n\t\t}, this)) ;\n\t\t$(document).on('dblclick', '#'+this.container.get(0).id+\" img\", $.proxy(function(e) {\n\t\t\tthis.execImageInfo() ;\n\t\t}, this)) ;\n\t\t$(document).on('drop', '#'+this.container.get(0).id+\" img\", $.proxy(function(e) {\n\t\t\tlog(\"drop on image\",e) ;\n\t\t}, this)) ;\n\t\t$(document).click($.proxy(function(e) {\n\t\t\tif ($(e.target).closest(\"#\"+this.container.get(0).id+\", #\"+this.buttonsContainer.get(0).id).length===0) {\n\t\t\t\t$(\"#\"+this.container.get(0).id+\" .M_todelete\").remove() ;\n\t\t\t\t//this.container.prop(\"contenteditable\", false) ;\n\t\t\t\tthis.container.removeClass('isEditing') ;\n\t\t\t}\n\t\t}, this)) ;\n\t\tthis.container.on('drop', $.proxy(function(e) {\n\t\t\tvar files = e.originalEvent.dataTransfer.files ;\n\t\t\tif (files.length===0) return ;\n\n\t\t\te.preventDefault() ;\n\t\t\tif (!this.container.prop(\"contenteditable\")) {\n\t\t\t\tM_.Dialog.alert(\"Information\",\"Merci de cliquer d'abord l'endroit o vous souhaitez insrer l'image\") ;\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tthis.container.prop(\"contenteditable\", true) ;\n\t\t\tvar formData = new FormData();\n\t\t\tformData.append('file0', files[0]);\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\txhr.open('POST', '/upload');\n\t\t\tvar me = this ;\n\t\t\txhr.onload = function() {\n\t\t\t\t//console.log(xhr.responseText);\n\t\t\t\tvar jsonResponse = JSON.parse(xhr.responseText);\n\t\t\t\tdocument.execCommand(\"insertImage\", false, jsonResponse.tabRes[0]) ;\n\t\t\t\tme.caretMove() ;\n\t\t\t};\n\t\t\txhr.upload.onprogress = function(e) {\n\t\t\t\tif (e.lengthComputable) {\n\t\t\t\t\t// var complete = (e.loaded / e.total * 100 | 0);\n\t\t\t\t\t//updates a <progress> tag to show upload progress\n\t\t\t\t\t//$('progress').val(complete);\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.send(formData) ;\n\t\t}, this)) ;\n\n\t}\n};\n\n\n\n\n\n\nexport var M_ = M_ ;\n\n\n\n\n$.postJSON = function(url, data, callback) {\n\treturn $.ajax({\n\t\t'type': 'POST',\n\t\t'url': url,\n\t\t'contentType': 'application/json',\n\t\t'data': JSON.stringify(data),\n\t\t'dataType': 'json',\n\t\t'success': callback\n\t});\n};\n\n\n\n\n\n\n\n\n\n\n\n// (function(factory) {\n// \tif (typeof define === 'function' && define.amd) {\n// \t\tdefine([ 'jquery' ], factory);\n// \t}\n// \telse {\n// \t\tfactory(jQuery);\n// \t}\n// })(function($) {\n\n// ;;\n\n// var defaults = {\n// } ;\n\n\n// var md = $.m_draggable = { version: \"0.1.2\" };\n\n\n// // classic jQuery plugin ; I don't comment\n// $.fn.m_draggable = function(options) {\n// \tvar args = Array.prototype.slice.call(arguments, 1);\n// \tvar res = this;\n// \tthis.each(function(i, _element) {\n// \t\tvar element = $(_element);\n// \t\tvar draggable = element.data('m_draggable');\n// \t\tvar singleRes;\n// \t\tif (typeof options === 'string') {\n// \t\t\tif (draggable && $.isFunction(draggable[options])) {\n// \t\t\t\tsingleRes = draggable[options].apply(draggable, args);\n// \t\t\t\tif (!i) res = singleRes;\n// \t\t\t\tif (options === 'destroy') element.removeData('m_draggable');\n// \t\t\t}\n// \t\t} else if (!draggable) { // don't initialize twice\n// \t\t\tdraggable = new m_draggable(element, options);\n// \t\t\telement.data('m_draggable', draggable);\n// \t\t\tdraggable.reload();\n// \t\t}\n// \t});\n// \treturn res;\n// };\n\n\n// // More interesting...\n// function m_draggable(element, instanceOptions) {\n// \tvar me = this;\n\n// \tvar opts = $.extend(true, {}, defaults, instanceOptions) ;\n\n// \t// Exports\n// \t// me.render = render ;\n// \tme.sayHello = sayHello ;\n// \tme.reload = reload ;\n// \tme.opts = opts ;\n\n// \t// local variables\n\n\n// \t// for debug\n// \tfunction log() {\n// \t\tif (window.console) console.log.apply(window.console, arguments) ;\n// \t}\n\n\n// \tfunction reload() {\n// // \t\tjElHandle.mousedown({el:el}, $.proxy(function(evt) {\n// // \t\t\tthis.dragEl = evt.data.el ;\n// // \t\t\tthis.dragStart = true ;\n// // \t\t\tthis.dragDiff = {top: evt.pageY-this.dragEl.offset().top, left: evt.pageX-this.dragEl.offset().left}\n// // \t\t}, this)) ;\n// // \t\t$(document).mouseup({el:el}, $.proxy(function() {\n// // \t\t\tthis.dragStart = false ;\n// // \t\t}, this)) ;\n// // \t\t$(document).mousemove({el:el}, $.proxy(function(evt) {\n// // \t\t\tif (this.dragStart && this.dragEl == evt.data.el) {\n// // \t\t\t\tvar top = evt.pageY ;\n// // \t\t\t\tvar left = evt.pageX ;\n// // \t\t\t\tthis.dragEl.offset({top: top-this.dragDiff.top, left: left-this.dragDiff.left}) ;\n// // \t\t\t}\n// // \t\t}, this)) ;\n// \t}\n\n// \t// don't create / re-create dom, resize all components\n// \tfunction redraw() {\n// \t\trender() ;\n// \t}\n// \tfunction sayHello() {\n// \t\tlog(\"hello\") ;\n// \t}\n\n\n// }\n\n// // mg._startDrag = false ;\n\n\n// ;;\n\n// });\n\n\n\n\n\n\n// M_.Draggable = class {\n// \tconstructor(el, jElHandle=null, jElHelper=null) {\n// \t\t//tabDraggable.push({el:el, jElHandle:jElHandle}) ;\n// \t\tjElHandle.mousedown({el:el}, $.proxy(function(evt) {\n// \t\t\tthis.dragEl = evt.data.el ;\n// \t\t\tthis.dragStart = true ;\n// \t\t\tthis.dragDiff = {top: evt.pageY-this.dragEl.offset().top, left: evt.pageX-this.dragEl.offset().left}\n// \t\t}, this)) ;\n// \t\t$(document).mouseup({el:el}, $.proxy(function() {\n// \t\t\tthis.dragStart = false ;\n// \t\t}, this)) ;\n// \t\t$(document).mousemove({el:el}, $.proxy(function(evt) {\n// \t\t\tif (this.dragStart && this.dragEl == evt.data.el) {\n// \t\t\t\tvar top = evt.pageY ;\n// \t\t\t\tvar left = evt.pageX ;\n// \t\t\t\tthis.dragEl.offset({top: top-this.dragDiff.top, left: left-this.dragDiff.left}) ;\n// \t\t\t}\n// \t\t}, this)) ;\n// \t}\n\n\n\n/** WEBPACK FOOTER **\n ** ./libs/M_.js\n **/","'use strict';\n\nimport {M_} from './../../../libs/M_.js' ;\nimport {MT_Jobs} from './../../compiled/models/MT_Jobs.js' ;\n\n\nexport class Home extends M_.Controller {\n    constructor(opts) {\n        console.log(\"MT_Jobs\",MT_Jobs);\n        opts.tpl = JST['assets/templates/backend/Home.html'] ;\n        super(opts) ;\n    }\n\tinit() {\n        console.log(\"init\");\n\t\t// console.log(\"M_.Utils.isEventSupported('click')\",M_.Utils.isEventSupported('click'));\n\t\t// console.log(\"M_.Utils.isEventSupported('search')\",M_.Utils.isEventSupported('search'));\n\t}\n\tcreate() {\n        console.log(\"create\");\n\t}\n\tindexAction() {\n        console.log(\"indexAction\");\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./assets/js/backend/Home.js\n **/","'use strict';\nimport {M_} from './../../../libs/M_.js';\nexport class MT_Jobs extends M_.Model {\ngetDefinition() {\nreturn {\n\"primaryKey\": \"jo_id\",\n\"fields\":\n[\n\t{\n\t\t\"primary\": true,\n\t\t\"type\": \"int\",\n\t\t\"autoincrement\": true,\n\t\t\"name\": \"jo_id\"\n\t},\n\t{\n\t\t\"type\": \"varchar\",\n\t\t\"name\": \"jo_name\"\n\t},\n\t{\n\t\t\"model\": \"JobsTypes\",\n\t\t\"name\": \"jt_id\"\n\t},\n\t{\n\t\t\"type\": \"datetime\",\n\t\t\"index\": true,\n\t\t\"name\": \"createdAt\"\n\t},\n\t{\n\t\t\"type\": \"datetime\",\n\t\t\"index\": true,\n\t\t\"name\": \"updatedAt\"\n\t}\n]\n} ;\n}} \n\n\n/** WEBPACK FOOTER **\n ** ./assets/compiled/models/MT_Jobs.js\n **/"],"sourceRoot":""}